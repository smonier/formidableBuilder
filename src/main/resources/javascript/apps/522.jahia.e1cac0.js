(self.webpackChunkformidableBuilder=self.webpackChunkformidableBuilder||[]).push([[522],{268:(e,t,n)=>{var r=n(5072),a=n(4267);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]);r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},1004:(e,t,n)=>{(t=n(6314)(!1)).push([e.id,".fs-settings{padding:24px}.fs-settings__form-header{margin-bottom:32px;padding-bottom:16px;border-bottom:1px solid #e0e0e0}.fs-settings__form-subtitle{margin-top:8px;color:#666}.fs-settings__content{max-width:800px;margin:0 auto}.fs-settings__tabs{display:flex;gap:8px;margin-bottom:24px;border-bottom:1px solid #e0e0e0;padding-bottom:16px}.fs-settings__tab-content{padding:24px 0}.fs-settings__section{margin-bottom:32px}.fs-settings__section:last-child{margin-bottom:0}.fs-settings__field-description{margin-bottom:8px;color:#666;font-size:.875rem;line-height:1.4}.fs-settings__field{margin-bottom:24px}.fs-settings__field:last-child{margin-bottom:0}.fs-settings__switch-field{display:flex;align-items:center;gap:12px;margin-bottom:12px}.lexical-editor{border:1px solid #ccc;border-radius:4px;padding:8px}.lexical-editor .lexical-toolbar{display:flex;gap:4px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid #e0e0e0}.lexical-editor .lexical-toolbar .lexical-toolbar-button{padding:4px 8px;border:1px solid #ccc;border-radius:3px;background:#fff;cursor:pointer;font-size:14px;min-width:28px;display:flex;align-items:center;justify-content:center}.lexical-editor .lexical-toolbar .lexical-toolbar-button:hover{background:#f5f5f5}.lexical-editor .lexical-toolbar .lexical-toolbar-button:active{background:#e0e0e0}.lexical-editor .lexical-content-editable{outline:none;min-height:80px;padding:8px 0}.lexical-editor .lexical-placeholder{color:#999;position:absolute;top:8px;left:8px;pointer-events:none}.lexical-editor .font-bold{font-weight:bold}.lexical-editor .italic{font-style:italic}.lexical-editor .underline{text-decoration:underline}",""]),e.exports=t},1831:(e,t,n)=>{(t=n(6314)(!1)).push([e.id,".fb-preview{max-width:800px;margin:0 auto;padding:24px}.fb-preview__tabs{display:flex;gap:8px;margin-bottom:24px;border-bottom:1px solid #e0e0e0;padding-bottom:16px}.fb-preview__buttons{display:flex;gap:12px;margin-top:24px;justify-content:center}.fb-preview__step{padding:24px;border:1px solid #e0e0e0;border-radius:8px;background:#fff}.fb-preview__step-description{margin-top:8px;margin-bottom:16px;color:#666}.fb-preview__fields{display:flex;flex-direction:column;gap:16px}.fb-preview__field{padding:16px;border:1px solid #f0f0f0;border-radius:6px;background:#fafafa}.fb-field-preview__label{display:block;margin-bottom:8px;font-weight:500}.fb-field-preview__input,.fb-field-preview__select,.fb-field-preview__textarea{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px}.fb-field-preview__checkbox{margin-right:8px}.fb-field-preview__option{display:block;margin-bottom:4px}.fb-field-preview__button{display:block;margin-bottom:4px}.fb-field-preview__button{padding:8px 16px;border:none;border-radius:4px;cursor:pointer}.fb-field-preview__button--primary{background:#007bff;color:#fff}.fb-field-preview__button--secondary{background:#6c757d;color:#fff}.fb-field-preview__placeholder{color:#999;font-style:italic}.fb-preview__loading{display:flex;align-items:center;justify-content:center;min-height:200px}",""]),e.exports=t},3484:(e,t,n)=>{var r=n(5072),a=n(1831);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]);r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},4267:(e,t,n)=>{(t=n(6314)(!1)).push([e.id,".fb-list{display:flex;flex-direction:column;align-items:center;gap:40px;padding:48px 64px 64px;background:linear-gradient(135deg, #f8faff 0%, #f1f5ff 80%);min-height:calc(100vh - 150px)}.fb-list__section{width:100%;max-width:1280px}.fb-panel{padding:32px 36px;border-radius:12px;box-shadow:0 20px 40px rgba(15,19,39,.08);display:flex;flex-direction:column;gap:24px}.fb-panel__header{display:flex;flex-direction:column;gap:8px}.fb-panel__body{display:flex;flex-direction:column;gap:20px}.fb-field{display:flex;flex-direction:column;gap:10px}.fb-textarea{width:100%;border:1px solid #cfd5e6;border-radius:8px;padding:12px;background:#fdfdff;resize:vertical;font-family:inherit}.fb-panel__actions{display:flex;justify-content:flex-end;gap:16px;padding-top:8px}.fb-list__loading,.fb-list__empty{display:flex;align-items:center;gap:12px;min-height:160px;justify-content:center}.fb-list__panel{padding:40px 48px;background:#fff;border-radius:16px;box-shadow:0 24px 60px rgba(19,32,68,.08);display:flex;flex-direction:column;gap:32px}.fb-card-grid{display:grid;grid-template-columns:1fr;gap:32px;width:100%}.fb-card{display:flex;flex-direction:column;gap:20px;padding:28px 32px;border-radius:20px;border:1px solid rgba(15,19,39,.08);box-shadow:0 20px 55px rgba(19,32,68,.08);background:#fdfdff}.fb-card__header{display:flex;align-items:flex-start;justify-content:space-between;gap:20px;padding-bottom:12px;border-bottom:1px solid rgba(143,155,179,.2)}.fb-card__title{display:flex;flex-direction:column;gap:4px}.fb-card__intro{min-height:64px;color:#31374a;line-height:1.5}.fb-card__intro-html{display:flex;flex-direction:column;gap:8px}.fb-card__intro-html p{margin:0}.fb-card__meta{display:flex;gap:32px;font-size:14px;color:#4c566a;border-top:1px solid rgba(143,155,179,.18);padding-top:16px}.fb-card__meta-item{display:flex;flex-direction:column;gap:6px}.fb-card__actions{display:flex;flex-direction:column;gap:12px;border-top:1px solid rgba(143,155,179,.15);padding-top:20px}.fb-card__actions-row{display:flex;flex-wrap:nowrap;gap:12px;width:100%}.fb-card__actions-row .moonstone-button{flex:1;justify-content:flex-start}@media(max-width: 900px){.fb-card__actions-row{flex-wrap:wrap}}@media(max-width: 1024px){.fb-list{padding:32px}.fb-list__panel{padding:32px}}@media(min-width: 720px){.fb-card-grid{grid-template-columns:repeat(2, minmax(0, 1fr))}}@media(min-width: 1100px){.fb-card-grid{grid-template-columns:repeat(3, minmax(0, 1fr))}}@media(max-width: 720px){.fb-list{padding:24px 16px 40px}.fb-card{padding:24px}}.fb-card-grid .moonstone-paper{margin-top:0}",""]),e.exports=t},4641:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Jt});var r=n(3119),a=n(7255);const i="/form-builder";var o,l=n(633),s=n.n(l),d=n(5556),c=n.n(d),u=n(7082),p=n(4338),f={"X-Requested-With":"XMLHttpRequest"},m=function(){var e,t;return o||(o=new p.ApolloClient({link:new p.HttpLink({uri:(e=window.contextJsParameters,t=(void 0===e?{}:e).contextPath,"".concat((void 0===t?"":t)||"","/modules/graphql")),credentials:"include",headers:f}),cache:new p.InMemoryCache({typePolicies:{JCRNode:{keyFields:["uuid"]}}}),connectToDevTools:!1})),o},b=n(9010);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,b.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v="formidableBuilder",y="EDIT",x=function(e,t){return{name:e,type:"boolean",labelKey:t}},w=function(e,t){return h({name:e,type:"text",labelKey:t},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})},_=function(e,t){return{name:e,type:"number",labelKey:t}},E=function(e,t){return{name:e,type:"date",labelKey:t}},k=function(e,t){return{name:e,type:"datetime",labelKey:t}},N=function(e,t,n,r){return{name:e,type:"select",labelKey:t,options:n,defaultValue:r}},T=function(e,t){return h({name:e,type:"stringList",labelKey:t},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})},S=[{id:"inputButton",nodeType:"fmdb:inputButton",labelKey:"fields.types.inputButton",defaultProperties:{buttonType:"button",variant:"primary"},propertySchema:[N("buttonType","builder.fields.properties.buttonType",[{value:"button",labelKey:"builder.fields.properties.buttonTypeOptions.button"},{value:"submit",labelKey:"builder.fields.properties.buttonTypeOptions.submit"},{value:"reset",labelKey:"builder.fields.properties.buttonTypeOptions.reset"}],"button"),N("variant","builder.fields.properties.variant",[{value:"primary",labelKey:"builder.fields.properties.variantOptions.primary"},{value:"secondary",labelKey:"builder.fields.properties.variantOptions.secondary"},{value:"danger",labelKey:"builder.fields.properties.variantOptions.danger"}],"primary")]},{id:"inputCheckbox",nodeType:"fmdb:inputCheckbox",labelKey:"fields.types.inputCheckbox",defaultProperties:{required:!1,defaultChecked:!1,value:""},propertySchema:[x("required","builder.fields.properties.required"),x("defaultChecked","builder.fields.properties.defaultChecked"),w("value","builder.fields.properties.value")]},{id:"checkboxGroup",nodeType:"fmdb:checkboxGroup",labelKey:"fields.types.checkboxGroup",defaultProperties:{required:!1},propertySchema:[x("required","builder.fields.properties.required")]},{id:"inputColor",nodeType:"fmdb:inputColor",labelKey:"fields.types.inputColor",defaultProperties:{required:!1,defaultValue:""},propertySchema:[x("required","builder.fields.properties.required"),w("defaultValue","builder.fields.properties.defaultValue")]},{id:"inputDate",nodeType:"fmdb:inputDate",labelKey:"fields.types.inputDate",defaultProperties:{required:!1,defaultValue:null,min:null,max:null,step:null},propertySchema:[x("required","builder.fields.properties.required"),E("defaultValue","builder.fields.properties.defaultDate"),E("min","builder.fields.properties.minDate"),E("max","builder.fields.properties.maxDate"),_("step","builder.fields.properties.step")]},{id:"inputDatetimeLocal",nodeType:"fmdb:inputDatetimeLocal",labelKey:"fields.types.inputDatetimeLocal",defaultProperties:{required:!1,defaultValue:null,min:null,max:null,step:null},propertySchema:[x("required","builder.fields.properties.required"),k("defaultValue","builder.fields.properties.defaultDateTime"),k("min","builder.fields.properties.minDateTime"),k("max","builder.fields.properties.maxDateTime"),_("step","builder.fields.properties.step")]},{id:"inputEmail",nodeType:"fmdb:inputEmail",labelKey:"fields.types.inputEmail",defaultProperties:{required:!1,autocomplete:!1,multiple:!1,placeholder:"",defaultValue:"",list:[],pattern:"",minLength:null,maxLength:null},propertySchema:[x("required","builder.fields.properties.required"),x("autocomplete","builder.fields.properties.autocomplete"),x("multiple","builder.fields.properties.multiple"),w("placeholder","builder.fields.properties.placeholder"),w("defaultValue","builder.fields.properties.defaultValue"),T("list","builder.fields.properties.list",{addLabelKey:"builder.fields.properties.listAdd",removeLabelKey:"builder.fields.properties.listRemove",itemLabelKey:"builder.fields.properties.listItem"}),w("pattern","builder.fields.properties.pattern"),_("minLength","builder.fields.properties.minLength"),_("maxLength","builder.fields.properties.maxLength")]},{id:"inputFile",nodeType:"fmdb:inputFile",labelKey:"fields.types.inputFile",defaultProperties:{accept:"",multiple:!1,required:!1},propertySchema:[w("accept","builder.fields.properties.accept"),x("multiple","builder.fields.properties.multiple"),x("required","builder.fields.properties.required")]},{id:"inputHidden",nodeType:"fmdb:inputHidden",labelKey:"fields.types.inputHidden",defaultProperties:{value:""},propertySchema:[w("value","builder.fields.properties.value")]},{id:"inputRadio",nodeType:"fmdb:inputRadio",labelKey:"fields.types.inputRadio",allowedParents:["radioGroup"],defaultProperties:{defaultChecked:!1,value:""},propertySchema:[x("defaultChecked","builder.fields.properties.defaultChecked"),w("value","builder.fields.properties.value")]},{id:"radioGroup",nodeType:"fmdb:radioGroup",labelKey:"fields.types.radioGroup",defaultProperties:{required:!1},propertySchema:[x("required","builder.fields.properties.required")]},{id:"inputText",nodeType:"fmdb:inputText",labelKey:"fields.types.inputText",defaultProperties:{required:!1,placeholder:"",defaultValue:"",list:[],minLength:null,maxLength:null},propertySchema:[x("required","builder.fields.properties.required"),w("placeholder","builder.fields.properties.placeholder"),w("defaultValue","builder.fields.properties.defaultValue"),T("list","builder.fields.properties.list",{addLabelKey:"builder.fields.properties.listAdd",removeLabelKey:"builder.fields.properties.listRemove",itemLabelKey:"builder.fields.properties.listItem"}),_("minLength","builder.fields.properties.minLength"),_("maxLength","builder.fields.properties.maxLength")]},{id:"select",nodeType:"fmdb:select",labelKey:"fields.types.select",defaultProperties:{options:[{label:"Option 1",value:"option-1",selected:!1}],size:null,required:!1,multiple:!1,disabled:!1,autofocus:!1},propertySchema:[_("size","builder.fields.properties.size"),x("required","builder.fields.properties.required"),x("multiple","builder.fields.properties.multiple"),x("disabled","builder.fields.properties.disabled"),x("autofocus","builder.fields.properties.autofocus")]},{id:"textarea",nodeType:"fmdb:textarea",labelKey:"fields.types.textarea",defaultProperties:{required:!1,placeholder:"",defaultValue:"",minLength:null,maxLength:null,rows:null,resize:"vertical"},propertySchema:[x("required","builder.fields.properties.required"),w("placeholder","builder.fields.properties.placeholder"),{name:"defaultValue",type:"multiline",labelKey:"builder.fields.properties.defaultValue"},_("minLength","builder.fields.properties.minLength"),_("maxLength","builder.fields.properties.maxLength"),_("rows","builder.fields.properties.rows"),N("resize","builder.fields.properties.resize",[{value:"none",labelKey:"builder.fields.properties.resizeOptions.none"},{value:"both",labelKey:"builder.fields.properties.resizeOptions.both"},{value:"horizontal",labelKey:"builder.fields.properties.resizeOptions.horizontal"},{value:"vertical",labelKey:"builder.fields.properties.resizeOptions.vertical"}],"vertical")]}],C=function(e){return S.find(function(t){return t.nodeType===e})},A=function(e){return S.find(function(t){return t.id===e})},B=function(e,t){var n=A(e);if(!n)throw new Error("Unknown field type ".concat(e));return{id:"temp-".concat(Date.now()),label:t||"",name:"",description:"",type:n.id,nodeType:n.nodeType,properties:h({},n.defaultProperties)}},P=(0,l.createContext)(null),L=function(e){var t=e.children,n=window,r=n.contextJsParameters,a=void 0===r?{}:r,i=n.formidableBuilder,o=void 0===i?{}:i,d=a.lang,c=void 0===d?"en":d,u=a.siteKey,p=void 0===u?"default":u,f=a.language,b=void 0===f?a.lang:f,g=a.workspace,h=void 0===g?y:g,x=o.uiLanguage||c||b||"en",w=o.siteKey||p,_=o.formsPath||function(e){return"/sites/".concat(e,"/contents/forms")}(w),E=o.workspace||h||y,k=function(){var e=(E||y).toUpperCase();return"LIVE"===e||"EDIT"===e?e:y}(),N=(0,l.useMemo)(function(){return{client:m(),namespace:v,language:x,siteKey:w,workspace:k,formsPath:_}},[x,w,_,k]);return s().createElement(P.Provider,{value:N},t)};L.propTypes={children:c().node.isRequired};var O=function(){var e=(0,l.useContext)(P);if(!e)throw new Error("useFormBuilderContext must be used inside FormBuilderProvider");return e},F=n(2816),R=n(2207),$=n.n(R),I=n(6107),j=n(1658),D=n(5285),M=n(9648),q=["className"];function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){(0,b.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var K={title:"",intro:""},G=function(e){var t=e.isOpen,n=e.onCancel,r=e.onSubmit,i=e.isLoading,o=(0,j.useTranslation)(v).t,d=(0,l.useState)(K),c=(0,a.A)(d,2),u=c[0],p=c[1],f=I.Textarea||function(e){var t=e.className,n=void 0===t?"":t,r=(0,M.A)(e,q);return s().createElement("textarea",(0,D.A)({className:"fb-textarea ".concat(n).trim()},r))};if((0,l.useEffect)(function(){t||p(K)},[t]),!t)return null;var m=function(e,t){p(function(n){return V(V({},n),{},(0,b.A)({},e,t))})},g=!u.title||i;return s().createElement(I.Paper,{className:"fb-panel"},s().createElement("div",{className:"fb-panel__header"},s().createElement(I.Typography,{variant:"heading"},o("list.create.title")),s().createElement(I.Typography,{variant:"body"},o("list.create.description"))),s().createElement("div",{className:"fb-panel__body"},s().createElement("div",{className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},o("list.fields.title")),s().createElement(I.Input,{value:u.title,placeholder:o("list.fields.titlePlaceholder"),size:"big",onChange:function(e){return m("title",e.target.value)}})),s().createElement("div",{className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},o("list.fields.intro")),s().createElement(f,{value:u.intro,placeholder:o("list.fields.introPlaceholder"),rows:4,onChange:function(e){return m("intro",e.target.value)}}))),s().createElement("div",{className:"fb-panel__actions"},s().createElement(I.Button,{label:o("actions.cancel"),size:"big",onClick:n}),s().createElement(I.Button,{label:o(i?"actions.creating":"actions.create"),size:"big",color:"accent",isDisabled:g,onClick:function(){return r(u)}})))};G.propTypes={isOpen:c().bool.isRequired,onCancel:c().func.isRequired,onSubmit:c().func.isRequired,isLoading:c().bool},G.defaultProps={isLoading:!1};var U,H,J,W,Q,X,Y,Z,ee,te,ne,re,ae,ie,oe,le,se,de,ce,ue,pe,fe,me=n(8557),be=n(721),ge=(0,p.gql)(U||(U=(0,be.A)(["\n    fragment PropertyFields on JCRProperty {\n        name\n        value\n        values\n        type\n    }\n"]))),he=(0,p.gql)(H||(H=(0,be.A)(["\n    fragment FieldChildFragment on JCRNode {\n        uuid\n        name\n        path\n        primaryNodeType {\n            name\n        }\n        displayName(language: $language)\n        properties(language: $language) {\n            ...PropertyFields\n        }\n    }\n    ","\n"])),ge),ve=(0,p.gql)(J||(J=(0,be.A)(["\n    fragment FieldFragment on JCRNode {\n        uuid\n        name\n        path\n        primaryNodeType {\n            name\n        }\n        displayName(language: $language)\n        properties(language: $language) {\n            ...PropertyFields\n        }\n        children {\n            nodes {\n                ...FieldChildFragment\n            }\n        }\n    }\n    ","\n    ","\n"])),he,ge),ye=(0,p.gql)(W||(W=(0,be.A)(['\n    fragment StepFragment on JCRNode {\n        uuid\n        name\n        path\n        primaryNodeType {\n            name\n        }\n        displayName(language: $language)\n        properties(language: $language, names: ["jcr:description"]) {\n            ...PropertyFields\n        }\n        children {\n            nodes {\n                ...FieldFragment\n            }\n        }\n    }\n    ',"\n    ","\n"])),ve,ge),xe=(0,p.gql)(Q||(Q=(0,be.A)(['\n    fragment FormFragment on JCRNode {\n        uuid\n        name\n        path\n        displayName(language: $language)\n        properties(language: $language) {\n            ...PropertyFields\n        }\n        children {\n            nodes {\n                ...StepFragment\n            }\n        }\n        fieldsetsContainers: children(names: ["fieldsets"]) {\n            nodes {\n                uuid\n                name\n                path\n                children {\n                    nodes {\n                        ...StepFragment\n                    }\n                }\n            }\n        }\n    }\n    ',"\n    ","\n"])),ye,ge),we=(0,p.gql)(X||(X=(0,be.A)(['\n    query GetFormidableForms($workspace: Workspace!, $language: String!, $paths: [String!]!) {\n        jcr(workspace: $workspace) {\n            nodesByCriteria(criteria: {nodeType: "fmdb:form", paths: $paths}) {\n                nodes {\n                    uuid\n                    name\n                    path\n                    displayName(language: $language)\n                    properties(language: $language, names: ["intro", "jcr:lastModified"]) {\n                        ...PropertyFields\n                    }\n                    children {\n                        nodes {\n                            uuid\n                            name\n                            path\n                            primaryNodeType {\n                                name\n                            }\n                            properties(language: $language, names: ["jcr:lastModified"]) {\n                                ...PropertyFields\n                            }\n                            children {\n                                nodes {\n                                    uuid\n                                    properties(language: $language, names: ["jcr:lastModified"]) {\n                                        ...PropertyFields\n                                    }\n                                    children {\n                                        nodes {\n                                            properties(language: $language, names: ["jcr:lastModified"]) {\n                                                ...PropertyFields\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    ',"\n"])),ge),_e=(0,p.gql)(Y||(Y=(0,be.A)(["\n    query GetFormidableForm($workspace: Workspace!, $language: String!, $uuid: String!) {\n        jcr(workspace: $workspace) {\n            nodeById(uuid: $uuid) {\n                ...FormFragment\n            }\n        }\n    }\n    ","\n"])),xe),Ee=(0,p.gql)(Z||(Z=(0,be.A)(['\n    query GetSiteLanguages($workspace: Workspace!, $sitePath: String!) {\n        jcr(workspace: $workspace) {\n            nodeByPath(path: $sitePath) {\n                languages: property(name: "j:languages") {\n                    values\n                }\n            }\n        }\n    }\n']))),ke=(0,p.gql)(ee||(ee=(0,be.A)(['\n    mutation CreateForm($workspace: Workspace!, $parentPath: String!, $name: String!, $language: String!, $title: String!, $intro: String) {\n        jcr(workspace: $workspace) {\n            addNode(\n                parentPathOrId: $parentPath\n                name: $name\n                primaryNodeType: "fmdb:form"\n                properties: [\n                    {name: "jcr:title", value: $title, language: $language}\n                    {name: "intro", value: $intro, language: $language}\n                ]\n            ) {\n                uuid\n            }\n        }\n    }\n']))),Ne=(0,p.gql)(te||(te=(0,be.A)(['\n    mutation UpdateFormMetadata($workspace: Workspace!, $pathOrId: String!, $language: String!, $title: String!, $intro: String) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                mutateProperty_title: mutateProperty(name: "jcr:title") {\n                    setValue(value: $title, language: $language)\n                }\n                mutateProperty_intro: mutateProperty(name: "intro") {\n                    setValue(value: $intro, language: $language)\n                }\n                uuid\n            }\n        }\n    }\n']))),Te=(0,p.gql)(ne||(ne=(0,be.A)(['\n    mutation UpdateFormMixinResponses($workspace: Workspace!, $pathOrId: String!, $language: String!, $submissionMessage: String, $errorMessage: String) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                addMixin(mixin: "fmdbmix:responses")\n                mutateProperty_submissionMessage: mutateProperty(name: "submissionMessage") {\n                    setValue(value: $submissionMessage, language: $language)\n                }\n                mutateProperty_errorMessage: mutateProperty(name: "errorMessage") {\n                    setValue(value: $errorMessage, language: $language)\n                }\n                uuid\n            }\n        }\n    }\n']))),Se=(0,p.gql)(re||(re=(0,be.A)(['\n    mutation UpdateFormMixinButtons($workspace: Workspace!, $pathOrId: String!, $language: String!, $submitBtnLabel: String, $resetBtnLabel: String, $showResetBtn: String, $newFormBtnLabel: String, $showNewFormBtn: String, $tryAgainBtnLabel: String, $showTryAgainBtn: String) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                addMixin(mixin: "fmdbmix:buttons")\n                mutateProperty_submitBtnLabel: mutateProperty(name: "submitBtnLabel") {\n                    setValue(value: $submitBtnLabel, language: $language)\n                }\n                mutateProperty_resetBtnLabel: mutateProperty(name: "resetBtnLabel") {\n                    setValue(value: $resetBtnLabel, language: $language)\n                }\n                mutateProperty_showResetBtn: mutateProperty(name: "showResetBtn") {\n                    setValue(value: $showResetBtn)\n                }\n                mutateProperty_newFormBtnLabel: mutateProperty(name: "newFormBtnLabel") {\n                    setValue(value: $newFormBtnLabel, language: $language)\n                }\n                mutateProperty_showNewFormBtn: mutateProperty(name: "showNewFormBtn") {\n                    setValue(value: $showNewFormBtn)\n                }\n                mutateProperty_tryAgainBtnLabel: mutateProperty(name: "tryAgainBtnLabel") {\n                    setValue(value: $tryAgainBtnLabel, language: $language)\n                }\n                mutateProperty_showTryAgainBtn: mutateProperty(name: "showTryAgainBtn") {\n                    setValue(value: $showTryAgainBtn)\n                }\n                uuid\n            }\n        }\n    }\n']))),Ce=(0,p.gql)(ae||(ae=(0,be.A)(['\n    mutation UpdateFormMixinActions($workspace: Workspace!, $pathOrId: String!, $customTarget: String) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                addMixin(mixin: "fmdbmix:actions")\n                mutateProperty(name: "customTarget") {\n                    setValue(value: $customTarget)\n                }\n                uuid\n            }\n        }\n    }\n']))),Ae=(0,p.gql)(ie||(ie=(0,be.A)(['\n    mutation UpdateFormMixinStyle($workspace: Workspace!, $pathOrId: String!, $css: String) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                addMixin(mixin: "fmdbmix:style")\n                mutateProperty(name: "css") {\n                    setValue(value: $css)\n                }\n                uuid\n            }\n        }\n    }\n']))),Be=(0,p.gql)(oe||(oe=(0,be.A)(["\n    mutation DeleteNode($workspace: Workspace!, $pathOrId: String!) {\n        jcr(workspace: $workspace) {\n            deleteNode(pathOrId: $pathOrId)\n        }\n    }\n"]))),Pe=(0,p.gql)(le||(le=(0,be.A)(['\n    mutation AddFieldset($workspace: Workspace!, $parentPath: String!, $name: String!, $language: String!, $title: String!, $description: String) {\n        jcr(workspace: $workspace) {\n            addNode(\n                parentPathOrId: $parentPath\n                name: $name\n                primaryNodeType: "fmdb:fieldset"\n                properties: [\n                    {name: "jcr:title", value: $title, language: $language}\n                    {name: "jcr:description", value: $description, language: $language}\n                ]\n            ) {\n                uuid\n            }\n        }\n    }\n']))),Le=(0,p.gql)(se||(se=(0,be.A)(["\n    mutation UpdateFieldset($workspace: Workspace!, $pathOrId: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                setPropertiesBatch(properties: $properties) {\n                    property {\n                        name\n                    }\n                }\n                uuid\n            }\n        }\n    }\n"]))),Oe=(0,p.gql)(de||(de=(0,be.A)(["\n    mutation ReorderSteps($workspace: Workspace!, $pathOrId: String!, $names: [String!]!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                reorderChildren(names: $names)\n            }\n        }\n    }\n"]))),Fe=(0,p.gql)(ce||(ce=(0,be.A)(["\n    mutation AddField($workspace: Workspace!, $parentPath: String!, $name: String!, $primaryNodeType: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: $workspace) {\n            addNode(\n                parentPathOrId: $parentPath\n                name: $name\n                primaryNodeType: $primaryNodeType\n                properties: $properties\n            ) {\n                uuid\n            }\n        }\n    }\n"]))),Re=(0,p.gql)(ue||(ue=(0,be.A)(["\n    mutation UpdateField($workspace: Workspace!, $pathOrId: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                setPropertiesBatch(properties: $properties) {\n                    property {\n                        name\n                    }\n                }\n                uuid\n            }\n        }\n    }\n"]))),$e=(0,p.gql)(pe||(pe=(0,be.A)(["\n    mutation ReorderFields($workspace: Workspace!, $pathOrId: String!, $names: [String!]!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                reorderChildren(names: $names)\n            }\n        }\n    }\n"]))),Ie=(0,p.gql)(fe||(fe=(0,be.A)(["\n    mutation RenameNode($workspace: Workspace!, $pathOrId: String!, $name: String!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                rename(name: $name)\n                uuid\n            }\n        }\n    }\n"]))),je=function(e){return e?e.toString().trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").substring(0,42):""},De=function(e){return((e.children||{}).nodes||[]).filter(function(e){var t;return"fmdb:fieldset"===(null===(t=e.primaryNodeType)||void 0===t?void 0:t.name)}).length},Me=function(e){var t,n=[],r=null===(t=e.properties)||void 0===t||null===(t=t.find(function(e){return"jcr:lastModified"===e.name}))||void 0===t?void 0:t.value;r&&n.push(new Date(r));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(t>3)){if(e.properties&&Array.isArray(e.properties)){var r,i=null===(r=e.properties.find(function(e){return"jcr:lastModified"===e.name}))||void 0===r?void 0:r.value;i&&n.push(new Date(i))}e.children&&e.children.nodes&&Array.isArray(e.children.nodes)&&e.children.nodes.forEach(function(e){return a(e,t+1)})}};return((e.children||{}).nodes||[]).filter(function(e){var t;return"fmdb:fieldset"===(null===(t=e.primaryNodeType)||void 0===t?void 0:t.name)}).forEach(function(e){return a(e)}),n.length>0?new Date(Math.max.apply(Math,(0,me.A)(n.map(function(e){return e.getTime()})))):null},qe=n(9987),ze=(n(268),function(){var e=(0,j.useTranslation)(v).t,t=(0,u.useHistory)(),n=(0,u.useRouteMatch)(),r=O().language,i=function(){var e=O(),t=e.workspace,n=e.language,r=e.formsPath,i=(0,p.useQuery)(we,{variables:{workspace:t,language:n,paths:[r]},fetchPolicy:"network-only"}),o=i.data,s=i.loading,d=i.refetch,c=(0,p.useMutation)(ke),u=(0,a.A)(c,2),f=u[0],m=u[1].loading,b=(0,p.useMutation)(Be),g=(0,a.A)(b,2),h=g[0],v=g[1].loading,y=(0,l.useMemo)(function(){var e;return((null==o||null===(e=o.jcr)||void 0===e||null===(e=e.nodesByCriteria)||void 0===e?void 0:e.nodes)||[]).map(function(e){var t;return{id:e.uuid,name:e.name,path:e.path,title:e.displayName||e.name,intro:(null===(t=e.properties)||void 0===t||null===(t=t.find(function(e){return"intro"===e.name}))||void 0===t?void 0:t.value)||"",steps:De(e),updatedAt:Me(e)}})},[o]),x=(0,l.useCallback)(function(){var e=(0,F.A)($().mark(function e(a){var i;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=je(a.title)||"form-".concat(Date.now()),e.next=1,f({variables:{workspace:t,parentPath:r,name:i,language:n,title:a.title,intro:a.intro||""}});case 1:return e.next=2,d();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[f,r,n,d,t]),w=(0,l.useCallback)(function(){var e=(0,F.A)($().mark(function e(n){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,h({variables:{workspace:t,pathOrId:n}});case 1:return e.next=2,d();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[h,d,t]);return{forms:y,loading:s||m||v,createForm:x,deleteForm:w,refetch:d}}(),o=i.forms,d=i.loading,c=i.createForm,f=i.deleteForm,m=i.refetch,b=(0,l.useState)(!1),g=(0,a.A)(b,2),h=g[0],y=g[1],x=((null==n?void 0:n.url)||"/form-builder").replace(/\*$/,""),w=function(){var t=(0,F.A)($().mark(function t(n){return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm(e("list.actions.deleteConfirm",{title:n.title}))){t.next=1;break}return t.abrupt("return");case 1:return t.next=2,f(n.path);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),_=(0,l.useMemo)(function(){var t=null;try{t=new Intl.DateTimeFormat(r||"en",{dateStyle:"medium",timeStyle:"short"})}catch(e){console.warn("Unable to format date for locale",r,e)}return function(n){if(!n)return e("list.cards.neverUpdated");try{return t?t.format(new Date(n)):n}catch(e){return n}}},[r,e]),E=function(){var t=(0,F.A)($().mark(function t(n){var r;return $().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e("list.cards.duplicateName",{title:n.title}),t.next=1,c({title:r,intro:n.intro});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return s().createElement(I.LayoutContent,{header:s().createElement(I.Header,{title:e("list.title"),subtitle:e("list.subtitle"),mainActions:[s().createElement(I.Button,{key:"refresh",size:"big",label:e("actions.refresh"),isDisabled:d,onClick:function(){return m()}}),s().createElement(I.Button,{key:"createForm",color:"accent",size:"big",label:e("actions.create"),onClick:function(){return y(!0)}})]}),content:s().createElement("div",{className:"fb-list"},h&&s().createElement("div",{className:"fb-list__section"},s().createElement(G,{isOpen:h,isLoading:d,onCancel:function(){return y(!1)},onSubmit:function(){var e=(0,F.A)($().mark(function e(t){return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,c(t);case 1:y(!1);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()})),s().createElement(I.Paper,{className:"fb-list__panel fb-list__section"},d&&s().createElement("div",{className:"fb-list__loading"},s().createElement(I.Loader,{size:"big"}),s().createElement(I.Typography,{variant:"body"},e("states.loading"))),!d&&0===o.length&&s().createElement("div",{className:"fb-list__empty"},s().createElement(I.Typography,{variant:"body"},e("list.empty"))),!d&&o.length>0&&s().createElement("div",{className:"fb-card-grid"},o.map(function(n){return s().createElement(I.Paper,{key:n.id,className:"fb-card"},s().createElement("div",{className:"fb-card__header"},s().createElement("div",{className:"fb-card__title"},s().createElement(I.Typography,{variant:"subheading"},n.title),s().createElement(I.Typography,{variant:"caption"},n.name)),s().createElement(I.Chip,{color:"accent",size:"small",label:e("list.columns.stepCount",{count:n.steps})})),s().createElement("div",{className:"fb-card__intro"},n.intro?s().createElement("div",{dangerouslySetInnerHTML:{__html:n.intro},className:"fb-card__intro-html"}):s().createElement(I.Typography,{variant:"body"},e("list.cards.introFallback"))),s().createElement("div",{className:"fb-card__meta"},s().createElement("div",{className:"fb-card__meta-item"},s().createElement(I.Typography,{variant:"caption"},e("list.cards.updated")),s().createElement(I.Typography,{variant:"body"},_(n.updatedAt)))),s().createElement("div",{className:"fb-card__actions"},[[{key:"preview",label:e("actions.preview"),onClick:function(){return function(e){t.push("".concat(x,"/").concat(e.id,"?view=preview"))}(n)},icon:qe.cx},{key:"submissions",label:e("actions.submissions"),onClick:function(){return function(e){t.push("".concat(x,"/").concat(e.id,"?view=submissions"))}(n)},icon:qe.cv},{key:"settings",label:e("actions.settings"),onClick:function(){return function(e){t.push({pathname:"".concat(x,"/").concat(e.id,"/settings"),state:{formTitle:e.title}})}(n)},icon:qe.c1}],[{key:"duplicate",label:e("actions.duplicate"),onClick:function(){return E(n)},icon:qe.a5},{key:"edit",label:e("actions.edit"),onClick:function(){return function(e){t.push({pathname:"".concat(x,"/").concat(e.id),state:{formTitle:e.title}})}(n)},icon:qe.ai},{key:"delete",label:e("actions.delete"),onClick:function(){return w(n)},icon:qe.aa,color:"danger"}]].map(function(e){return s().createElement("div",{key:"actions-row-".concat(e.map(function(e){return e.key}).join("-")),className:"fb-card__actions-row"},e.map(function(e){var t=e.icon;return s().createElement(I.Button,{key:e.key,size:"default",variant:"ghost",color:e.color||"default",icon:s().createElement(t,{size:"small"}),label:e.label,onClick:e.onClick})}))})))}))))})}),Ve=n(3375),Ke=n(3627),Ge=n(4979),Ue={inputButton:qe.aJ,inputCheckbox:qe.E,checkboxGroup:qe.bl,inputColor:qe.bv,inputDate:qe.B,inputDatetimeLocal:qe.V,inputEmail:qe.bS,inputFile:qe._,inputHidden:qe.aY,inputRadio:qe.bI,radioGroup:qe.bI,inputText:qe.ce,select:qe.b7,textarea:qe.bw},He=function(e){var t=e.step,n=e.isActive,r=e.onSelect,a=e.onRemove,i=(0,j.useTranslation)(v).t,o=(0,Ke.gl)({id:t.id}),l=o.attributes,d=o.listeners,c=o.setNodeRef,u=o.transform,p=o.transition,f={transform:Ge.Ks.Transform.toString(u),transition:p};return s().createElement("li",(0,D.A)({ref:c,style:f,className:"fb-step".concat(n?" fb-step--active":"")},l,d),s().createElement("button",{type:"button",className:"fb-step__button",onClick:function(){return r(t.id)}},s().createElement(I.Typography,{variant:"body",weight:"bold"},t.label),s().createElement(I.Typography,{variant:"caption"},t.fields.length," fields")),s().createElement(I.Button,{label:i("builder.sidebar.removeStep"),className:"fb-step__delete",onClick:function(){return a(t.id)}}))};He.propTypes={step:c().shape({id:c().string.isRequired,label:c().string.isRequired,fields:c().array}).isRequired,isActive:c().bool.isRequired,onSelect:c().func.isRequired,onRemove:c().func.isRequired};var Je=function(e){var t=e.steps,n=e.activeStepId,r=e.onSelectStep,i=e.onAddStep,o=e.onRemoveStep,d=e.onReorderSteps,c=e.onAddField,u=(0,j.useTranslation)(v).t,p=(0,l.useState)("steps"),f=(0,a.A)(p,2),m=f[0],b=f[1],g=(0,Ve.FR)((0,Ve.MS)(Ve.AN,{activationConstraint:{distance:8}}));return s().createElement(I.Paper,{className:"fb-sidebar"},s().createElement("div",{className:"fb-sidebar__header"},s().createElement(I.Typography,{variant:"subheading"},u("builder.sidebar.title"))),s().createElement("div",{className:"fb-sidebar__tabs"},s().createElement(I.Button,{variant:"steps"===m?"primary":"ghost",size:"big",label:u("builder.sidebar.stepsTab"),onClick:function(){return b("steps")}}),s().createElement(I.Button,{variant:"fields"===m?"primary":"ghost",size:"big",label:u("builder.sidebar.fieldsTab"),onClick:function(){return b("fields")}})),"steps"===m&&s().createElement(s().Fragment,null,s().createElement("div",{className:"fb-sidebar__header",style:{paddingTop:0}},s().createElement(I.Button,{color:"accent",label:u("builder.sidebar.addStep"),onClick:i})),s().createElement(Ve.Mp,{sensors:g,onDragEnd:function(e){var n=e.active,r=e.over;if(r&&n.id!==r.id){var a=t.findIndex(function(e){return e.id===n.id}),i=t.findIndex(function(e){return e.id===r.id});if(-1!==a&&-1!==i){var o=(0,Ke.be)(t,a,i);d(o)}}}},s().createElement(Ke.gB,{items:t.map(function(e){return e.id}),strategy:Ke._G},s().createElement("ul",{className:"fb-step-list"},t.map(function(e){return s().createElement(He,{key:e.id,step:e,isActive:e.id===n,onSelect:r,onRemove:o})}))))),"fields"===m&&s().createElement("div",{className:"fb-sidebar__fields"},s().createElement(I.Typography,{variant:"subheading"},u("builder.fields.addField")),s().createElement("div",{className:"fb-field-type-grid"},S.filter(function(e){return!e.allowedParents||e.allowedParents.includes("step")}).map(function(e){var t=Ue[e.id];return s().createElement(I.Button,{key:e.id,label:u("fields.types.".concat(e.id)),icon:t?s().createElement(t,{size:"small"}):null,isDisabled:!n,onClick:function(){return c(n,e.id)}})}))))};Je.propTypes={steps:c().array.isRequired,activeStepId:c().string,onSelectStep:c().func.isRequired,onAddStep:c().func.isRequired,onRemoveStep:c().func.isRequired,onReorderSteps:c().func.isRequired,onAddField:c().func.isRequired},Je.defaultProps={activeStepId:null};var We=function(e){var t=e.field;return t?s().createElement("div",{className:"fb-field-preview"},t.label&&s().createElement(I.Typography,{variant:"caption",className:"fb-field-preview__label"},t.label),function(){var e=t.type,n=t.properties,r=void 0===n?{}:n,a=t.label;switch(e){case"inputText":case"inputEmail":case"inputColor":case"inputDate":case"inputDatetimeLocal":case"inputFile":case"inputHidden":return s().createElement("input",{readOnly:!0,type:e.replace("input","").toLowerCase(),disabled:"inputFile"===e,value:r.defaultValue||"",placeholder:r.placeholder||"",className:"fb-field-preview__input"});case"inputCheckbox":return s().createElement("input",{disabled:!0,type:"checkbox",checked:r.defaultChecked||!1,className:"fb-field-preview__checkbox"});case"checkboxGroup":var i=t.fields||[];return s().createElement("div",{className:"fb-field-preview__group"},i.map(function(e){var t;return s().createElement("label",{key:e.id,className:"fb-field-preview__option"},s().createElement("input",{disabled:!0,type:"checkbox",checked:(null===(t=e.properties)||void 0===t?void 0:t.defaultChecked)||!1}),s().createElement("span",null,e.label||e.name))}),0===i.length&&s().createElement("span",{className:"fb-field-preview__placeholder"},"No options configured"));case"radioGroup":var o=t.fields||[];return s().createElement("div",{className:"fb-field-preview__group"},o.map(function(e){var n;return s().createElement("label",{key:e.id,className:"fb-field-preview__option"},s().createElement("input",{disabled:!0,type:"radio",checked:(null===(n=e.properties)||void 0===n?void 0:n.defaultChecked)||!1,name:"preview-".concat(t.id)}),s().createElement("span",null,e.label||e.name))}),0===o.length&&s().createElement("span",{className:"fb-field-preview__placeholder"},"No options configured"));case"select":return s().createElement("select",{disabled:!0,className:"fb-field-preview__select"},(r.options||[]).map(function(e){return s().createElement("option",{key:e.value,value:e.value,selected:e.selected},e.label)}));case"textarea":return s().createElement("textarea",{readOnly:!0,value:r.defaultValue||"",placeholder:r.placeholder||"",rows:r.rows||3,className:"fb-field-preview__textarea"});case"inputButton":return s().createElement("button",{disabled:!0,type:"button",className:"fb-field-preview__button fb-field-preview__button--".concat(r.variant||"primary")},a||"Button");default:return s().createElement("div",{className:"fb-field-preview__unknown"},"Unknown field type: ",e)}}()):null};We.propTypes={field:c().shape({id:c().string.isRequired,label:c().string,type:c().string.isRequired,properties:c().object,fields:c().array}).isRequired};var Qe=function(e){var t=e.field,n=e.isActive,r=e.onSelect,a=e.onRemove,i=(0,j.useTranslation)(v).t,o=(0,Ke.gl)({id:t.id}),l=o.attributes,d=o.listeners,c=o.setNodeRef,u=o.transform,p=o.transition,f={transform:Ge.Ks.Transform.toString(u),transition:p};return s().createElement("li",(0,D.A)({ref:c,style:f,className:"fb-field-row".concat(n?" fb-field-row--active":"")},l,d),s().createElement("div",{className:"fb-field-row__content"},s().createElement("button",{type:"button",className:"fb-field-row__button",onClick:function(){return r(t.id)}},s().createElement(I.Typography,{variant:"body",weight:"bold"},t.label||t.name),s().createElement(I.Typography,{variant:"caption"},t.type)),s().createElement(We,{field:t})),s().createElement(I.Button,{label:i("builder.fields.remove"),onClick:function(){return a(t.id)}}))};Qe.propTypes={field:c().shape({id:c().string.isRequired,label:c().string,name:c().string.isRequired,type:c().string}).isRequired,isActive:c().bool.isRequired,onSelect:c().func.isRequired,onRemove:c().func.isRequired};var Xe=function(e){var t=e.step,n=e.onUpdateStep,r=e.onRemoveField,a=e.onSelectField,i=e.onReorderFields,o=e.activeFieldId,l=(0,Ve.FR)((0,Ve.MS)(Ve.AN,{activationConstraint:{distance:8}})),d=(0,j.useTranslation)(v).t;return t?s().createElement(I.Paper,{className:"fb-step-editor"},s().createElement("div",{className:"fb-step-editor__header"},s().createElement(I.Typography,{variant:"heading"},t.label)),s().createElement("div",{className:"fb-step-editor__form"},s().createElement("label",{className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},d("builder.step.label")),s().createElement(I.Input,{value:t.label,onChange:function(e){return n(t.id,{label:e.target.value})}})),s().createElement("label",{className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},d("builder.step.description")),s().createElement("textarea",{rows:3,className:"fb-textarea",value:t.description,onChange:function(e){return n(t.id,{description:e.target.value})}}))),s().createElement("div",{className:"fb-step-editor__list"},s().createElement(I.Typography,{variant:"subheading"},d("builder.fields.title")),0===t.fields.length&&s().createElement(I.Typography,{variant:"body"},d("builder.fields.empty")),t.fields.length>0&&s().createElement(Ve.Mp,{sensors:l,onDragEnd:function(e){var n=e.active,r=e.over;if(r&&n.id!==r.id){var a=t.fields.findIndex(function(e){return e.id===n.id}),o=t.fields.findIndex(function(e){return e.id===r.id});-1!==a&&-1!==o&&i(t.id,(0,Ke.be)(t.fields,a,o))}}},s().createElement(Ke.gB,{items:t.fields.map(function(e){return e.id}),strategy:Ke._G},s().createElement("ul",{className:"fb-field-list"},t.fields.map(function(e){return s().createElement(Qe,{key:e.id,field:e,isActive:e.id===o,onSelect:a,onRemove:function(e){return r(t.id,e)}})})))))):s().createElement(I.Paper,{className:"fb-step-editor"},s().createElement(I.Typography,{variant:"body"},d("builder.step.empty")))};Xe.propTypes={step:c().shape({id:c().string.isRequired,label:c().string,description:c().string,fields:c().array}),onUpdateStep:c().func.isRequired,onRemoveField:c().func.isRequired,onSelectField:c().func.isRequired,onReorderFields:c().func.isRequired,activeFieldId:c().string},Xe.defaultProps={step:null,activeFieldId:null};var Ye=["className"];function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach(function(t){(0,b.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tt=function(e){var t=e.field,n=e.stepId,r=e.onChangeField,a=e.onAddNestedField,i=(0,j.useTranslation)(v).t,o=I.Textarea||function(e){var t=e.className,n=void 0===t?"":t,r=(0,M.A)(e,Ye);return s().createElement("textarea",(0,D.A)({className:"moonstone-textarea ".concat(n).trim()},r))};if(!t)return s().createElement(I.Paper,{className:"fb-field-editor"},s().createElement(I.Typography,{variant:"body"},i("builder.fields.selectField")));var l=function(e){r(n,t.id,e)},d=function(e,n){l({properties:et(et({},t.properties),{},(0,b.A)({},e,n))})},c=S.find(function(e){return e.id===t.type}),u=(null==c?void 0:c.propertySchema)||[],p=[],f=[],m=[],g=!1;u.forEach(function(e){"boolean"===e.type?(p.push(e),g=!0):g?m.push(e):f.push(e)});var h=c?i(c.labelKey):t.type,y=function(e){var n,r=null===(n=t.properties)||void 0===n?void 0:n[e.name],a=i(e.labelKey),l="".concat(t.id,"-").concat(e.name);switch(e.type){case"boolean":return s().createElement("div",{key:l,className:"fb-field fb-field--inline"},s().createElement(I.Typography,{variant:"subheading"},a),s().createElement(I.Checkbox,{id:"".concat(l,"-checkbox"),checked:Boolean(r),"aria-label":a,onChange:function(t,n,r){return d(e.name,r)}}));case"text":return s().createElement("div",{key:l,className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},a),s().createElement(I.Input,{value:r||"",placeholder:e.placeholderKey?i(e.placeholderKey):void 0,onChange:function(t){return d(e.name,t.target.value)}}));case"multiline":return s().createElement("div",{key:l,className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},a),s().createElement(o,{rows:4,value:r||"",onChange:function(t){return d(e.name,t.target.value)}}));case"number":return s().createElement("div",{key:l,className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},a),s().createElement(I.Input,{type:"number",value:null==r?"":r,onChange:function(t){var n=""===t.target.value?null:Number(t.target.value);d(e.name,Number.isNaN(n)?null:n)}}));case"date":return s().createElement("div",{key:l,className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},a),s().createElement(I.Input,{type:"date",value:r||"",onChange:function(t){return d(e.name,t.target.value||null)}}));case"datetime":return s().createElement("div",{key:l,className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},a),s().createElement(I.Input,{type:"datetime-local",value:r||"",onChange:function(t){return d(e.name,t.target.value||null)}}));case"select":var c,u=(e.options||[]).map(function(e){return{value:e.value,label:i(e.labelKey)}}),p=r||e.defaultValue||(null===(c=u[0])||void 0===c?void 0:c.value)||"";return s().createElement("div",{key:l,className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},a),s().createElement(I.Dropdown,{data:u,value:p,placeholder:i("builder.fields.properties.selectPlaceholder"),onChange:function(t,n){return d(e.name,n.value)}}));case"stringList":return function(e){var n,r=(n=t.properties[e.name],Array.isArray(n)?n:[]),a=e.addLabelKey?i(e.addLabelKey):i("builder.fields.properties.listAdd"),o=e.removeLabelKey?i(e.removeLabelKey):i("builder.fields.properties.listRemove"),l=function(t){return e.itemLabelKey?i(e.itemLabelKey,{index:t}):i("builder.fields.properties.listItem",{index:t})};return s().createElement("div",{key:e.name,className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},i(e.labelKey)),s().createElement("ul",{className:"fb-options"},r.map(function(n,a){var i="".concat(t.id,"-").concat(e.name,"-").concat(a);return s().createElement("li",{key:i,className:"fb-option-row"},s().createElement(I.Input,{value:n,placeholder:l(a+1),onChange:function(t){var n=(0,me.A)(r);n[a]=t.target.value,d(e.name,n)}}),s().createElement(I.Button,{label:o,onClick:function(){var t=r.filter(function(e,t){return t!==a});d(e.name,t)}}))})),s().createElement(I.Button,{label:a,onClick:function(){return d(e.name,[].concat((0,me.A)(r),[""]))}}))}(e);default:return null}};return s().createElement(I.Paper,{className:"fb-field-editor"},s().createElement("div",{className:"fb-field-editor__header"},s().createElement(I.Typography,{variant:"subheading"},i("builder.fields.editorTitle")),s().createElement(I.Typography,{variant:"caption",className:"fb-field-editor__type"},h)),s().createElement("div",{className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},i("builder.fields.label")),s().createElement(I.Input,{value:t.label||"",onChange:function(e){var n=e.target.value;l({label:n,properties:et(et({},t.properties),{},{"jcr:title":n})})}})),s().createElement("div",{className:"fb-field"},s().createElement(I.Typography,{variant:"subheading"},i("builder.fields.name")),s().createElement(I.Input,{value:t.name,onChange:function(e){return l({name:e.target.value})}})),f.map(y),p.length>0&&s().createElement("div",{className:"fb-boolean-group"},p.map(y)),m.map(y),function(){if("checkboxGroup"!==t.type)return null;var e=t.fields||[],o=function(e,t){return r(n,e,t)},l=function(t,n){var r=e.find(function(e){return e.id===t}),a=et(et({},(null==r?void 0:r.properties)||{}),n);o(t,{properties:a})};return s().createElement("div",{className:"fb-field fb-option-section"},s().createElement("div",{className:"fb-option-section__header"},s().createElement(I.Typography,{variant:"subheading"},i("builder.fields.checkboxGroup.optionsTitle")),s().createElement(I.Button,{color:"accent",label:i("builder.fields.checkboxGroup.addOption"),onClick:function(){var n=e.length+1,r=i("builder.fields.checkboxGroup.optionLabel",{index:n});a({parentPath:t.path,typeId:"inputCheckbox",label:r,properties:{value:"option-".concat(n),defaultChecked:!1}})}})),0===e.length&&s().createElement(I.Typography,{variant:"body"},i("builder.fields.checkboxGroup.empty")),e.length>0&&s().createElement("div",{className:"fb-option-card-list"},e.map(function(e,t){var n,r;return s().createElement("div",{key:e.id,className:"fb-option-card"},s().createElement("div",{className:"fb-option-card__header"},s().createElement(I.Typography,{variant:"body"},i("builder.fields.checkboxGroup.optionLabel",{index:t+1}))),s().createElement("div",{className:"fb-option-card__grid"},s().createElement("div",{className:"fb-field"},s().createElement(I.Typography,{variant:"caption"},i("builder.fields.select.optionLabelLabel")),s().createElement(I.Input,{value:e.label||"",onChange:function(t){return o(e.id,{label:t.target.value})}})),s().createElement("div",{className:"fb-field"},s().createElement(I.Typography,{variant:"caption"},i("builder.fields.select.optionValueLabel")),s().createElement(I.Input,{value:(null===(n=e.properties)||void 0===n?void 0:n.value)||"",onChange:function(t){return l(e.id,{value:t.target.value})}})),s().createElement("div",{className:"fb-field fb-field--inline"},s().createElement(I.Typography,{variant:"caption"},i("builder.fields.properties.defaultChecked")),s().createElement(I.Checkbox,{checked:Boolean(null===(r=e.properties)||void 0===r?void 0:r.defaultChecked),onChange:function(t,n,r){return l(e.id,{defaultChecked:r})}}))))})))}(),function(){if("radioGroup"!==t.type)return null;var e=t.fields||[],o=function(e,t){return r(n,e,t)},l=function(t,n){var r=e.find(function(e){return e.id===t}),a=et(et({},(null==r?void 0:r.properties)||{}),n);o(t,{properties:a})};return s().createElement("div",{className:"fb-field fb-option-section"},s().createElement("div",{className:"fb-option-section__header"},s().createElement(I.Typography,{variant:"subheading"},i("builder.fields.radioGroup.optionsTitle")),s().createElement(I.Button,{color:"accent",label:i("builder.fields.radioGroup.addOption"),onClick:function(){var n=e.length+1,r=i("builder.fields.radioGroup.optionLabel",{index:n});a({parentPath:t.path,typeId:"inputRadio",label:r,properties:{value:"option-".concat(n),defaultChecked:!1}})}})),0===e.length&&s().createElement(I.Typography,{variant:"body"},i("builder.fields.radioGroup.empty")),e.length>0&&s().createElement("div",{className:"fb-option-card-list"},e.map(function(t,n){var r,a;return s().createElement("div",{key:t.id,className:"fb-option-card"},s().createElement("div",{className:"fb-option-card__header"},s().createElement(I.Typography,{variant:"body"},i("builder.fields.radioGroup.optionLabel",{index:n+1}))),s().createElement("div",{className:"fb-option-card__grid"},s().createElement("div",{className:"fb-field"},s().createElement(I.Typography,{variant:"caption"},i("builder.fields.select.optionLabelLabel")),s().createElement(I.Input,{value:t.label||"",onChange:function(e){return o(t.id,{label:e.target.value})}})),s().createElement("div",{className:"fb-field"},s().createElement(I.Typography,{variant:"caption"},i("builder.fields.select.optionValueLabel")),s().createElement(I.Input,{value:(null===(r=t.properties)||void 0===r?void 0:r.value)||"",onChange:function(e){return l(t.id,{value:e.target.value})}})),s().createElement("div",{className:"fb-field fb-field--inline"},s().createElement(I.Typography,{variant:"caption"},i("builder.fields.properties.defaultChecked")),s().createElement(I.Checkbox,{checked:Boolean(null===(a=t.properties)||void 0===a?void 0:a.defaultChecked),onChange:function(n,r,a){return function(t,n){e.forEach(function(e){var r,a=e.id===t,i=Boolean(null===(r=e.properties)||void 0===r?void 0:r.defaultChecked);a?i!==n&&l(e.id,{defaultChecked:n}):n&&i&&l(e.id,{defaultChecked:!1})})}(t.id,a)}}))))})))}(),function(){var e,n;if("select"!==t.type)return null;var r=Array.isArray(null===(e=t.properties)||void 0===e?void 0:e.options)?t.properties.options:[],a=Boolean(null===(n=t.properties)||void 0===n?void 0:n.multiple),o=function(e){return d("options",e)},l=function(e,t){o(r.map(function(n,r){return r===e?et(et({},n),t):n}))};return s().createElement("div",{className:"fb-field fb-option-section"},s().createElement("div",{className:"fb-option-section__header"},s().createElement(I.Typography,{variant:"subheading"},i("builder.fields.select.optionsTitle")),s().createElement(I.Button,{color:"accent",label:i("builder.fields.select.addOption"),onClick:function(){var e=r.length+1;o([].concat((0,me.A)(r),[{label:i("builder.fields.select.optionLabel",{index:e}),value:"option-".concat(Date.now()),selected:!1}]))}})),0===r.length&&s().createElement(I.Typography,{variant:"body"},i("builder.fields.select.empty")),r.length>0&&s().createElement("div",{className:"fb-option-card-list"},r.map(function(e,t){return s().createElement("div",{key:"select-option-".concat(e.value||t),className:"fb-option-card"},s().createElement("div",{className:"fb-option-card__header"},s().createElement(I.Typography,{variant:"body"},i("builder.fields.select.optionLabel",{index:t+1})),s().createElement(I.Button,{label:i("builder.fields.properties.listRemove"),onClick:function(){return e=t,void o(r.filter(function(t,n){return n!==e}));var e}})),s().createElement("div",{className:"fb-option-card__grid"},s().createElement("div",{className:"fb-field"},s().createElement(I.Typography,{variant:"caption"},i("builder.fields.select.optionLabelLabel")),s().createElement(I.Input,{value:e.label||"",onChange:function(e){return l(t,{label:e.target.value})}})),s().createElement("div",{className:"fb-field"},s().createElement(I.Typography,{variant:"caption"},i("builder.fields.select.optionValueLabel")),s().createElement(I.Input,{value:e.value||"",onChange:function(e){return l(t,{value:e.target.value})}})),s().createElement("div",{className:"fb-field fb-field--inline"},s().createElement(I.Typography,{variant:"caption"},i("builder.fields.select.optionSelected")),s().createElement(I.Checkbox,{checked:Boolean(e.selected),onChange:function(){return e=t,void o(r.map(function(t,n){return n===e?et(et({},t),{},{selected:!t.selected}):a||n===e?t:et(et({},t),{},{selected:!1})}));var e}}))))})))}())};tt.propTypes={field:c().shape({id:c().string.isRequired,label:c().string,name:c().string,path:c().string,type:c().string,properties:c().object,fields:c().array}),stepId:c().string,onChangeField:c().func.isRequired,onAddNestedField:c().func},tt.defaultProps={field:null,stepId:null,onAddNestedField:function(){}};var nt=n(875),rt=function(e,t){var n=(e||[]).find(function(e){return e.name===t});if(n)return n.values&&n.values.length?n.values:n.value},at=function(e){if("string"!=typeof e)return null;var t=e.trim();if(!t)return null;t.endsWith(".")&&(t=t.slice(0,-1));try{return JSON.parse(t)}catch(e){return null}},it=function(e){var t,n=null==e||null===(t=e.primaryNodeType)||void 0===t?void 0:t.name,r=function(e){return C(e)}(n),a={},i=(e.children||{}).nodes||[],o=function(e){return"boolean"==typeof e?e:"string"==typeof e?"true"===e.toLowerCase():Boolean(e)};(e.properties||[]).forEach(function(e){if("options"!==e.name){if(e.values&&e.values.length)return"BOOLEAN"===e.type?void(a[e.name]=e.values.map(o)):void(a[e.name]=e.values);"BOOLEAN"!==e.type?a[e.name]=e.value:a[e.name]=o(e.value)}else if(Array.isArray(e.values)&&e.values.length)a[e.name]=e.values.map(function(e){return"string"==typeof e?at(e):e}).filter(Boolean);else if("string"==typeof e.value&&e.value.trim().length){var t=at(e.value);a[e.name]=t?[t]:[]}else e.value&&"object"===(0,nt.A)(e.value)?a[e.name]=[e.value]:a[e.name]=[]});var l=a["jcr:title"]||e.displayName||e.name||"";return l&&(a["jcr:title"]=l),{id:e.uuid,name:e.name,initialName:e.name,path:e.path,label:l,type:r?r.id:n,nodeType:n,properties:a,fields:i.map(it)}},ot=function(e){var t=rt(e.properties||[],"jcr:description")||"",n=((e.children||{}).nodes||[]).map(it);return{id:e.uuid,name:e.name,initialName:e.name,path:e.path,label:e.displayName||e.name,description:t,fields:n}},lt=function(e){var t;return"fmdb:fieldset"===(null==e||null===(t=e.primaryNodeType)||void 0===t?void 0:t.name)},st=function(e,t){var n,r,i,o=[{name:"jcr:title",value:e.label||e.name||"",language:t,type:"STRING"}],l=(n=e.nodeType||e.type,r=A(n)||C(n),i=new Set,r?((r.propertySchema||[]).forEach(function(e){e&&e.name&&i.add(e.name)}),i):i);return l.add("jcr:title"),l.add("options"),Object.entries(e.properties||{}).forEach(function(e){var n=(0,a.A)(e,2),r=n[0],i=n[1];if("jcr:title"!==r&&l.has(r)&&null!=i)if("options"===r&&Array.isArray(i)){var s=i.map(function(e){if(!e)return null;if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(e){return null}}).filter(Boolean);if(!s.length)return;o.push({name:r,values:s,language:t,type:"STRING"})}else if(Array.isArray(i)){if(0===i.length)return;o.push({name:r,values:i,language:t,type:"STRING"})}else if("boolean"==typeof i)o.push({name:r,value:i,type:"BOOLEAN"});else if("string"==typeof i){if(""===i.trim())return;o.push({name:r,value:i,language:t,type:"STRING"})}else o.push({name:r,value:i.toString(),language:t,type:"STRING"})}),o},dt=function(e,t){var n=[{name:"jcr:title",value:e.label,language:t,type:"STRING"}];return void 0!==e.description&&n.push({name:"jcr:description",value:e.description||"",language:t,type:"STRING"}),n};function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach(function(t){(0,b.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ft=function(){return new Set},mt=function(e,t,n){if(null==e)return e;var r=!1,a=e.fields;if(Array.isArray(e.fields)&&e.fields.length){var i=e.fields.map(function(e){var a=mt(e,t,n);return a!==e&&(r=!0),a});r&&(a=i)}if(e.id===t){var o=void 0===n.fields?a:n.fields;return pt(pt(pt({},e),n),{},{fields:o})}return r?pt(pt({},e),{},{fields:a}):e},bt=function(e){var t=O(),n=t.workspace,r=t.language,i=t.siteKey,o=(0,l.useState)(r),s=(0,a.A)(o,2),d=s[0],c=s[1],u=(0,l.useState)(null),f=(0,a.A)(u,2),m=f[0],b=f[1],g=(0,l.useState)(!1),h=(0,a.A)(g,2),v=h[0],y=h[1],x=(0,l.useState)(function(){return new Set}),w=(0,a.A)(x,2),_=w[0],E=w[1],k=(0,l.useState)(function(){return new Set}),N=(0,a.A)(k,2),T=N[0],S=N[1],C=(0,l.useState)(!1),A=(0,a.A)(C,2),P=A[0],L=A[1],R=null==e||""===e,I=(0,p.useQuery)(_e,{variables:{workspace:n,language:d,uuid:e},fetchPolicy:"no-cache",skip:R}),j=I.data,D=I.loading,M=I.error,q=I.refetch,z=(0,p.useQuery)(Ee,{variables:{workspace:n,sitePath:"/sites/".concat(i)}}).data,V=(0,p.useMutation)(Ne),K=(0,a.A)(V,1)[0],G=(0,p.useMutation)(Pe),U=(0,a.A)(G,1)[0],H=(0,p.useMutation)(Le),J=(0,a.A)(H,1)[0],W=(0,p.useMutation)(Oe),Q=(0,a.A)(W,1)[0],X=(0,p.useMutation)(Be),Y=(0,a.A)(X,1)[0],Z=(0,p.useMutation)(Fe),ee=(0,a.A)(Z,1)[0],te=(0,p.useMutation)(Re),ne=(0,a.A)(te,1)[0],re=(0,p.useMutation)($e),ae=(0,a.A)(re,1)[0],ie=(0,p.useMutation)(Ie),oe=(0,a.A)(ie,1)[0];(0,l.useEffect)(function(){var e;if(console.log("GET_FORM_DETAILS raw response",{data:j,error:M,json:j?JSON.stringify(j):null}),!M&&null!=j&&null!==(e=j.jcr)&&void 0!==e&&e.nodeById){console.log("Loaded form from GraphQL",j.jcr.nodeById);var t=function(e){var t;if(!e)return null;var n=rt(e.properties||[],"intro")||"",r=rt(e.properties||[],"jcr:title")||e.displayName||e.name,a=function(e){return e?e.reduce(function(e,t){return t.values&&t.values.length?e[t.name]=t.values:e[t.name]=t.value,e},{}):{}}(e.properties||[]),i=((e.children||{}).nodes||[]).filter(lt),o=(e.fieldsetsContainers||{}).nodes||[],l=o.flatMap(function(e){return((e.children||{}).nodes||[]).filter(lt)}),s=[].concat((0,me.A)(i),(0,me.A)(l)),d=(null===(t=o[0])||void 0===t?void 0:t.path)||(i.length>0?e.path:null),c=s.map(ot);return{id:e.uuid,name:e.name,path:e.path,label:r,intro:n,properties:a,steps:c,fieldsetsPath:d}}(j.jcr.nodeById);t.label||(t.label=j.jcr.nodeById.displayName||j.jcr.nodeById.name||""),console.log("Normalized form",t),b(t),E(ft()),S(ft()),L(!1)}},[j,M]);var le=(0,l.useMemo)(function(){var e,t=null==z||null===(e=z.jcr)||void 0===e||null===(e=e.nodeByPath)||void 0===e||null===(e=e.languages)||void 0===e?void 0:e.values;return t&&t.length?t:[r]},[r,z]),se=(0,l.useCallback)(function(e){b(function(t){return t?pt(pt({},t),e):t}),L(!0)},[]),de=(0,l.useCallback)(function(e){E(function(t){var n=new Set(t);return n.add(e),n})},[]),ce=(0,l.useCallback)(function(e){S(function(t){var n=new Set(t);return n.add(e),n})},[]),ue=(0,l.useCallback)((0,F.A)($().mark(function e(){var t,r,a;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&m.path){e.next=1;break}return e.abrupt("return");case 1:return t=m.fieldsetsPath||m.path,r="Step ".concat(m.steps.length+1),a=je(r)||"step-".concat(Date.now()),e.next=2,U({variables:{workspace:n,parentPath:t,name:a,language:d,title:r,description:""}});case 2:return e.next=3,q();case 3:case"end":return e.stop()}},e)})),[d,U,m,q,n]),pe=(0,l.useCallback)(function(e,t){b(function(n){if(!n)return n;var r=n.steps.map(function(n){return n.id===e?pt(pt({},n),t):n});return pt(pt({},n),{},{steps:r})}),de(e)},[de]),fe=(0,l.useCallback)(function(){var e=(0,F.A)($().mark(function e(t){var r,a;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null==m||null===(r=m.steps)||void 0===r?void 0:r.find(function(e){return e.id===t})){e.next=1;break}return e.abrupt("return");case 1:return e.next=2,Y({variables:{workspace:n,pathOrId:a.path}});case 2:return e.next=3,q();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[Y,m,q,n]),be=(0,l.useCallback)(function(){var e=(0,F.A)($().mark(function e(t){var r;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=1;break}return e.abrupt("return");case 1:return b(function(e){return pt(pt({},e),{},{steps:t})}),r=m.fieldsetsPath||m.path,e.next=2,Q({variables:{workspace:n,pathOrId:r,names:t.map(function(e){return e.name})}});case 2:return e.next=3,q();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[m,Q,q,n]),ge=(0,l.useCallback)(function(){var e=(0,F.A)($().mark(function e(t,r){var a,i,o,l;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null==m||null===(a=m.steps)||void 0===a?void 0:a.find(function(e){return e.id===t})){e.next=1;break}return e.abrupt("return");case 1:return o=B(r,"Field ".concat(i.fields.length+1)),l=st(o,d),e.next=2,ee({variables:{workspace:n,parentPath:i.path,name:je(o.label)||"field-".concat(Date.now()),primaryNodeType:o.nodeType,properties:l}});case 2:return e.next=3,q();case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),[d,ee,m,q,n]),he=(0,l.useCallback)(function(){var e=(0,F.A)($().mark(function e(t){var r,a,i,o,l,s,c;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.parentPath,a=t.typeId,i=t.label,o=t.properties,r){e.next=1;break}return e.abrupt("return");case 1:return l=B(a,i||"Field ".concat(Date.now())),s=o?pt(pt({},l),{},{properties:pt(pt({},l.properties),o)}):l,c=st(s,d),e.next=2,ee({variables:{workspace:n,parentPath:r,name:je(s.label)||"field-".concat(Date.now()),primaryNodeType:s.nodeType,properties:c}});case 2:return e.next=3,q();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[d,ee,q,n]),ve=(0,l.useCallback)(function(e,t,n){b(function(r){if(!r)return r;var a=r.steps.map(function(r){if(r.id!==e)return r;var a=r.fields.map(function(e){return mt(e,t,n)});return pt(pt({},r),{},{fields:a})});return pt(pt({},r),{},{steps:a})}),ce(t)},[ce]),ye=(0,l.useCallback)(function(){var e=(0,F.A)($().mark(function e(t,r){var a,i,o,l;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null==m||null===(a=m.steps)||void 0===a?void 0:a.find(function(e){return e.id===t}),l=null==o||null===(i=o.fields)||void 0===i?void 0:i.find(function(e){return e.id===r})){e.next=1;break}return e.abrupt("return");case 1:return e.next=2,Y({variables:{workspace:n,pathOrId:l.path}});case 2:return e.next=3,q();case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),[Y,m,q,n]),xe=(0,l.useCallback)(function(){var e=(0,F.A)($().mark(function e(t,r){var a,i;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null==m||null===(a=m.steps)||void 0===a?void 0:a.find(function(e){return e.id===t})){e.next=1;break}return e.abrupt("return");case 1:return b(function(e){if(!e)return e;var n=e.steps.map(function(e){return e.id===t?pt(pt({},e),{},{fields:r}):e});return pt(pt({},e),{},{steps:n})}),e.next=2,ae({variables:{workspace:n,pathOrId:i.path,names:r.map(function(e){return e.name})}});case 2:return e.next=3,q();case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),[m,ae,q,n]),we=(0,l.useCallback)((0,F.A)($().mark(function e(){var t;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=1;break}return e.abrupt("return");case 1:if(y(!0),e.prev=2,t=[],m.fieldsetsPath||m.path){e.next=3;break}return console.warn("Missing parent path for steps, cannot apply mutations safely"),y(!1),e.abrupt("return");case 3:return P&&t.push(K({variables:{workspace:n,pathOrId:m.path,language:d,title:m.label,intro:m.intro||""}})),_.forEach(function(e){var r=m.steps.find(function(t){return t.id===e});r&&(t.push(J({variables:{workspace:n,pathOrId:r.path,properties:dt(r,d)}})),r.name!==r.initialName&&t.push(oe({variables:{workspace:n,pathOrId:r.path,name:je(r.name)||r.name}})))}),T.forEach(function(e){var r=gt(m,e),a=r.step,i=r.field;i&&a&&(t.push(ne({variables:{workspace:n,pathOrId:i.path,properties:st(i,d)}})),i.name!==i.initialName&&t.push(oe({variables:{workspace:n,pathOrId:i.path,name:je(i.name)||i.name}})))}),e.next=4,Promise.all(t);case 4:return e.next=5,q();case 5:S(ft()),E(ft()),L(!1);case 6:return e.prev=6,y(!1),e.finish(6);case 7:case"end":return e.stop()}},e,null,[[2,,6,7]])})),[d,T,_,P,m,q,oe,ne,K,J,n]);return{form:m,loading:D,saveChanges:we,saving:v,addStep:ue,updateStepState:pe,removeStep:fe,reorderSteps:be,addField:ge,addNestedField:he,updateFieldState:ve,removeField:ye,reorderFields:xe,activeLanguage:d,setActiveLanguage:c,siteLanguages:le,updateFormState:se}},gt=function(e,t){if(!e)return{step:null,field:null};var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ct(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}(e.steps);try{for(r.s();!(n=r.n()).done;)for(var a=n.value,i=(0,me.A)(a.fields);i.length>0;){var o=i.shift();if(o.id===t)return{step:a,field:o};o.fields&&o.fields.length&&i.push.apply(i,(0,me.A)(o.fields))}}catch(e){r.e(e)}finally{r.f()}return{step:null,field:null}};function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach(function(t){(0,b.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(3484);var yt=function(e){var t=e.match,n=(0,j.useTranslation)(v).t,r=t.params.formId,i=bt(r),o=i.form,d=i.loading,c=(0,l.useState)({}),u=(0,a.A)(c,2),p=u[0],f=u[1],m=(0,l.useState)(0),g=(0,a.A)(m,2),h=g[0],y=g[1],x=function(e,t){f(function(n){return vt(vt({},n),{},(0,b.A)({},e,t))})};return s().createElement(I.LayoutContent,{content:function(){var e,t,r,a,i,l,c,u;if(d||!o)return s().createElement("div",{className:"fb-preview__loading"},s().createElement(I.Typography,{variant:"body"},n("states.loading")));var m=(null===(e=o.properties)||void 0===e||null===(e=e.css)||void 0===e?void 0:e.value)||"",b=m?s().createElement("style",{dangerouslySetInnerHTML:{__html:m}}):null,g=o.steps,v=(null===(t=o.properties)||void 0===t?void 0:t.submitBtnLabel)||"Submit",w=(null===(r=o.properties)||void 0===r?void 0:r.resetBtnLabel)||"Reset",_=Boolean(null===(a=o.properties)||void 0===a?void 0:a.showResetBtn),E=(null===(i=o.properties)||void 0===i?void 0:i.newFormBtnLabel)||"New Form",k=Boolean(null===(l=o.properties)||void 0===l?void 0:l.showNewFormBtn),N=(null===(c=o.properties)||void 0===c?void 0:c.tryAgainBtnLabel)||"Try Again",T=Boolean(null===(u=o.properties)||void 0===u?void 0:u.showTryAgainBtn);return s().createElement("div",{className:"fb-preview"},b,s().createElement("div",{className:"fb-preview__tabs"},g.map(function(e,t){return s().createElement(I.Button,{key:e.id,variant:h===t?"primary":"ghost",size:"big",label:e.label,onClick:function(){return y(t)}})})),s().createElement("div",{className:"fb-preview__step-content"},g[h]&&s().createElement("div",{className:"fb-preview__step"},g[h].description&&s().createElement(I.Typography,{variant:"body",className:"fb-preview__step-description"},g[h].description),s().createElement("div",{className:"fb-preview__fields"},g[h].fields.map(function(e){return s().createElement("div",{key:e.id,className:"fb-preview__field"},function(e){if(!e)return null;var t=e.type,n=e.properties,r=void 0===n?{}:n,a=e.label,i=e.id,o=p[i]||r.defaultValue||"";switch(t){case"inputText":case"inputEmail":case"inputColor":case"inputDate":case"inputDatetimeLocal":return s().createElement("label",{className:"fb-field-preview__label"},a,s().createElement("input",{type:t.replace("input","").toLowerCase(),value:o,placeholder:r.placeholder||"",className:"fb-field-preview__input",onChange:function(e){return x(i,e.target.value)}}));case"inputFile":return s().createElement("label",{className:"fb-field-preview__label"},a,s().createElement("input",{type:"file",className:"fb-field-preview__input",onChange:function(e){return x(i,e.target.files[0])}}));case"inputCheckbox":return s().createElement("input",{type:"checkbox",checked:p[i]||r.defaultChecked||!1,className:"fb-field-preview__checkbox",onChange:function(e){return x(i,e.target.checked)}});case"checkboxGroup":var l=e.fields||[];return s().createElement("div",{className:"fb-field-preview__group"},s().createElement("div",{className:"fb-field-preview__label"},a),l.map(function(e){var t;return s().createElement("label",{key:e.id,className:"fb-field-preview__option"},s().createElement("input",{type:"checkbox",checked:p[e.id]||(null===(t=e.properties)||void 0===t?void 0:t.defaultChecked)||!1,onChange:function(t){return x(e.id,t.target.checked)}}),s().createElement("span",null,e.label||e.name))}),0===l.length&&s().createElement("span",{className:"fb-field-preview__placeholder"},"No options configured"));case"radioGroup":var d=e.fields||[];return s().createElement("div",{className:"fb-field-preview__group"},s().createElement("div",{className:"fb-field-preview__label"},a),d.map(function(e){var t;return s().createElement("label",{key:e.id,className:"fb-field-preview__option"},s().createElement("input",{type:"radio",checked:p[i]===e.id||(null===(t=e.properties)||void 0===t?void 0:t.defaultChecked),name:"preview-".concat(i),onChange:function(){return x(i,e.id)}}),s().createElement("span",null,e.label||e.name))}),0===d.length&&s().createElement("span",{className:"fb-field-preview__placeholder"},"No options configured"));case"select":return s().createElement("label",{className:"fb-field-preview__label"},a,s().createElement("select",{value:o,className:"fb-field-preview__select",onChange:function(e){return x(i,e.target.value)}},(r.options||[]).map(function(e){return s().createElement("option",{key:e.value,value:e.value},e.label)})));case"textarea":return s().createElement("label",{className:"fb-field-preview__label"},a,s().createElement("textarea",{value:o,placeholder:r.placeholder||"",rows:r.rows||3,className:"fb-field-preview__textarea",onChange:function(e){return x(i,e.target.value)}}));case"inputButton":return s().createElement("button",{type:"button",className:"fb-field-preview__button fb-field-preview__button--".concat(r.variant||"primary")},a||"Button");default:return s().createElement("div",{className:"fb-field-preview__unknown"},"Unknown field type: ",t)}}(e))})))),s().createElement("div",{className:"fb-preview__buttons"},s().createElement("button",{type:"button",className:"fb-field-preview__button fb-field-preview__button--primary",onClick:function(){alert("Form submitted! Check console for data."),console.log("Form data:",p)}},v),_&&s().createElement("button",{type:"button",className:"fb-field-preview__button fb-field-preview__button--secondary",onClick:function(){f({})}},w),k&&s().createElement("button",{type:"button",className:"fb-field-preview__button fb-field-preview__button--secondary",onClick:function(){alert("New form would be started.")}},E),T&&s().createElement("button",{type:"button",className:"fb-field-preview__button fb-field-preview__button--secondary",onClick:function(){alert("Try again would reset the form."),f({})}},N)))}()})};yt.propTypes={match:c().shape({params:c().shape({formId:c().string}).isRequired,url:c().string}).isRequired},n(9727);var xt=function(e){var t,n,r=e.match,i=(0,j.useTranslation)(v).t,o=(0,u.useHistory)(),d=(0,u.useLocation)(),c=r.params.formId,p=null!=r&&r.url?r.url.replace(/\/[^/]+$/,""):"/form-builder",f=bt(c),m=f.form,b=f.loading,g=f.addStep,h=f.updateStepState,y=f.removeStep,x=f.reorderSteps,w=f.addField,_=f.addNestedField,E=f.updateFieldState,k=f.removeField,N=f.reorderFields,T=f.saveChanges,S=f.saving,C="preview"===new URLSearchParams(d.search).get("view"),A=(0,l.useState)(null),B=(0,a.A)(A,2),P=B[0],L=B[1],O=(0,l.useState)(null),R=(0,a.A)(O,2),D=R[0],M=R[1];(0,l.useEffect)(function(){m&&0!==m.steps.length?P&&m.steps.some(function(e){return e.id===P})||L(m.steps[0].id):L(null)},[m,P]);var q=(0,l.useMemo)(function(){var e;return null==m||null===(e=m.steps)||void 0===e?void 0:e.find(function(e){return e.id===P})},[m,P]);(0,l.useEffect)(function(){q?D&&q.fields.find(function(e){return e.id===D})||(q.fields.length>0?M(q.fields[0].id):M(null)):M(null)},[D,q]);var z=(null==q||null===(t=q.fields)||void 0===t?void 0:t.find(function(e){return e.id===D}))||null,V=function(){var e=(0,F.A)($().mark(function e(t){var n;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.steps.find(function(e){return e.id===t})){e.next=1;break}return e.abrupt("return");case 1:if(window.confirm(i("builder.sidebar.removeConfirm",{title:n.label}))){e.next=2;break}return e.abrupt("return");case 2:return e.next=3,y(t);case 3:M(null);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,F.A)($().mark(function e(t,n){var r,a;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.steps.find(function(e){return e.id===t}),a=null==r?void 0:r.fields.find(function(e){return e.id===n})){e.next=1;break}return e.abrupt("return");case 1:if(window.confirm(i("builder.fields.removeConfirm",{title:a.label||a.name}))){e.next=2;break}return e.abrupt("return");case 2:return e.next=3,k(t,n);case 3:M(null);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),G=(null===(n=d.state)||void 0===n?void 0:n.formTitle)||"",U=(null==m?void 0:m.label)||(null==m?void 0:m.name)||G,H=i("accordionTitle"),J=U?"".concat(H," - ").concat(U):H;(0,l.useEffect)(function(){console.log("FormBuilder route context",{match:r,location:d,formId:c})},[d,r,c]),(0,l.useEffect)(function(){console.log("FormBuilder header data",{loading:b,formLabel:null==m?void 0:m.label,formName:null==m?void 0:m.name,initialTitle:G,currentLabel:U,headerTitle:J})},[b,m,G,U,J]);var W=s().createElement("button",{type:"button",className:"fb-back-button",onClick:function(){return o.push(p)}},s().createElement(qe.Q,{size:"big"})),Q=s().createElement(I.Button,{key:"settings",variant:"ghost",size:"big",label:i("actions.settings"),icon:s().createElement(qe.c1,{size:"small"}),onClick:function(){return o.push("".concat(r.url,"/settings"))}}),X=s().createElement(I.Button,{key:"preview",variant:"ghost",size:"big",label:i("actions.preview"),icon:s().createElement(qe.cx,{size:"small"}),onClick:function(){return o.push("".concat(r.url,"?view=preview"))}}),Y=s().createElement(I.Button,{key:"edit",variant:"ghost",size:"big",label:"Edit Form",icon:s().createElement(qe.ai,{size:"small"}),onClick:function(){return o.push(r.url)}}),Z=s().createElement(I.Button,{key:"save",color:"accent",size:"big",label:i(S?"actions.saving":"actions.save"),isDisabled:S||!m,onClick:T});return s().createElement(I.LayoutContent,{header:s().createElement(I.Header,{title:J,subtitle:i("list.subtitle"),backButton:W,mainActions:C?[Q,Y,Z]:[Q,X,Z]}),content:b||!m?s().createElement("div",{className:"fb-loading"},s().createElement(I.Loader,{size:"big"}),s().createElement(I.Typography,{variant:"body"},i("states.loading"))):C?s().createElement(yt,{match:r,location:d}):s().createElement("div",{className:"fb-builder__wrapper"},s().createElement("div",{className:"fb-builder__content"},s().createElement(Je,{steps:m.steps,activeStepId:P,onSelectStep:L,onAddStep:g,onRemoveStep:V,onReorderSteps:function(e){return x(e)},onAddField:w}),s().createElement("div",{className:"fb-builder__main"},s().createElement(Xe,{step:q,activeFieldId:D,onUpdateStep:function(e,t){return h(e,t)},onRemoveField:K,onSelectField:M,onReorderFields:function(e,t){return N(e,t)}})),s().createElement("div",{className:"fb-builder__side"},s().createElement(tt,{field:z,stepId:null==q?void 0:q.id,onChangeField:E,onAddNestedField:_}))))})};xt.propTypes={match:c().shape({params:c().shape({formId:c().string}).isRequired,path:c().string,url:c().string}).isRequired},c().string.isRequired,c().string.isRequired,c().func.isRequired;var wt=n(4535),_t=n(7451),Et=n(7256),kt=n(3579),Nt=n(2342),Tt=n(8946),St=n(5744);function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach(function(t){(0,b.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n(5509);var Pt=function(){var e=(0,St.useLexicalComposerContext)(),t=(0,a.A)(e,1)[0],n=function(e){t.dispatchCommand(kt.FORMAT_TEXT_COMMAND,e)};return s().createElement("div",{className:"lexical-toolbar"},s().createElement("button",{type:"button",className:"lexical-toolbar-button",title:"Bold",onClick:function(){return n("bold")}},s().createElement("strong",null,"B")),s().createElement("button",{type:"button",className:"lexical-toolbar-button",title:"Italic",onClick:function(){return n("italic")}},s().createElement("em",null,"I")),s().createElement("button",{type:"button",className:"lexical-toolbar-button",title:"Underline",onClick:function(){return n("underline")}},s().createElement("u",null,"U")))},Lt=function(e){var t=e.value,n=(0,St.useLexicalComposerContext)(),r=(0,a.A)(n,1)[0],i=(0,l.useRef)(!1);return(0,l.useEffect)(function(){if(r&&void 0!==t&&!i.current){console.log("ContentSetterPlugin: editor ready, value:",t,"type:",(0,nt.A)(t));var e=setTimeout(function(){window._isSettingLexicalContent=!0,r.update(function(){if(console.log("ContentSetterPlugin: setting content:",t),(0,kt.$getRoot)().clear(),t&&t.trim()){console.log("ContentSetterPlugin: parsing HTML content:",t);try{var e=(new DOMParser).parseFromString(t,"text/html"),n=(0,Tt.$generateNodesFromDOM)(r,e);console.log("ContentSetterPlugin: generated nodes:",n.length);var a,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}(n);try{for(o.s();!(a=o.n()).done;){var l=a.value;(0,kt.$getRoot)().append(l)}}catch(e){o.e(e)}finally{o.f()}}catch(e){console.error("ContentSetterPlugin: error parsing HTML:",e);var s=(0,kt.$createParagraphNode)(),d=(0,kt.$createTextNode)(t);(0,kt.$getRoot)().append(s),s.append(d)}}else console.log("ContentSetterPlugin: no value to set or empty value:",t);console.log("ContentSetterPlugin: content set successfully"),i.current=!0,setTimeout(function(){window._isSettingLexicalContent=!1},50)})},100);return function(){return clearTimeout(e)}}},[r,t]),null};Lt.propTypes={value:c().string};var Ot=function(e){var t=e.onChange,n=(0,St.useLexicalComposerContext)(),r=(0,a.A)(n,1)[0],i=(0,l.useRef)(null);return(0,l.useEffect)(function(){return r.registerUpdateListener(function(e){var n=e.editorState;window._isSettingLexicalContent||n.read(function(){var e=(0,Tt.$generateHtmlFromNodes)(r);e!==i.current&&(i.current=e,t(e))})})},[r,t]),null};Ot.propTypes={onChange:c().func.isRequired};var Ft=function(e){var t=e.value,n=e.onChange,r=e.placeholder,a=e.height,i=void 0===a?120:a;console.log("LexicalEditor: rendering with value:",t,"type:",(0,nt.A)(t));var o={namespace:"FormidableEditor",onError:function(e){return console.error("Lexical error:",e)}};return s().createElement("div",{className:"lexical-editor",style:{minHeight:i}},s().createElement(wt.LexicalComposer,{initialConfig:o},s().createElement(Pt,null),s().createElement(_t.RichTextPlugin,{contentEditable:s().createElement(Et.ContentEditable,{className:"lexical-content-editable",style:{minHeight:i-60}}),placeholder:s().createElement("div",{className:"lexical-placeholder"},r)}),s().createElement(Nt.HistoryPlugin,null),s().createElement(Ot,{onChange:n}),s().createElement(Lt,{value:t})))};Ft.propTypes={value:c().string,onChange:c().func.isRequired,placeholder:c().string,height:c().number};var Rt=function(e){var t,n=e.match,r=(0,j.useTranslation)(v).t,i=(0,u.useHistory)(),o=(0,u.useLocation)(),d=O().workspace,c=n.params.formId,f=null!=n&&n.url?n.url.replace(/\/[^/]+$/,""):"/form-builder",m=(0,p.useQuery)(_e,{variables:{workspace:d,language:"en",uuid:c},fetchPolicy:"no-cache",skip:!c}),g=m.data,h=m.loading,y=(0,l.useState)({title:"",intro:"",submissionMessage:"",errorMessage:"",submitBtnLabel:"",resetBtnLabel:"",showResetBtn:!1,newFormBtnLabel:"",showNewFormBtn:!1,tryAgainBtnLabel:"",showTryAgainBtn:!1,customTarget:"",css:""}),x=(0,a.A)(y,2),w=x[0],_=x[1],E=(0,l.useState)("basic"),k=(0,a.A)(E,2),N=k[0],T=k[1],S=(0,p.useMutation)(Ne),C=(0,a.A)(S,1)[0],A=(0,p.useMutation)(Te),B=(0,a.A)(A,1)[0],P=(0,p.useMutation)(Se),L=(0,a.A)(P,1)[0],R=(0,p.useMutation)(Ce),D=(0,a.A)(R,1)[0],M=(0,p.useMutation)(Ae),q=(0,a.A)(M,1)[0],z=(0,l.useState)(!1),V=(0,a.A)(z,2),K=V[0],G=V[1];(0,l.useEffect)(function(){var e;if(null!=g&&null!==(e=g.jcr)&&void 0!==e&&e.nodeById){var t=g.jcr.nodeById,n=t.properties||[],r=function(e){var t=n.find(function(t){return t.name===e});return(null==t?void 0:t.value)||""},a=function(e){var t=n.find(function(t){return t.name===e});return"true"===(null==t?void 0:t.value)||!0===(null==t?void 0:t.value)},i={title:r("jcr:title")||t.displayName||t.name||"",intro:r("intro")||"",submissionMessage:r("submissionMessage")||"",errorMessage:r("errorMessage")||"",submitBtnLabel:r("submitBtnLabel")||"Submit",resetBtnLabel:r("resetBtnLabel")||"Reset",showResetBtn:a("showResetBtn"),newFormBtnLabel:r("newFormBtnLabel")||"New Form",showNewFormBtn:a("showNewFormBtn"),tryAgainBtnLabel:r("tryAgainBtnLabel")||"Try Again",showTryAgainBtn:a("showTryAgainBtn"),customTarget:r("customTarget")||"",css:r("css")||""};console.log("FormSettings: loaded formData:",i),_(i)}},[g]);var U=function(){var e=(0,F.A)($().mark(function e(){var t;return $().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.prev=1,e.next=2,C({variables:{workspace:"EDIT",pathOrId:c,language:"en",title:w.title,intro:w.intro}});case 2:return e.next=3,Promise.all([B({variables:{workspace:"EDIT",pathOrId:c,language:"en",submissionMessage:w.submissionMessage,errorMessage:w.errorMessage}}),L({variables:{workspace:"EDIT",pathOrId:c,language:"en",submitBtnLabel:w.submitBtnLabel,resetBtnLabel:w.resetBtnLabel,showResetBtn:w.showResetBtn.toString(),newFormBtnLabel:w.newFormBtnLabel,showNewFormBtn:w.showNewFormBtn.toString(),tryAgainBtnLabel:w.tryAgainBtnLabel,showTryAgainBtn:w.showTryAgainBtn.toString()}}),D({variables:{workspace:"EDIT",pathOrId:c,customTarget:w.customTarget}}),q({variables:{workspace:"EDIT",pathOrId:c,css:w.css}})]);case 3:e.next=5;break;case 4:e.prev=4,t=e.catch(1),console.error("Error saving form settings:",t);case 5:return e.prev=5,G(!1),e.finish(5);case 6:case"end":return e.stop()}},e,null,[[1,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),H=function(e,t){_(function(n){return At(At({},n),{},(0,b.A)({},e,t))})},J=(null===(t=o.state)||void 0===t?void 0:t.formTitle)||"",W=w.title||J,Q=r("settings.title"),X=W?"".concat(Q," - ").concat(W):Q,Y=s().createElement("button",{type:"button",className:"fb-back-button",onClick:function(){return i.push("".concat(f,"/").concat(c))}},s().createElement(qe.Q,{size:"big"})),Z=s().createElement(I.Button,{key:"save",color:"accent",size:"big",label:r(K?"actions.saving":"actions.save"),isDisabled:K||h,onClick:U});return s().createElement(I.LayoutContent,{header:s().createElement(I.Header,{title:X,subtitle:r("settings.subtitle"),backButton:Y,mainActions:[Z]}),content:s().createElement("div",{className:"fs-settings"},s().createElement(I.Paper,{className:"fs-settings__content"},s().createElement("div",{className:"fs-settings__tabs"},s().createElement(I.Button,{variant:"basic"===N?"primary":"ghost",size:"big",label:r("settings.tabs.basic"),onClick:function(){return T("basic")}}),s().createElement(I.Button,{variant:"responses"===N?"primary":"ghost",size:"big",label:r("settings.tabs.responses"),onClick:function(){return T("responses")}}),s().createElement(I.Button,{variant:"buttons"===N?"primary":"ghost",size:"big",label:r("settings.tabs.buttons"),onClick:function(){return T("buttons")}}),s().createElement(I.Button,{variant:"actions"===N?"primary":"ghost",size:"big",label:r("settings.tabs.actions"),onClick:function(){return T("actions")}}),s().createElement(I.Button,{variant:"style"===N?"primary":"ghost",size:"big",label:r("settings.tabs.style"),onClick:function(){return T("style")}})),s().createElement("div",{className:"fs-settings__tab-content"},"basic"===N&&s().createElement("div",{className:"fs-settings__section"},s().createElement(I.Typography,{variant:"heading",level:3},r("settings.basic.title")),s().createElement("div",{className:"fs-settings__field"},s().createElement(I.Typography,{variant:"body",className:"fs-settings__field-description"},r("settings.basic.formTitleDescription")),s().createElement(I.Input,{label:r("settings.basic.formTitle"),value:w.title,placeholder:r("settings.basic.formTitlePlaceholder"),onChange:function(e){return H("title",e.target.value)}})),s().createElement("div",{className:"fs-settings__field"},s().createElement(I.Typography,{variant:"body",className:"fs-settings__field-description"},r("settings.basic.introDescription")),s().createElement(Ft,{value:w.intro,placeholder:r("settings.basic.introPlaceholder"),height:120,onChange:function(e){return H("intro",e)}}))),"responses"===N&&s().createElement("div",{className:"fs-settings__section"},s().createElement(I.Typography,{variant:"heading",level:3},r("settings.responses.title")),s().createElement("div",{className:"fs-settings__field"},s().createElement(I.Typography,{variant:"body",className:"fs-settings__field-description"},r("settings.responses.submissionMessageDescription")),s().createElement(Ft,{value:w.submissionMessage,placeholder:r("settings.responses.submissionMessagePlaceholder"),height:100,onChange:function(e){return H("submissionMessage",e)}})),s().createElement("div",{className:"fs-settings__field"},s().createElement(I.Typography,{variant:"body",className:"fs-settings__field-description"},r("settings.responses.errorMessageDescription")),s().createElement(Ft,{value:w.errorMessage,placeholder:r("settings.responses.errorMessagePlaceholder"),height:100,onChange:function(e){return H("errorMessage",e)}}))),"buttons"===N&&s().createElement("div",{className:"fs-settings__section"},s().createElement(I.Typography,{variant:"heading",level:3},r("settings.buttons.title")),s().createElement("div",{className:"fs-settings__field"},s().createElement(I.Typography,{variant:"body",className:"fs-settings__field-description"},r("settings.buttons.submitBtnLabelDescription")),s().createElement(I.Input,{label:r("settings.buttons.submitBtnLabel"),value:w.submitBtnLabel,placeholder:r("settings.buttons.submitBtnLabelPlaceholder"),onChange:function(e){return H("submitBtnLabel",e.target.value)}})),s().createElement("div",{className:"fs-settings__field"},s().createElement(I.Typography,{variant:"body",className:"fs-settings__field-description"},r("settings.buttons.showResetBtnDescription")),s().createElement("div",{className:"fs-settings__switch-field"},s().createElement(I.Switch,{checked:w.showResetBtn,onChange:function(e){return H("showResetBtn",e.target.checked)}}),s().createElement(I.Typography,{variant:"body"},r("settings.buttons.showResetBtn"))),w.showResetBtn&&s().createElement(I.Input,{label:r("settings.buttons.resetBtnLabel"),value:w.resetBtnLabel,placeholder:r("settings.buttons.resetBtnLabelPlaceholder"),onChange:function(e){return H("resetBtnLabel",e.target.value)}})),s().createElement("div",{className:"fs-settings__field"},s().createElement(I.Typography,{variant:"body",className:"fs-settings__field-description"},r("settings.buttons.showNewFormBtnDescription")),s().createElement("div",{className:"fs-settings__switch-field"},s().createElement(I.Switch,{checked:w.showNewFormBtn,onChange:function(e){return H("showNewFormBtn",e.target.checked)}}),s().createElement(I.Typography,{variant:"body"},r("settings.buttons.showNewFormBtn"))),w.showNewFormBtn&&s().createElement(I.Input,{label:r("settings.buttons.newFormBtnLabel"),value:w.newFormBtnLabel,placeholder:r("settings.buttons.newFormBtnLabelPlaceholder"),onChange:function(e){return H("newFormBtnLabel",e.target.value)}})),s().createElement("div",{className:"fs-settings__field"},s().createElement(I.Typography,{variant:"body",className:"fs-settings__field-description"},r("settings.buttons.showTryAgainBtnDescription")),s().createElement("div",{className:"fs-settings__switch-field"},s().createElement(I.Switch,{checked:w.showTryAgainBtn,onChange:function(e){return H("showTryAgainBtn",e.target.checked)}}),s().createElement(I.Typography,{variant:"body"},r("settings.buttons.showTryAgainBtn"))),w.showTryAgainBtn&&s().createElement(I.Input,{label:r("settings.buttons.tryAgainBtnLabel"),value:w.tryAgainBtnLabel,placeholder:r("settings.buttons.tryAgainBtnLabelPlaceholder"),onChange:function(e){return H("tryAgainBtnLabel",e.target.value)}}))),"actions"===N&&s().createElement("div",{className:"fs-settings__section"},s().createElement(I.Typography,{variant:"heading",level:3},r("settings.actions.title")),s().createElement("div",{className:"fs-settings__field"},s().createElement(I.Typography,{variant:"body",className:"fs-settings__field-description"},r("settings.actions.customTargetDescription")),s().createElement(I.Input,{label:r("settings.actions.customTarget"),value:w.customTarget,placeholder:r("settings.actions.customTargetPlaceholder"),onChange:function(e){return H("customTarget",e.target.value)}}))),"style"===N&&s().createElement("div",{className:"fs-settings__section"},s().createElement(I.Typography,{variant:"heading",level:3},r("settings.style.title")),s().createElement("div",{className:"fs-settings__field"},s().createElement(I.Typography,{variant:"body",className:"fs-settings__field-description"},r("settings.style.cssDescription")),s().createElement(I.Textarea,{label:r("settings.style.css"),value:w.css,placeholder:r("settings.style.cssPlaceholder"),rows:10,onChange:function(e){return H("css",e.target.value)}}))))))})};Rt.propTypes={match:c().shape({params:c().shape({formId:c().string}).isRequired,path:c().string,url:c().string}).isRequired};var $t=m(),It=function(e){var t=e.match,n=((null==t?void 0:t.path)||"/form-builder").replace(/\*$/,"");return s().createElement(p.ApolloProvider,{client:$t},s().createElement(L,null,s().createElement(u.Switch,null,s().createElement(u.Route,{exact:!0,path:n,component:ze}),s().createElement(u.Route,{path:"".concat(n,"/:formId/settings"),component:Rt}),s().createElement(u.Route,{path:"".concat(n,"/:formId"),component:xt}),s().createElement(u.Redirect,{to:n}))))};It.propTypes={match:c().shape({path:c().string})},It.defaultProps={match:{path:"/form-builder"}};var jt=(0,u.withRouter)(It),Dt=function(e){var t=e.match;return s().createElement(jt,{match:t})};Dt.propTypes={match:c().object},Dt.defaultProps={match:null};var Mt=function(e){var t=e.width,n=e.height;return s().createElement("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s().createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3",stroke:"#2681ff",strokeWidth:"1.8"}),s().createElement("rect",{x:"6",y:"7",width:"12",height:"2",fill:"#2681ff"}),s().createElement("rect",{x:"6",y:"11",width:"8",height:"2",fill:"#2681ff",opacity:"0.6"}),s().createElement("rect",{x:"6",y:"15",width:"10",height:"2",fill:"#2681ff",opacity:"0.4"}),s().createElement("circle",{cx:"17",cy:"12",r:"2",stroke:"#2681ff",strokeWidth:"1.5"}))};Mt.propTypes={width:c().number,height:c().number},Mt.defaultProps={width:24,height:24};var qt=function(){window.jahia&&window.jahia.i18n&&window.jahia.i18n.loadNamespaces&&window.jahia.i18n.loadNamespaces(v),r.registry.add("accordionItem","formBuilderAccordion",r.registry.get("accordionItem","renderDefaultApps"),{targets:["jcontent:75"],icon:s().createElement(Mt,{width:24,height:24}),label:"".concat(v,":accordionTitle"),defaultPath:i,appsTarget:"formBuilderAccordionApps",requireModuleInstalledOnSite:"formidable"}),r.registry.add("adminRoute","formidableBuilder",{targets:["formBuilderAccordionApps"],icon:s().createElement(Mt,{width:12,height:12}),label:"".concat(v,":label"),path:"".concat(i,"*"),defaultPath:i,isSelectable:!0,requireModuleInstalledOnSite:"formidable",render:function(e){return s().createElement(l.Suspense,{fallback:"loading ..."},s().createElement(Dt,{match:e.match}))}}),console.debug("%c form-builder module is activated","color: #3c8cba")},zt=n(1793),Vt=n.n(zt);const Kt=JSON.parse('{"formidableBuilder":{"label":"Form Builder","accordionTitle":"Forms","states":{"loading":"Loading form data..."},"actions":{"create":"Create form","creating":"Creating...","cancel":"Cancel","edit":"Edit","delete":"Delete","duplicate":"Duplicate","preview":"Preview","submissions":"Submissions","settings":"Form settings","refresh":"Refresh","back":"Back to list","save":"Save changes","saving":"Saving..."},"list":{"title":"All forms","subtitle":"Manage Formidable forms directly from JContent.","empty":"No forms available yet.","create":{"title":"Create a new form","description":"Provide a title and optional introduction for the new form."},"fields":{"title":"Title","titlePlaceholder":"Ex: Contact form","intro":"Introduction","introPlaceholder":"Tell authors what this form is about"},"columns":{"title":"Form title","steps":"Steps","intro":"Introduction","actions":"Actions","stepCount":"{{count}} step(s)","noIntro":"No introduction"},"actions":{"deleteConfirm":"Delete form \\"{{title}}\\"?"},"cards":{"updated":"Last updated","neverUpdated":"Never updated","duplicateName":"{{title}} (Copy)","introFallback":"No description provided"}},"builder":{"form":{"title":"Form title","intro":"Introduction"},"sidebar":{"title":"Form Builder","stepsTab":"Steps","fieldsTab":"Fields","addStep":"Add step","removeStep":"Remove","removeConfirm":"Delete step \\"{{title}}\\"?"},"step":{"empty":"Select a step to start editing.","label":"Step label","description":"Step description"},"fields":{"title":"Fields","addField":"Add a field","empty":"No fields yet.","remove":"Remove","removeConfirm":"Delete field \\"{{title}}\\"?","selectField":"Select a field to edit its properties.","editorTitle":"Field settings","label":"Field label","name":"Field name","properties":{"buttonType":"Button action","buttonTypeOptions":{"button":"Button","submit":"Submit","reset":"Reset"},"variant":"Variant","variantOptions":{"primary":"Primary","secondary":"Secondary","danger":"Danger"},"required":"Required","defaultChecked":"Checked by default","value":"Value","placeholder":"Placeholder","defaultValue":"Default value","defaultDate":"Default date","minDate":"Minimum date","maxDate":"Maximum date","defaultDateTime":"Default date & time","minDateTime":"Minimum date & time","maxDateTime":"Maximum date & time","step":"Step","list":"Data list values","listAdd":"Add value","listRemove":"Remove value","listItem":"Value {{index}}","pattern":"Pattern","minLength":"Minimum length","maxLength":"Maximum length","autocomplete":"Autocomplete","multiple":"Allow multiple values","options":"Options","optionsAdd":"Add option","optionsRemove":"Remove option","optionsItem":"Option {{index}}","size":"Visible options","disabled":"Disabled","autofocus":"Auto focus","accept":"Accepted MIME types","rows":"Rows","resize":"Resize behaviour","resizeOptions":{"none":"None","both":"Both","horizontal":"Horizontal","vertical":"Vertical"},"selectPlaceholder":"Select an option"},"radioGroup":{"optionsTitle":"Radio options","empty":"No radio options yet.","addOption":"Add radio option","optionLabel":"Option {{index}}"},"checkboxGroup":{"optionsTitle":"Checkbox options","empty":"No checkbox options yet.","addOption":"Add checkbox","optionLabel":"Option {{index}}"},"select":{"optionsTitle":"Select options","empty":"No select options yet.","addOption":"Add select option","optionValueLabel":"Value","optionLabelLabel":"Label","optionSelected":"Selected","optionLabel":"Option {{index}}"},"selectOption":{"optionsTitle":"Select options","empty":"No options yet.","addOption":"Add select option","optionValueLabel":"Value","optionLabelLabel":"Label","optionSelected":"Selected","optionLabel":"Option {{index}}"}},"preview":{"title":"JSON preview","subtitle":"Preview how your form will appear to users"}},"settings":{"title":"Form settings","subtitle":"Configure form properties and behavior","formNamePlaceholder":"Loading form...","formSubtitle":"Configure the settings and behavior for this form","tabs":{"basic":"Basic","responses":"Messages","buttons":"Buttons","actions":"Actions","style":"Style"},"basic":{"title":"Basic Settings","formTitle":"Form Title","formTitlePlaceholder":"Enter form title","formTitleDescription":"The main title displayed at the top of your form","intro":"Introduction","introPlaceholder":"Enter form introduction","introDescription":"Optional introductory text shown above the form fields"},"responses":{"title":"Response Messages","submissionMessage":"Success Message","submissionMessagePlaceholder":"Message shown after successful submission","submissionMessageDescription":"Message displayed to users when their form submission is successful","errorMessage":"Error Message","errorMessagePlaceholder":"Message shown when submission fails","errorMessageDescription":"Message displayed when there are errors in form submission"},"buttons":{"title":"Button Settings","submitBtnLabel":"Submit Button Label","submitBtnLabelPlaceholder":"Submit","submitBtnLabelDescription":"Text displayed on the main submit button","showResetBtn":"Show Reset Button","showResetBtnDescription":"Display a button to clear all form fields","resetBtnLabel":"Reset Button Label","resetBtnLabelPlaceholder":"Reset","showNewFormBtn":"Show New Form Button","showNewFormBtnDescription":"Display a button to start a new form submission","newFormBtnLabel":"New Form Button Label","newFormBtnLabelPlaceholder":"New Form","showTryAgainBtn":"Show Try Again Button","showTryAgainBtnDescription":"Display a button to retry submission after an error","tryAgainBtnLabel":"Try Again Button Label","tryAgainBtnLabelPlaceholder":"Try Again"},"actions":{"title":"Action Settings","customTarget":"Custom Target URL","customTargetPlaceholder":"Enter redirect URL after submission","customTargetDescription":"URL to redirect users to after successful form submission (leave empty for default behavior)"},"style":{"title":"Custom Styles","css":"Custom CSS","cssPlaceholder":"Enter custom CSS for the form","cssDescription":"Add custom CSS styles to customize the appearance of your form"}},"fields":{"types":{"inputButton":"Button","inputCheckbox":"Checkbox","checkboxGroup":"Checkbox group","inputColor":"Color","inputDate":"Date","inputDatetimeLocal":"Date/time","inputEmail":"Email","inputFile":"File upload","inputHidden":"Hidden","inputRadio":"Radio option","radioGroup":"Radio group","inputText":"Text","select":"Select","textarea":"Textarea"}}}}'),Gt=JSON.parse('{"formidableBuilder":{"label":"Form Builder","accordionTitle":"Forms","states":{"loading":"Loading form data..."},"actions":{"create":"Create form","creating":"Creating...","cancel":"Cancel","edit":"Edit","delete":"Delete","duplicate":"Duplicate","preview":"Preview","submissions":"Submissions","settings":"Form settings","refresh":"Refresh","back":"Back to list","save":"Save changes","saving":"Saving..."},"list":{"title":"All forms","subtitle":"Manage Formidable forms directly from JContent.","empty":"No forms available yet.","create":{"title":"Create a new form","description":"Provide a title and optional introduction for the new form."},"fields":{"title":"Title","titlePlaceholder":"Ex: Contact form","intro":"Introduction","introPlaceholder":"Tell authors what this form is about"},"columns":{"title":"Form title","steps":"Steps","intro":"Introduction","actions":"Actions","stepCount":"{{count}} step(s)","noIntro":"No introduction"},"actions":{"deleteConfirm":"Delete form \\"{{title}}\\"?"},"cards":{"updated":"Last updated","neverUpdated":"Never updated","duplicateName":"{{title}} (Copy)","introFallback":"No description provided"}},"builder":{"form":{"title":"Form title","intro":"Introduction"},"sidebar":{"title":"Cration de Formulaires","stepsTab":"tapes","fieldsTab":"Champs","addStep":"Ajouter une tape","removeStep":"Supprimer","removeConfirm":"Supprimer l\'tape  {{title}}  ?"},"step":{"empty":"Select a step to start editing.","label":"Step label","description":"Step description"},"fields":{"title":"Fields","addField":"Add a field","empty":"No fields yet.","remove":"Remove","removeConfirm":"Delete field \\"{{title}}\\"?","selectField":"Select a field to edit its properties.","editorTitle":"Field settings","label":"Field label","name":"Field name","properties":{"buttonType":"Button action","buttonTypeOptions":{"button":"Button","submit":"Submit","reset":"Reset"},"variant":"Variant","variantOptions":{"primary":"Primary","secondary":"Secondary","danger":"Danger"},"required":"Required","defaultChecked":"Checked by default","value":"Value","placeholder":"Placeholder","defaultValue":"Default value","defaultDate":"Default date","minDate":"Minimum date","maxDate":"Maximum date","defaultDateTime":"Default date & time","minDateTime":"Minimum date & time","maxDateTime":"Maximum date & time","step":"Step","list":"Data list values","listAdd":"Add value","listRemove":"Remove value","listItem":"Value {{index}}","pattern":"Pattern","minLength":"Minimum length","maxLength":"Maximum length","autocomplete":"Autocomplete","multiple":"Allow multiple values","options":"Options","optionsAdd":"Add option","optionsRemove":"Remove option","optionsItem":"Option {{index}}","size":"Visible options","disabled":"Disabled","autofocus":"Auto focus","accept":"Accepted MIME types","rows":"Rows","resize":"Resize behaviour","resizeOptions":{"none":"None","both":"Both","horizontal":"Horizontal","vertical":"Vertical"},"selectPlaceholder":"Select an option"},"radioGroup":{"optionsTitle":"Radio options","empty":"No radio options yet.","addOption":"Add radio option","optionLabel":"Option {{index}}"},"checkboxGroup":{"optionsTitle":"Checkbox options","empty":"No checkbox options yet.","addOption":"Add checkbox","optionLabel":"Option {{index}}"},"select":{"optionsTitle":"Select options","empty":"No select options yet.","addOption":"Add select option","optionValueLabel":"Value","optionLabelLabel":"Label","optionSelected":"Selected","optionLabel":"Option {{index}}"},"selectOption":{"optionsTitle":"Select options","empty":"No options yet.","addOption":"Add select option","optionValueLabel":"Value","optionLabelLabel":"Label","optionSelected":"Selected","optionLabel":"Option {{index}}"}},"preview":{"title":"JSON preview","subtitle":"Prvisualisez l\'apparence de votre formulaire pour les utilisateurs"}},"settings":{"title":"Paramtres du formulaire","subtitle":"Configurer les proprits et le comportement du formulaire","formNamePlaceholder":"Chargement du formulaire...","formSubtitle":"Configurer les paramtres et le comportement de ce formulaire","tabs":{"basic":"Gnral","responses":"Messages","buttons":"Boutons","actions":"Actions","style":"Style"},"basic":{"title":"Paramtres gnraux","formTitle":"Titre du formulaire","formTitlePlaceholder":"Saisir le titre du formulaire","formTitleDescription":"Le titre principal affich en haut de votre formulaire","intro":"Introduction","introPlaceholder":"Saisir l\'introduction du formulaire","introDescription":"Texte d\'introduction optionnel affich au-dessus des champs du formulaire"},"responses":{"title":"Messages de rponse","submissionMessage":"Message de succs","submissionMessagePlaceholder":"Message affich aprs soumission russie","submissionMessageDescription":"Message affich aux utilisateurs lorsque leur soumission de formulaire est russie","errorMessage":"Message d\'erreur","errorMessagePlaceholder":"Message affich en cas d\'chec de soumission","errorMessageDescription":"Message affich lorsqu\'il y a des erreurs dans la soumission du formulaire"},"buttons":{"title":"Paramtres des boutons","submitBtnLabel":"Libell du bouton Soumettre","submitBtnLabelPlaceholder":"Soumettre","submitBtnLabelDescription":"Texte affich sur le bouton de soumission principal","showResetBtn":"Afficher le bouton Rinitialiser","showResetBtnDescription":"Afficher un bouton pour effacer tous les champs du formulaire","resetBtnLabel":"Libell du bouton Rinitialiser","resetBtnLabelPlaceholder":"Rinitialiser","showNewFormBtn":"Afficher le bouton Nouveau formulaire","showNewFormBtnDescription":"Afficher un bouton pour commencer une nouvelle soumission de formulaire","newFormBtnLabel":"Libell du bouton Nouveau formulaire","newFormBtnLabelPlaceholder":"Nouveau formulaire","showTryAgainBtn":"Afficher le bouton Ressayer","showTryAgainBtnDescription":"Afficher un bouton pour ressayer la soumission aprs une erreur","tryAgainBtnLabel":"Libell du bouton Ressayer","tryAgainBtnLabelPlaceholder":"Ressayer"},"actions":{"title":"Paramtres d\'action","customTarget":"URL de redirection personnalise","customTargetPlaceholder":"Saisir l\'URL de redirection aprs soumission","customTargetDescription":"URL vers laquelle rediriger les utilisateurs aprs une soumission russie (laisser vide pour le comportement par dfaut)"},"style":{"title":"Styles personnaliss","css":"CSS personnalis","cssPlaceholder":"Saisir le CSS personnalis pour le formulaire","cssDescription":"Ajouter des styles CSS personnaliss pour personnaliser l\'apparence de votre formulaire"}},"fields":{"types":{"inputButton":"Button","inputCheckbox":"Checkbox","checkboxGroup":"Checkbox group","inputColor":"Color","inputDate":"Date","inputDatetimeLocal":"Date/time","inputEmail":"Email","inputFile":"File upload","inputHidden":"Hidden","inputRadio":"Radio option","radioGroup":"Radio group","inputText":"Text","select":"Select","textarea":"Textarea"}}}}');var Ut=function(){[["en",Kt],["fr",Gt]].forEach(function(e){var t=(0,a.A)(e,2),n=t[0],r=t[1][v];r&&!Vt().hasResourceBundle(n,v)&&Vt().addResourceBundle(n,v,r,!0,!0)})};function Ht(){Ut(),qt()}function Jt(){r.registry.add("callback","formidableBuilder",{targets:["jahiaApp-init:2"],callback:Ht})}},5509:(e,t,n)=>{var r=n(5072),a=n(1004);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]);r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},9400:(e,t,n)=>{(t=n(6314)(!1)).push([e.id,".fb-builder__wrapper{display:flex;flex-direction:column;gap:24px;padding:24px;background:linear-gradient(135deg, #f5f7ff 0%, #ffffff 60%)}.fb-toolbar{display:flex;align-items:center;gap:16px;padding:12px 16px;border-radius:16px;background:#fff;box-shadow:0 12px 30px rgba(15,19,39,.1)}.fb-back-button{width:48px;height:48px;border-radius:24px;border:1px solid rgba(0,0,0,.1);background:#fff;color:#000;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;line-height:0}.fb-back-button:hover{background:rgba(0,0,0,.06)}.fb-back-button svg{width:24px;height:24px}.fb-builder__content{display:grid;grid-template-columns:280px 1fr 340px;gap:24px}.fb-sidebar{padding:20px;border-radius:16px;background:#fff;box-shadow:0 20px 40px rgba(10,17,35,.08);display:flex;flex-direction:column;gap:16px}.fb-sidebar__header{display:flex;justify-content:space-between;align-items:center}.fb-sidebar__tabs{display:flex;gap:4px;padding:0 0 16px 0;border-bottom:1px solid rgba(0,0,0,.1)}.fb-sidebar__tabs .moonstone-Button{flex:1;min-height:44px;padding:12px 16px;font-size:16px;font-weight:500}.fb-step-list,.fb-field-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}.fb-step,.fb-field-row{border:1px solid rgba(0,0,0,0);border-radius:12px;background:#f7f8fc;display:flex;justify-content:space-between;align-items:center;padding:12px;transition:border .15s ease,box-shadow .15s ease,background .15s ease}.fb-step--active,.fb-field-row--active{border-color:#2681ff;background:#fff;box-shadow:0 10px 30px rgba(38,129,255,.2)}.fb-step__button,.fb-field-row__button{font:inherit;border:none;background:rgba(0,0,0,0);text-align:left;flex:1;cursor:pointer}.fb-field-row__content{display:flex;flex-direction:column;gap:8px;flex:1;margin-right:16px}.fb-step-editor,.fb-field-editor,.fb-json,.fb-field{display:flex;flex-direction:column;gap:8px}.moonstone-typography.moonstone-variant_subheading{margin-top:10px;margin-bottom:10px}.fb-step-editor{padding:28px;border-radius:18px;background:#fff;box-shadow:0 25px 50px rgba(18,28,78,.1)}.fb-field-editor{padding:28px;border-radius:18px;background:#fff;box-shadow:0 25px 50px rgba(18,28,78,.1)}.fb-step-editor__form,.fb-step-editor__actions,.fb-step-editor__list{display:flex;flex-direction:column;margin-top:20px;padding-top:12px;border-top:1px solid rgba(0,0,0,.05);gap:16px}.fb-field-editor__header{display:flex;align-items:center;justify-content:space-between}.fb-field-editor__type{color:#6c7283;text-transform:uppercase}.fb-field--inline{flex-direction:row;align-items:center;justify-content:space-between}.fb-field--divider{padding:12px 0;border-top:1px solid rgba(0,0,0,.05);border-bottom:1px solid hsla(0,0%,100%,.6)}.fb-option-section{background:#fff;border:1px solid rgba(0,0,0,.05);border-radius:14px;padding:16px;box-shadow:0 10px 25px rgba(10,17,35,.06)}.fb-option-section__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.fb-option-card-list{display:flex;flex-direction:column;gap:12px}.fb-option-card{border:1px solid rgba(0,0,0,.05);border-radius:12px;padding:12px;background:#fdfdff;box-shadow:inset 0 1px 0 hsla(0,0%,100%,.6)}.fb-option-card__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.fb-option-card__grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));gap:12px}.fb-textarea{width:100%;border:1px solid #cfd5e6;border-radius:10px;padding:12px 14px;background:#fbfcff;resize:vertical;font-family:inherit}.fb-field-type-grid{display:flex;flex-wrap:wrap;gap:12px}.fb-field-type-grid .moonstone-Button{min-height:48px;padding:12px 16px;font-size:14px;font-weight:500;border-radius:8px;display:flex;align-items:center;gap:8px;flex:1;min-width:120px;justify-content:center}.fb-field-list{overflow-y:auto}.fb-builder__main{display:flex;flex-direction:column;gap:16px}.fb-builder__side{display:flex;flex-direction:column;gap:16px}.fb-json__code{font-family:monospace;background:#0b1a30;color:#9ef5ff;padding:16px;border-radius:12px;max-height:320px;overflow:auto}.fb-input{display:flex;flex-direction:column;gap:8px}.fb-input__control{border:1px solid #cfd5e6;border-radius:10px;padding:10px 12px}.fb-options{display:flex;flex-direction:column;gap:8px;margin:0;padding:0;list-style:none}.fb-option-row{display:flex;gap:8px;align-items:center}.fb-loading{display:flex;flex-direction:column;align-items:center;gap:12px;padding:64px}.fb-field-preview{display:flex;flex-direction:column;gap:4px;padding:8px;background:#fff;border:1px solid #e0e0e0;border-radius:6px;font-size:14px}.fb-field-preview__label{font-weight:500;color:#666}.fb-field-preview__input,.fb-field-preview__textarea,.fb-field-preview__select{padding:6px 8px;border:1px solid #ccc;border-radius:4px;background:#f9f9f9;color:#333;font-size:14px}.fb-field-preview__input:disabled,.fb-field-preview__textarea:disabled,.fb-field-preview__select:disabled{background:#f5f5f5;color:#999}.fb-field-preview__checkbox,.fb-field-preview__radio{margin-right:4px}.fb-field-preview__group{display:flex;flex-direction:column;gap:4px}.fb-field-preview__option{display:flex;align-items:center;gap:4px}.fb-field-preview__button{padding:8px 16px;border:1px solid #ccc;border-radius:4px;background:#f9f9f9;color:#333;cursor:not-allowed;font-size:14px}.fb-field-preview__button--primary{background:#2681ff;color:#fff;border-color:#2681ff}.fb-field-preview__unknown{color:#999;font-style:italic}.fb-field-preview__placeholder{color:#999;font-style:italic;font-size:14px}.fs-settings{padding:24px}.fs-settings__form-header{margin-bottom:32px;padding-bottom:16px;border-bottom:1px solid #e0e0e0}.fs-settings__form-subtitle{margin-top:8px;color:#666}.fs-settings__content{max-width:800px;margin:0 auto}.fs-settings__tabs{display:flex;gap:8px;margin-bottom:24px;border-bottom:1px solid #e0e0e0;padding-bottom:16px}.fs-settings__tab-content{padding:24px 0}.fs-settings__section{margin-bottom:32px}.fs-settings__section:last-child{margin-bottom:0}.fs-settings__field-description{margin-bottom:8px;color:#666;font-size:.875rem;line-height:1.4}.fs-settings__field{margin-bottom:24px}.fs-settings__field:last-child{margin-bottom:0}.fs-settings__switch-field{display:flex;align-items:center;gap:12px;margin-bottom:12px}.lexical-editor{border:1px solid #ccc;border-radius:4px;padding:8px}.lexical-editor .lexical-toolbar{display:flex;gap:4px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid #e0e0e0}.lexical-editor .lexical-toolbar .lexical-toolbar-button{padding:4px 8px;border:1px solid #ccc;border-radius:3px;background:#fff;cursor:pointer;font-size:14px;min-width:28px;display:flex;align-items:center;justify-content:center}.lexical-editor .lexical-toolbar .lexical-toolbar-button:hover{background:#f5f5f5}.lexical-editor .lexical-toolbar .lexical-toolbar-button:active{background:#e0e0e0}.lexical-editor .lexical-content-editable{outline:none;min-height:80px;padding:8px 0}.lexical-editor .lexical-placeholder{color:#999;position:absolute;top:8px;left:8px;pointer-events:none}.lexical-editor .font-bold{font-weight:bold}.lexical-editor .italic{font-style:italic}.lexical-editor .underline{text-decoration:underline}",""]),e.exports=t},9727:(e,t,n)=>{var r=n(5072),a=n(9400);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]);r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}}}]);
//# sourceMappingURL=522.jahia.e1cac0.js.map