{"version":3,"file":"624.jahia.e51eaa.js","mappings":"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","sources":["webpack://formidableBuilder/./src/javascript/components/formList/FormListView.scss","webpack://formidableBuilder/./src/javascript/components/formList/FormListView.scss?b605","webpack://formidableBuilder/./src/javascript/components/formBuilder/FormBuilder.scss","webpack://formidableBuilder/./src/javascript/AdminPanel/AdminPanel.constants.jsx","webpack://formidableBuilder/./src/javascript/apollo/client.js","webpack://formidableBuilder/./src/javascript/constants/formBuilder.js","webpack://formidableBuilder/./src/javascript/contexts/FormBuilderContext.jsx","webpack://formidableBuilder/./src/javascript/components/formList/CreateFormPanel.jsx","webpack://formidableBuilder/./src/javascript/graphql/fragments.js","webpack://formidableBuilder/./src/javascript/graphql/queries.js","webpack://formidableBuilder/./src/javascript/graphql/mutations.js","webpack://formidableBuilder/./src/javascript/utils/string.js","webpack://formidableBuilder/./src/javascript/hooks/useFormList.js","webpack://formidableBuilder/./src/javascript/components/formList/FormListView.jsx","webpack://formidableBuilder/./src/javascript/components/formBuilder/sidebar/Sidebar.jsx","webpack://formidableBuilder/./src/javascript/components/formBuilder/steps/StepEditor.jsx","webpack://formidableBuilder/./src/javascript/components/formBuilder/fields/FieldEditor.jsx","webpack://formidableBuilder/./src/javascript/utils/formNormalizer.js","webpack://formidableBuilder/./src/javascript/hooks/useFormEditor.js","webpack://formidableBuilder/./src/javascript/components/formBuilder/FormBuilder.jsx","webpack://formidableBuilder/./src/javascript/components/FormBuilderApp.jsx","webpack://formidableBuilder/./src/javascript/AdminPanel/AdminPanel.jsx","webpack://formidableBuilder/./src/javascript/components/icons/FormBuilderIcon.jsx","webpack://formidableBuilder/./src/javascript/AdminPanel/AdminPanel.routes.jsx","webpack://formidableBuilder/./src/javascript/AdminPanel.register.js","webpack://formidableBuilder/./src/javascript/init.js","webpack://formidableBuilder/./src/javascript/components/formBuilder/FormBuilder.scss?6176"],"sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".fb-list{display:flex;flex-direction:column;align-items:center;gap:40px;padding:48px 64px 64px;background:linear-gradient(135deg, #f8faff 0%, #f1f5ff 80%);min-height:calc(100vh - 150px)}.fb-list__section{width:100%;max-width:1280px}.fb-panel{padding:32px 36px;border-radius:12px;box-shadow:0 20px 40px rgba(15,19,39,.08);display:flex;flex-direction:column;gap:24px}.fb-panel__header{display:flex;flex-direction:column;gap:8px}.fb-panel__body{display:flex;flex-direction:column;gap:20px}.fb-field{display:flex;flex-direction:column;gap:10px}.fb-textarea{width:100%;border:1px solid #cfd5e6;border-radius:8px;padding:12px;background:#fdfdff;resize:vertical;font-family:inherit}.fb-panel__actions{display:flex;justify-content:flex-end;gap:16px;padding-top:8px}.fb-list__loading,.fb-list__empty{display:flex;align-items:center;gap:12px;min-height:160px;justify-content:center}.fb-list__panel{padding:40px 48px;background:#fff;border-radius:16px;box-shadow:0 24px 60px rgba(19,32,68,.08);display:flex;flex-direction:column;gap:32px}.fb-card-grid{display:grid;grid-template-columns:1fr;gap:32px;width:100%}.fb-card{display:flex;flex-direction:column;gap:20px;padding:28px 32px;border-radius:20px;border:1px solid rgba(15,19,39,.08);box-shadow:0 20px 55px rgba(19,32,68,.08);background:#fdfdff}.fb-card__header{display:flex;align-items:flex-start;justify-content:space-between;gap:20px;padding-bottom:12px;border-bottom:1px solid rgba(143,155,179,.2)}.fb-card__title{display:flex;flex-direction:column;gap:4px}.fb-card__intro{min-height:64px;color:#31374a;line-height:1.5}.fb-card__intro-html{display:flex;flex-direction:column;gap:8px}.fb-card__intro-html p{margin:0}.fb-card__meta{display:flex;gap:32px;font-size:14px;color:#4c566a;border-top:1px solid rgba(143,155,179,.18);padding-top:16px}.fb-card__meta-item{display:flex;flex-direction:column;gap:6px}.fb-card__actions{display:flex;flex-direction:column;gap:12px;border-top:1px solid rgba(143,155,179,.15);padding-top:20px}.fb-card__actions-row{display:flex;flex-wrap:nowrap;gap:12px;width:100%}.fb-card__actions-row .moonstone-button{flex:1;justify-content:flex-start}@media(max-width: 900px){.fb-card__actions-row{flex-wrap:wrap}}@media(max-width: 1024px){.fb-list{padding:32px}.fb-list__panel{padding:32px}}@media(min-width: 720px){.fb-card-grid{grid-template-columns:repeat(2, minmax(0, 1fr))}}@media(min-width: 1100px){.fb-card-grid{grid-template-columns:repeat(3, minmax(0, 1fr))}}@media(max-width: 720px){.fb-list{padding:24px 16px 40px}.fb-card{padding:24px}}.fb-card-grid .moonstone-paper{margin-top:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./FormListView.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".fb-builder__wrapper{display:flex;flex-direction:column;gap:24px;padding:24px;background:linear-gradient(135deg, #f5f7ff 0%, #ffffff 60%)}.fb-toolbar{display:flex;align-items:center;gap:16px;padding:12px 16px;border-radius:16px;background:#fff;box-shadow:0 12px 30px rgba(15,19,39,.1)}.fb-back-button{width:48px;height:48px;border-radius:24px;border:1px solid rgba(0,0,0,.1);background:#fff;color:#000;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;line-height:0}.fb-back-button:hover{background:rgba(0,0,0,.06)}.fb-back-button svg{width:24px;height:24px}.fb-builder__content{display:grid;grid-template-columns:280px 1fr 340px;gap:24px}.fb-sidebar{padding:20px;border-radius:16px;background:#fff;box-shadow:0 20px 40px rgba(10,17,35,.08);display:flex;flex-direction:column;gap:16px}.fb-sidebar__header{display:flex;justify-content:space-between;align-items:center}.fb-step-list,.fb-field-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}.fb-step,.fb-field-row{border:1px solid rgba(0,0,0,0);border-radius:12px;background:#f7f8fc;display:flex;justify-content:space-between;align-items:center;padding:12px;transition:border .15s ease,box-shadow .15s ease,background .15s ease}.fb-step--active,.fb-field-row--active{border-color:#2681ff;background:#fff;box-shadow:0 10px 30px rgba(38,129,255,.2)}.fb-step__button,.fb-field-row__button{font:inherit;border:none;background:rgba(0,0,0,0);text-align:left;flex:1;cursor:pointer}.fb-step-editor,.fb-field-editor,.fb-json,.fb-field{display:flex;flex-direction:column;gap:8px}.moonstone-typography.moonstone-variant_subheading{margin-top:10px;margin-bottom:10px}.fb-step-editor{padding:28px;border-radius:18px;background:#fff;box-shadow:0 25px 50px rgba(18,28,78,.1)}.fb-step-editor__form,.fb-step-editor__actions,.fb-step-editor__list{display:flex;flex-direction:column;margin-top:20px;padding-top:12px;border-top:1px solid rgba(0,0,0,.05);gap:16px}.fb-field-editor__header{display:flex;align-items:center;justify-content:space-between}.fb-field-editor__type{color:#6c7283;text-transform:uppercase}.fb-field--inline{flex-direction:row;align-items:center;justify-content:space-between}.fb-field--divider{padding:12px 0;border-top:1px solid rgba(0,0,0,.05);border-bottom:1px solid hsla(0,0%,100%,.6)}.fb-option-section{background:#fff;border:1px solid rgba(0,0,0,.05);border-radius:14px;padding:16px;box-shadow:0 10px 25px rgba(10,17,35,.06)}.fb-option-section__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.fb-option-card-list{display:flex;flex-direction:column;gap:12px}.fb-option-card{border:1px solid rgba(0,0,0,.05);border-radius:12px;padding:12px;background:#fdfdff;box-shadow:inset 0 1px 0 hsla(0,0%,100%,.6)}.fb-option-card__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.fb-option-card__grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));gap:12px}.fb-textarea{width:100%;border:1px solid #cfd5e6;border-radius:10px;padding:12px 14px;background:#fbfcff;resize:vertical;font-family:inherit}.fb-field-type-grid{display:flex;flex-wrap:wrap;gap:8px}.fb-field-list{overflow-y:auto}.fb-builder__main{display:flex;flex-direction:column;gap:16px}.fb-builder__side{display:flex;flex-direction:column;gap:16px}.fb-json__code{font-family:monospace;background:#0b1a30;color:#9ef5ff;padding:16px;border-radius:12px;max-height:320px;overflow:auto}.fb-input{display:flex;flex-direction:column;gap:8px}.fb-input__control{border:1px solid #cfd5e6;border-radius:10px;padding:10px 12px}.fb-options{display:flex;flex-direction:column;gap:8px;margin:0;padding:0;list-style:none}.fb-option-row{display:flex;gap:8px;align-items:center}.fb-loading{display:flex;flex-direction:column;align-items:center;gap:12px;padding:64px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nexport default {\n    ROUTE: '/form-builder',\n    ROUTE_DEFAULT_PATH: '/form-builder'\n};\n","import {ApolloClient, HttpLink, InMemoryCache} from '@apollo/client';\n\nconst DEFAULT_HEADERS = {\n    'X-Requested-With': 'XMLHttpRequest'\n};\n\nconst buildGraphQLUri = () => {\n    const {contextJsParameters = {}} = window;\n    const {contextPath = ''} = contextJsParameters;\n\n    return `${contextPath || ''}/modules/graphql`;\n};\n\nexport const createApolloClient = () => {\n    return new ApolloClient({\n        link: new HttpLink({\n            uri: buildGraphQLUri(),\n            credentials: 'include',\n            headers: DEFAULT_HEADERS\n        }),\n        cache: new InMemoryCache({\n            typePolicies: {\n                JCRNode: {\n                    keyFields: ['uuid']\n                }\n            }\n        }),\n        connectToDevTools: process.env.NODE_ENV !== 'production'\n    });\n};\n\nlet sharedClient;\n\nexport const getApolloClient = () => {\n    if (!sharedClient) {\n        sharedClient = createApolloClient();\n    }\n\n    return sharedClient;\n};\n","export const FORM_NAMESPACE = 'formidableBuilder';\n\nexport const DEFAULT_WORKSPACE = 'EDIT';\n\nexport const getDefaultFormsPath = siteKey => `/sites/${siteKey}/contents/forms`;\n\nconst booleanProperty = (name, labelKey) => ({\n    name,\n    type: 'boolean',\n    labelKey\n});\n\nconst textProperty = (name, labelKey, options = {}) => ({\n    name,\n    type: 'text',\n    labelKey,\n    ...options\n});\n\nconst multilineProperty = (name, labelKey) => ({\n    name,\n    type: 'multiline',\n    labelKey\n});\n\nconst numberProperty = (name, labelKey) => ({\n    name,\n    type: 'number',\n    labelKey\n});\n\nconst dateProperty = (name, labelKey) => ({\n    name,\n    type: 'date',\n    labelKey\n});\n\nconst dateTimeProperty = (name, labelKey) => ({\n    name,\n    type: 'datetime',\n    labelKey\n});\n\nconst selectProperty = (name, labelKey, options, defaultValue) => ({\n    name,\n    type: 'select',\n    labelKey,\n    options,\n    defaultValue\n});\n\nconst stringListProperty = (name, labelKey, config = {}) => ({\n    name,\n    type: 'stringList',\n    labelKey,\n    ...config\n});\n\nconst buttonTypeOptions = [\n    {value: 'button', labelKey: 'builder.fields.properties.buttonTypeOptions.button'},\n    {value: 'submit', labelKey: 'builder.fields.properties.buttonTypeOptions.submit'},\n    {value: 'reset', labelKey: 'builder.fields.properties.buttonTypeOptions.reset'}\n];\n\nconst buttonVariantOptions = [\n    {value: 'primary', labelKey: 'builder.fields.properties.variantOptions.primary'},\n    {value: 'secondary', labelKey: 'builder.fields.properties.variantOptions.secondary'},\n    {value: 'danger', labelKey: 'builder.fields.properties.variantOptions.danger'}\n];\n\nconst resizeOptions = [\n    {value: 'none', labelKey: 'builder.fields.properties.resizeOptions.none'},\n    {value: 'both', labelKey: 'builder.fields.properties.resizeOptions.both'},\n    {value: 'horizontal', labelKey: 'builder.fields.properties.resizeOptions.horizontal'},\n    {value: 'vertical', labelKey: 'builder.fields.properties.resizeOptions.vertical'}\n];\n\nexport const FIELD_TYPES = [\n    {\n        id: 'inputButton',\n        nodeType: 'fmdb:inputButton',\n        labelKey: 'fields.types.inputButton',\n        defaultProperties: {\n            buttonType: 'button',\n            variant: 'primary'\n        },\n        propertySchema: [\n            selectProperty('buttonType', 'builder.fields.properties.buttonType', buttonTypeOptions, 'button'),\n            selectProperty('variant', 'builder.fields.properties.variant', buttonVariantOptions, 'primary')\n        ]\n    },\n    {\n        id: 'inputCheckbox',\n        nodeType: 'fmdb:inputCheckbox',\n        labelKey: 'fields.types.inputCheckbox',\n        defaultProperties: {\n            required: false,\n            defaultChecked: false,\n            value: ''\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            booleanProperty('defaultChecked', 'builder.fields.properties.defaultChecked'),\n            textProperty('value', 'builder.fields.properties.value')\n        ]\n    },\n    {\n        id: 'checkboxGroup',\n        nodeType: 'fmdb:checkboxGroup',\n        labelKey: 'fields.types.checkboxGroup',\n        defaultProperties: {\n            required: false\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required')\n        ]\n    },\n    {\n        id: 'inputColor',\n        nodeType: 'fmdb:inputColor',\n        labelKey: 'fields.types.inputColor',\n        defaultProperties: {\n            required: false,\n            defaultValue: ''\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            textProperty('defaultValue', 'builder.fields.properties.defaultValue')\n        ]\n    },\n    {\n        id: 'inputDate',\n        nodeType: 'fmdb:inputDate',\n        labelKey: 'fields.types.inputDate',\n        defaultProperties: {\n            required: false,\n            defaultValue: null,\n            min: null,\n            max: null,\n            step: null\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            dateProperty('defaultValue', 'builder.fields.properties.defaultDate'),\n            dateProperty('min', 'builder.fields.properties.minDate'),\n            dateProperty('max', 'builder.fields.properties.maxDate'),\n            numberProperty('step', 'builder.fields.properties.step')\n        ]\n    },\n    {\n        id: 'inputDatetimeLocal',\n        nodeType: 'fmdb:inputDatetimeLocal',\n        labelKey: 'fields.types.inputDatetimeLocal',\n        defaultProperties: {\n            required: false,\n            defaultValue: null,\n            min: null,\n            max: null,\n            step: null\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            dateTimeProperty('defaultValue', 'builder.fields.properties.defaultDateTime'),\n            dateTimeProperty('min', 'builder.fields.properties.minDateTime'),\n            dateTimeProperty('max', 'builder.fields.properties.maxDateTime'),\n            numberProperty('step', 'builder.fields.properties.step')\n        ]\n    },\n    {\n        id: 'inputEmail',\n        nodeType: 'fmdb:inputEmail',\n        labelKey: 'fields.types.inputEmail',\n        defaultProperties: {\n            required: false,\n            autocomplete: false,\n            multiple: false,\n            placeholder: '',\n            defaultValue: '',\n            list: [],\n            pattern: '',\n            minLength: null,\n            maxLength: null\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            booleanProperty('autocomplete', 'builder.fields.properties.autocomplete'),\n            booleanProperty('multiple', 'builder.fields.properties.multiple'),\n            textProperty('placeholder', 'builder.fields.properties.placeholder'),\n            textProperty('defaultValue', 'builder.fields.properties.defaultValue'),\n            stringListProperty('list', 'builder.fields.properties.list', {\n                addLabelKey: 'builder.fields.properties.listAdd',\n                removeLabelKey: 'builder.fields.properties.listRemove',\n                itemLabelKey: 'builder.fields.properties.listItem'\n            }),\n            textProperty('pattern', 'builder.fields.properties.pattern'),\n            numberProperty('minLength', 'builder.fields.properties.minLength'),\n            numberProperty('maxLength', 'builder.fields.properties.maxLength')\n        ]\n    },\n    {\n        id: 'inputFile',\n        nodeType: 'fmdb:inputFile',\n        labelKey: 'fields.types.inputFile',\n        defaultProperties: {\n            accept: '',\n            multiple: false,\n            required: false\n        },\n        propertySchema: [\n            textProperty('accept', 'builder.fields.properties.accept'),\n            booleanProperty('multiple', 'builder.fields.properties.multiple'),\n            booleanProperty('required', 'builder.fields.properties.required')\n        ]\n    },\n    {\n        id: 'inputHidden',\n        nodeType: 'fmdb:inputHidden',\n        labelKey: 'fields.types.inputHidden',\n        defaultProperties: {\n            value: ''\n        },\n        propertySchema: [\n            textProperty('value', 'builder.fields.properties.value')\n        ]\n    },\n    {\n        id: 'inputRadio',\n        nodeType: 'fmdb:inputRadio',\n        labelKey: 'fields.types.inputRadio',\n        allowedParents: ['radioGroup'],\n        defaultProperties: {\n            defaultChecked: false,\n            value: ''\n        },\n        propertySchema: [\n            booleanProperty('defaultChecked', 'builder.fields.properties.defaultChecked'),\n            textProperty('value', 'builder.fields.properties.value')\n        ]\n    },\n    {\n        id: 'radioGroup',\n        nodeType: 'fmdb:radioGroup',\n        labelKey: 'fields.types.radioGroup',\n        defaultProperties: {\n            required: false\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required')\n        ]\n    },\n    {\n        id: 'inputText',\n        nodeType: 'fmdb:inputText',\n        labelKey: 'fields.types.inputText',\n        defaultProperties: {\n            required: false,\n            placeholder: '',\n            defaultValue: '',\n            list: [],\n            minLength: null,\n            maxLength: null\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            textProperty('placeholder', 'builder.fields.properties.placeholder'),\n            textProperty('defaultValue', 'builder.fields.properties.defaultValue'),\n            stringListProperty('list', 'builder.fields.properties.list', {\n                addLabelKey: 'builder.fields.properties.listAdd',\n                removeLabelKey: 'builder.fields.properties.listRemove',\n                itemLabelKey: 'builder.fields.properties.listItem'\n            }),\n            numberProperty('minLength', 'builder.fields.properties.minLength'),\n            numberProperty('maxLength', 'builder.fields.properties.maxLength')\n        ]\n    },\n    {\n        id: 'select',\n        nodeType: 'fmdb:select',\n        labelKey: 'fields.types.select',\n        defaultProperties: {\n            options: [\n                {\n                    label: 'Option 1',\n                    value: 'option-1',\n                    selected: false\n                }\n            ],\n            size: null,\n            required: false,\n            multiple: false,\n            disabled: false,\n            autofocus: false\n        },\n        propertySchema: [\n            numberProperty('size', 'builder.fields.properties.size'),\n            booleanProperty('required', 'builder.fields.properties.required'),\n            booleanProperty('multiple', 'builder.fields.properties.multiple'),\n            booleanProperty('disabled', 'builder.fields.properties.disabled'),\n            booleanProperty('autofocus', 'builder.fields.properties.autofocus')\n        ]\n    },\n    {\n        id: 'textarea',\n        nodeType: 'fmdb:textarea',\n        labelKey: 'fields.types.textarea',\n        defaultProperties: {\n            required: false,\n            placeholder: '',\n            defaultValue: '',\n            minLength: null,\n            maxLength: null,\n            rows: null,\n            resize: 'vertical'\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            textProperty('placeholder', 'builder.fields.properties.placeholder'),\n            multilineProperty('defaultValue', 'builder.fields.properties.defaultValue'),\n            numberProperty('minLength', 'builder.fields.properties.minLength'),\n            numberProperty('maxLength', 'builder.fields.properties.maxLength'),\n            numberProperty('rows', 'builder.fields.properties.rows'),\n            selectProperty('resize', 'builder.fields.properties.resize', resizeOptions, 'vertical')\n        ]\n    }\n];\n\nexport const getFieldDefinitionByNodeType = primaryNodeType => FIELD_TYPES.find(type => type.nodeType === primaryNodeType);\n\nexport const getFieldDefinition = typeId => FIELD_TYPES.find(type => type.id === typeId);\n\nexport const resolveFieldDefinition = identifier => getFieldDefinition(identifier) || getFieldDefinitionByNodeType(identifier);\n\nexport const getFieldTypeByNode = primaryNodeType => getFieldDefinitionByNodeType(primaryNodeType);\n\nexport const buildNewFieldTemplate = (typeId, label) => {\n    const definition = getFieldDefinition(typeId);\n    if (!definition) {\n        throw new Error(`Unknown field type ${typeId}`);\n    }\n\n    return {\n        id: `temp-${Date.now()}`,\n        label: label || '',\n        name: '',\n        description: '',\n        type: definition.id,\n        nodeType: definition.nodeType,\n        properties: {...definition.defaultProperties}\n    };\n};\n\nexport const getFieldPropertyNames = definition => {\n    const names = new Set();\n    if (!definition) {\n        return names;\n    }\n\n    (definition.propertySchema || []).forEach(descriptor => {\n        if (descriptor && descriptor.name) {\n            names.add(descriptor.name);\n        }\n    });\n\n    return names;\n};\n","import React, {createContext, useContext, useMemo} from 'react';\nimport PropTypes from 'prop-types';\nimport {getApolloClient} from '../apollo/client';\nimport {DEFAULT_WORKSPACE, FORM_NAMESPACE, getDefaultFormsPath} from '../constants/formBuilder';\n\nconst FormBuilderContext = createContext(null);\n\nexport const FormBuilderProvider = ({children}) => {\n    const {contextJsParameters = {}, formidableBuilder: runtimeConfig = {}} = window;\n    const {\n        lang = 'en',\n        siteKey = 'default',\n        language = contextJsParameters.lang,\n        workspace = DEFAULT_WORKSPACE\n    } = contextJsParameters;\n\n    const uiLanguage = runtimeConfig.uiLanguage || lang || language || 'en';\n    const resolvedSiteKey = runtimeConfig.siteKey || siteKey;\n    const formsRoot = runtimeConfig.formsPath || getDefaultFormsPath(resolvedSiteKey);\n    const rawWorkspace = runtimeConfig.workspace || workspace || DEFAULT_WORKSPACE;\n    const normalizedWorkspace = (() => {\n        const value = (rawWorkspace || DEFAULT_WORKSPACE).toUpperCase();\n        if (value === 'LIVE' || value === 'EDIT') {\n            return value;\n        }\n\n        return DEFAULT_WORKSPACE;\n    })();\n\n    const value = useMemo(() => ({\n        client: getApolloClient(),\n        namespace: FORM_NAMESPACE,\n        language: uiLanguage,\n        siteKey: resolvedSiteKey,\n        workspace: normalizedWorkspace,\n        formsPath: formsRoot\n    }), [uiLanguage, resolvedSiteKey, formsRoot, normalizedWorkspace]);\n\n    return (\n        <FormBuilderContext.Provider value={value}>\n            {children}\n        </FormBuilderContext.Provider>\n    );\n};\n\nFormBuilderProvider.propTypes = {\n    children: PropTypes.node.isRequired\n};\n\nexport const useFormBuilderContext = () => {\n    const ctx = useContext(FormBuilderContext);\n    if (!ctx) {\n        throw new Error('useFormBuilderContext must be used inside FormBuilderProvider');\n    }\n\n    return ctx;\n};\n","import React, {useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {Paper, Typography, Button, Input, Textarea as MoonstoneTextarea} from '@jahia/moonstone';\nimport {useTranslation} from 'react-i18next';\nimport {FORM_NAMESPACE} from '../../constants/formBuilder';\n\nconst INITIAL_STATE = {\n    title: '',\n    intro: ''\n};\n\nexport const CreateFormPanel = ({isOpen, onCancel, onSubmit, isLoading}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const [formData, setFormData] = useState(INITIAL_STATE);\n    const FormTextarea = MoonstoneTextarea || (({className = '', ...props}) => (\n        <textarea className={`fb-textarea ${className}`.trim()} {...props}/>\n    ));\n\n    useEffect(() => {\n        if (!isOpen) {\n            setFormData(INITIAL_STATE);\n        }\n    }, [isOpen]);\n\n    if (!isOpen) {\n        return null;\n    }\n\n    const handleChange = (field, value) => {\n        setFormData(prev => ({...prev, [field]: value}));\n    };\n\n    const isDisabled = !formData.title || isLoading;\n\n    return (\n        <Paper className=\"fb-panel\">\n            <div className=\"fb-panel__header\">\n                <Typography variant=\"heading\">{t('list.create.title')}</Typography>\n                <Typography variant=\"body\">{t('list.create.description')}</Typography>\n            </div>\n            <div className=\"fb-panel__body\">\n                <div className=\"fb-field\">\n                    <Typography variant=\"subheading\">{t('list.fields.title')}</Typography>\n                    <Input\n                        value={formData.title}\n                        placeholder={t('list.fields.titlePlaceholder')}\n                        size=\"big\"\n                        onChange={event => handleChange('title', event.target.value)}\n                    />\n                </div>\n                <div className=\"fb-field\">\n                    <Typography variant=\"subheading\">{t('list.fields.intro')}</Typography>\n                    <FormTextarea\n                        value={formData.intro}\n                        placeholder={t('list.fields.introPlaceholder')}\n                        rows={4}\n                        onChange={event => handleChange('intro', event.target.value)}\n                    />\n                </div>\n            </div>\n            <div className=\"fb-panel__actions\">\n                <Button label={t('actions.cancel')} size=\"big\" onClick={onCancel}/>\n                <Button\n                    label={isLoading ? t('actions.creating') : t('actions.create')}\n                    size=\"big\"\n                    color=\"accent\"\n                    isDisabled={isDisabled}\n                    onClick={() => onSubmit(formData)}\n                />\n            </div>\n        </Paper>\n    );\n};\n\nCreateFormPanel.propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n    isLoading: PropTypes.bool\n};\n\nCreateFormPanel.defaultProps = {\n    isLoading: false\n};\n","import {gql} from '@apollo/client';\n\nexport const PROPERTY_FIELDS_FRAGMENT = gql`\n    fragment PropertyFields on JCRProperty {\n        name\n        value\n        values\n        type\n    }\n`;\n\nexport const FIELD_CHILD_FRAGMENT = gql`\n    fragment FieldChildFragment on JCRNode {\n        uuid\n        name\n        path\n        primaryNodeType {\n            name\n        }\n        displayName(language: $language)\n        properties(language: $language) {\n            ...PropertyFields\n        }\n    }\n    ${PROPERTY_FIELDS_FRAGMENT}\n`;\n\nexport const FIELD_FRAGMENT = gql`\n    fragment FieldFragment on JCRNode {\n        uuid\n        name\n        path\n        primaryNodeType {\n            name\n        }\n        displayName(language: $language)\n        properties(language: $language) {\n            ...PropertyFields\n        }\n        children {\n            nodes {\n                ...FieldChildFragment\n            }\n        }\n    }\n    ${FIELD_CHILD_FRAGMENT}\n    ${PROPERTY_FIELDS_FRAGMENT}\n`;\n\nexport const STEP_FRAGMENT = gql`\n    fragment StepFragment on JCRNode {\n        uuid\n        name\n        path\n        primaryNodeType {\n            name\n        }\n        displayName(language: $language)\n        properties(language: $language, names: [\"jcr:description\"]) {\n            ...PropertyFields\n        }\n        children {\n            nodes {\n                ...FieldFragment\n            }\n        }\n    }\n    ${FIELD_FRAGMENT}\n    ${PROPERTY_FIELDS_FRAGMENT}\n`;\n\nexport const FORM_FRAGMENT = gql`\n    fragment FormFragment on JCRNode {\n        uuid\n        name\n        path\n        displayName(language: $language)\n        properties(language: $language, names: [\"intro\", \"jcr:title\"]) {\n            ...PropertyFields\n        }\n        children {\n            nodes {\n                ...StepFragment\n            }\n        }\n        fieldsetsContainers: children(names: [\"fieldsets\"]) {\n            nodes {\n                uuid\n                name\n                path\n                children {\n                    nodes {\n                        ...StepFragment\n                    }\n                }\n            }\n        }\n    }\n    ${STEP_FRAGMENT}\n    ${PROPERTY_FIELDS_FRAGMENT}\n`;\n","import {gql} from '@apollo/client';\nimport {FORM_FRAGMENT, PROPERTY_FIELDS_FRAGMENT} from './fragments';\n\nexport const GET_FORMS_LIST = gql`\n    query GetFormidableForms($workspace: Workspace!, $language: String!, $paths: [String!]!) {\n        jcr(workspace: $workspace) {\n            nodesByCriteria(criteria: {nodeType: \"fmdb:form\", paths: $paths}) {\n                nodes {\n                    uuid\n                    name\n                    path\n                    displayName(language: $language)\n                    properties(language: $language, names: [\"intro\", \"jcr:lastModified\"]) {\n                        ...PropertyFields\n                    }\n                    children(names: [\"fieldsets\"]) {\n                        nodes {\n                            children {\n                                nodes {\n                                    uuid\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    ${PROPERTY_FIELDS_FRAGMENT}\n`;\n\nexport const GET_FORM_DETAILS = gql`\n    query GetFormidableForm($workspace: Workspace!, $language: String!, $uuid: String!) {\n        jcr(workspace: $workspace) {\n            nodeById(uuid: $uuid) {\n                ...FormFragment\n            }\n        }\n    }\n    ${FORM_FRAGMENT}\n`;\n\nexport const GET_SITE_LANGUAGES = gql`\n    query GetSiteLanguages($workspace: Workspace!, $sitePath: String!) {\n        jcr(workspace: $workspace) {\n            nodeByPath(path: $sitePath) {\n                languages: property(name: \"j:languages\") {\n                    values\n                }\n            }\n        }\n    }\n`;\n","import {gql} from '@apollo/client';\n\nexport const CREATE_FORM_MUTATION = gql`\n    mutation CreateForm($workspace: Workspace!, $parentPath: String!, $name: String!, $language: String!, $title: String!, $intro: String) {\n        jcr(workspace: $workspace) {\n            addNode(\n                parentPathOrId: $parentPath\n                name: $name\n                primaryNodeType: \"fmdb:form\"\n                properties: [\n                    {name: \"jcr:title\", value: $title, language: $language}\n                    {name: \"intro\", value: $intro, language: $language}\n                ]\n            ) {\n                uuid\n            }\n        }\n    }\n`;\n\nexport const UPDATE_FORM_METADATA_MUTATION = gql`\n    mutation UpdateFormMetadata($workspace: Workspace!, $pathOrId: String!, $language: String!, $title: String!, $intro: String) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                mutateProperty(name: \"jcr:title\") {\n                    setValue(value: $title, language: $language)\n                }\n                mutateProperty(name: \"intro\") {\n                    setValue(value: $intro, language: $language)\n                }\n                uuid\n            }\n        }\n    }\n`;\n\nexport const DELETE_NODE_MUTATION = gql`\n    mutation DeleteNode($workspace: Workspace!, $pathOrId: String!) {\n        jcr(workspace: $workspace) {\n            deleteNode(pathOrId: $pathOrId)\n        }\n    }\n`;\n\nexport const ADD_STEP_MUTATION = gql`\n    mutation AddFieldset($workspace: Workspace!, $parentPath: String!, $name: String!, $language: String!, $title: String!, $description: String) {\n        jcr(workspace: $workspace) {\n            addNode(\n                parentPathOrId: $parentPath\n                name: $name\n                primaryNodeType: \"fmdb:fieldset\"\n                properties: [\n                    {name: \"jcr:title\", value: $title, language: $language}\n                    {name: \"jcr:description\", value: $description, language: $language}\n                ]\n            ) {\n                uuid\n            }\n        }\n    }\n`;\n\nexport const UPDATE_STEP_MUTATION = gql`\n    mutation UpdateFieldset($workspace: Workspace!, $pathOrId: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                setPropertiesBatch(properties: $properties) {\n                    property {\n                        name\n                    }\n                }\n                uuid\n            }\n        }\n    }\n`;\n\nexport const REORDER_STEPS_MUTATION = gql`\n    mutation ReorderSteps($workspace: Workspace!, $pathOrId: String!, $names: [String!]!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                reorderChildren(names: $names)\n            }\n        }\n    }\n`;\n\nexport const ADD_FIELD_MUTATION = gql`\n    mutation AddField($workspace: Workspace!, $parentPath: String!, $name: String!, $primaryNodeType: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: $workspace) {\n            addNode(\n                parentPathOrId: $parentPath\n                name: $name\n                primaryNodeType: $primaryNodeType\n                properties: $properties\n            ) {\n                uuid\n            }\n        }\n    }\n`;\n\nexport const UPDATE_FIELD_MUTATION = gql`\n    mutation UpdateField($workspace: Workspace!, $pathOrId: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                setPropertiesBatch(properties: $properties) {\n                    property {\n                        name\n                    }\n                }\n                uuid\n            }\n        }\n    }\n`;\n\nexport const REORDER_FIELDS_MUTATION = gql`\n    mutation ReorderFields($workspace: Workspace!, $pathOrId: String!, $names: [String!]!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                reorderChildren(names: $names)\n            }\n        }\n    }\n`;\n\nexport const RENAME_NODE_MUTATION = gql`\n    mutation RenameNode($workspace: Workspace!, $pathOrId: String!, $name: String!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                rename(name: $name)\n                uuid\n            }\n        }\n    }\n`;\n","export const slugify = value => {\n    if (!value) {\n        return '';\n    }\n\n    return value\n        .toString()\n        .trim()\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, '-')\n        .replace(/^-+|-+$/g, '')\n        .substring(0, 42);\n};\n","import {useCallback, useMemo} from 'react';\nimport {useMutation, useQuery} from '@apollo/client';\nimport {useFormBuilderContext} from '../contexts/FormBuilderContext';\nimport {GET_FORMS_LIST} from '../graphql/queries';\nimport {CREATE_FORM_MUTATION, DELETE_NODE_MUTATION} from '../graphql/mutations';\nimport {slugify} from '../utils/string';\n\nconst buildStepCount = node => {\n    const fieldsetContainer = ((node.children || {}).nodes || [])[0];\n    const steps = fieldsetContainer ? ((fieldsetContainer.children || {}).nodes || []) : [];\n    return steps.length;\n};\n\nexport const useFormList = () => {\n    const {workspace, language, formsPath} = useFormBuilderContext();\n    const {data, loading, refetch} = useQuery(GET_FORMS_LIST, {\n        variables: {workspace, language, paths: [formsPath]},\n        fetchPolicy: 'network-only'\n    });\n\n    const [createFormMutation, {loading: creating}] = useMutation(CREATE_FORM_MUTATION);\n    const [deleteMutation, {loading: deleting}] = useMutation(DELETE_NODE_MUTATION);\n\n    const forms = useMemo(() => {\n        const nodes = data?.jcr?.nodesByCriteria?.nodes || [];\n\n        return nodes.map(node => ({\n            id: node.uuid,\n            name: node.name,\n            path: node.path,\n            title: node.displayName || node.name,\n            intro: node.properties?.find(property => property.name === 'intro')?.value || '',\n            steps: buildStepCount(node),\n            updatedAt: node.properties?.find(property => property.name === 'jcr:lastModified')?.value || null\n        }));\n    }, [data]);\n\n    const createForm = useCallback(async form => {\n        const name = slugify(form.title) || `form-${Date.now()}`;\n\n        await createFormMutation({\n            variables: {\n                workspace,\n                parentPath: formsPath,\n                name,\n                language,\n                title: form.title,\n                intro: form.intro || ''\n            }\n        });\n\n        await refetch();\n    }, [createFormMutation, formsPath, language, refetch, workspace]);\n\n    const deleteForm = useCallback(async pathOrId => {\n        await deleteMutation({\n            variables: {\n                workspace,\n                pathOrId\n            }\n        });\n\n        await refetch();\n    }, [deleteMutation, refetch, workspace]);\n\n    return {\n        forms,\n        loading: loading || creating || deleting,\n        createForm,\n        deleteForm,\n        refetch\n    };\n};\n","import React, {useMemo, useState} from 'react';\nimport {useHistory, useRouteMatch} from 'react-router';\nimport {Button, Chip, LayoutContent, Loader, Paper, Typography, Header} from '@jahia/moonstone';\nimport {useTranslation} from 'react-i18next';\nimport {CreateFormPanel} from './CreateFormPanel';\nimport {useFormList} from '../../hooks/useFormList';\nimport {FORM_NAMESPACE} from '../../constants/formBuilder';\nimport {useFormBuilderContext} from '../../contexts/FormBuilderContext';\nimport {Copy, Delete as DeleteIcon, Edit as EditIcon, Setting as SettingIcon, ViewStream, Visibility} from '@jahia/moonstone/dist/icons';\nimport './FormListView.scss';\n\nexport const FormListView = () => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const history = useHistory();\n    const match = useRouteMatch();\n    const {language} = useFormBuilderContext();\n    const {forms, loading, createForm, deleteForm, refetch} = useFormList();\n    const [createOpen, setCreateOpen] = useState(false);\n\n    const basePath = (match?.url || '/form-builder').replace(/\\*$/, '');\n\n    const navigateToForm = form => {\n        history.push({\n            pathname: `${basePath}/${form.id}`,\n            state: {formTitle: form.title}\n        });\n    };\n\n    const handleDelete = async form => {\n        /* eslint-disable-next-line no-alert */\n        const confirmed = window.confirm(t('list.actions.deleteConfirm', {title: form.title}));\n        if (!confirmed) {\n            return;\n        }\n\n        await deleteForm(form.path);\n    };\n\n    const formatUpdatedAt = useMemo(() => {\n        let formatter = null;\n        try {\n            formatter = new Intl.DateTimeFormat(language || 'en', {\n                dateStyle: 'medium',\n                timeStyle: 'short'\n            });\n        } catch (error) {\n            console.warn('Unable to format date for locale', language, error);\n        }\n\n        return value => {\n            if (!value) {\n                return t('list.cards.neverUpdated');\n            }\n\n            try {\n                return formatter ? formatter.format(new Date(value)) : value;\n            } catch {\n                return value;\n            }\n        };\n    }, [language, t]);\n\n    const navigateToPreview = form => {\n        history.push(`${basePath}/${form.id}?view=preview`);\n    };\n\n    const navigateToSubmissions = form => {\n        history.push(`${basePath}/${form.id}?view=submissions`);\n    };\n\n    const navigateToSettings = form => {\n        history.push(`${basePath}/${form.id}?view=settings`);\n    };\n\n    const handleDuplicate = async form => {\n        const duplicateTitle = t('list.cards.duplicateName', {title: form.title});\n        await createForm({\n            title: duplicateTitle,\n            intro: form.intro\n        });\n    };\n\n    return (\n        <LayoutContent\n            header={(\n                <Header\n                    title={t('list.title')}\n                    subtitle={t('list.subtitle')}\n                    mainActions={[\n                        <Button\n                            key=\"refresh\"\n                            size=\"big\"\n                            label={t('actions.refresh')}\n                            isDisabled={loading}\n                            onClick={() => refetch()}\n                        />,\n                        <Button\n                            key=\"createForm\"\n                            color=\"accent\"\n                            size=\"big\"\n                            label={t('actions.create')}\n                            onClick={() => setCreateOpen(true)}\n                        />\n                    ]}\n                />\n            )}\n            content={(\n                <div className=\"fb-list\">\n                    {createOpen && (\n                        <div className=\"fb-list__section\">\n                            <CreateFormPanel\n                                isOpen={createOpen}\n                                isLoading={loading}\n                                onCancel={() => setCreateOpen(false)}\n                                onSubmit={async payload => {\n                                    await createForm(payload);\n                                    setCreateOpen(false);\n                                }}\n                            />\n                        </div>\n                    )}\n\n                    <Paper className=\"fb-list__panel fb-list__section\">\n                        {loading && (\n                            <div className=\"fb-list__loading\">\n                                <Loader size=\"big\"/>\n                                <Typography variant=\"body\">{t('states.loading')}</Typography>\n                            </div>\n                        )}\n\n                        {!loading && forms.length === 0 && (\n                            <div className=\"fb-list__empty\">\n                                <Typography variant=\"body\">{t('list.empty')}</Typography>\n                            </div>\n                        )}\n\n                        {!loading && forms.length > 0 && (\n                            <div className=\"fb-card-grid\">\n                                {forms.map(form => (\n                                    <Paper key={form.id} className=\"fb-card\">\n                                        <div className=\"fb-card__header\">\n                                            <div className=\"fb-card__title\">\n                                                <Typography variant=\"subheading\">{form.title}</Typography>\n                                                <Typography variant=\"caption\">{form.name}</Typography>\n                                            </div>\n                                            <Chip\n                                                color=\"accent\"\n                                                size=\"small\"\n                                                label={t('list.columns.stepCount', {count: form.steps})}\n                                            />\n                                        </div>\n\n                                        <div className=\"fb-card__intro\">\n                                            {form.intro ? (\n                                                <div\n                                                    /* eslint-disable-next-line react/no-danger */\n                                                    dangerouslySetInnerHTML={{__html: form.intro}}\n                                                    className=\"fb-card__intro-html\"\n                                                />\n                                            ) : (\n                                                <Typography variant=\"body\">{t('list.cards.introFallback')}</Typography>\n                                            )}\n                                        </div>\n\n                                        <div className=\"fb-card__meta\">\n                                            <div className=\"fb-card__meta-item\">\n                                                <Typography variant=\"caption\">{t('list.cards.updated')}</Typography>\n                                                <Typography variant=\"body\">{formatUpdatedAt(form.updatedAt)}</Typography>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"fb-card__actions\">\n                                            {[\n                                                [\n                                                    {\n                                                        key: 'preview',\n                                                        label: t('actions.preview'),\n                                                        onClick: () => navigateToPreview(form),\n                                                        icon: Visibility\n                                                    },\n                                                    {\n                                                        key: 'submissions',\n                                                        label: t('actions.submissions'),\n                                                        onClick: () => navigateToSubmissions(form),\n                                                        icon: ViewStream\n                                                    },\n                                                    {\n                                                        key: 'settings',\n                                                        label: t('actions.settings'),\n                                                        onClick: () => navigateToSettings(form),\n                                                        icon: SettingIcon\n                                                    }\n                                                ],\n                                                [\n                                                    {\n                                                        key: 'duplicate',\n                                                        label: t('actions.duplicate'),\n                                                        onClick: () => handleDuplicate(form),\n                                                        icon: Copy\n                                                    },\n                                                    {\n                                                        key: 'edit',\n                                                        label: t('actions.edit'),\n                                                        onClick: () => navigateToForm(form),\n                                                        icon: EditIcon\n                                                    },\n                                                    {\n                                                        key: 'delete',\n                                                        label: t('actions.delete'),\n                                                        onClick: () => handleDelete(form),\n                                                        icon: DeleteIcon,\n                                                        color: 'danger'\n                                                    }\n                                                ]\n                                            ].map(row => (\n                                                <div key={`actions-row-${row.map(action => action.key).join('-')}`} className=\"fb-card__actions-row\">\n                                                    {row.map(action => {\n                                                        const IconComponent = action.icon;\n                                                        return (\n                                                            <Button\n                                                                key={action.key}\n                                                                size=\"default\"\n                                                                variant=\"ghost\"\n                                                                color={action.color || 'default'}\n                                                                icon={<IconComponent size=\"small\"/>}\n                                                                label={action.label}\n                                                                onClick={action.onClick}\n                                                            />\n                                                        );\n                                                    })}\n                                                </div>\n                                            ))}\n                                        </div>\n                                    </Paper>\n                                ))}\n                            </div>\n                        )}\n                    </Paper>\n                </div>\n            )}\n        />\n    );\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Button, Typography, Paper} from '@jahia/moonstone';\nimport {DndContext, PointerSensor, useSensor, useSensors} from '@dnd-kit/core';\nimport {SortableContext, verticalListSortingStrategy, useSortable, arrayMove} from '@dnd-kit/sortable';\nimport {CSS} from '@dnd-kit/utilities';\nimport {useTranslation} from 'react-i18next';\nimport {FORM_NAMESPACE} from '../../../constants/formBuilder';\n\nconst StepItem = ({step, isActive, onSelect, onRemove}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const {attributes, listeners, setNodeRef, transform, transition} = useSortable({id: step.id});\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition\n    };\n\n    return (\n        <li ref={setNodeRef} style={style} className={`fb-step${isActive ? ' fb-step--active' : ''}`} {...attributes} {...listeners}>\n            <button type=\"button\" className=\"fb-step__button\" onClick={() => onSelect(step.id)}>\n                <Typography variant=\"body\" weight=\"bold\">{step.label}</Typography>\n                <Typography variant=\"caption\">{step.fields.length} fields</Typography>\n            </button>\n            <Button label={t('builder.sidebar.removeStep')} className=\"fb-step__delete\" onClick={() => onRemove(step.id)}/>\n        </li>\n    );\n};\n\nStepItem.propTypes = {\n    step: PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        label: PropTypes.string.isRequired,\n        fields: PropTypes.array\n    }).isRequired,\n    isActive: PropTypes.bool.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    onRemove: PropTypes.func.isRequired\n};\n\nexport const Sidebar = ({steps, activeStepId, onSelectStep, onAddStep, onRemoveStep, onReorderSteps}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const sensors = useSensors(useSensor(PointerSensor, {activationConstraint: {distance: 8}}));\n\n    const handleDragEnd = event => {\n        const {active, over} = event;\n        if (!over || active.id === over.id) {\n            return;\n        }\n\n        const previousIndex = steps.findIndex(step => step.id === active.id);\n        const nextIndex = steps.findIndex(step => step.id === over.id);\n        if (previousIndex === -1 || nextIndex === -1) {\n            return;\n        }\n\n        const reordered = arrayMove(steps, previousIndex, nextIndex);\n        onReorderSteps(reordered);\n    };\n\n    return (\n        <Paper className=\"fb-sidebar\">\n            <div className=\"fb-sidebar__header\">\n                <Typography variant=\"subheading\">{t('builder.sidebar.title')}</Typography>\n                <Button color=\"accent\" label={t('builder.sidebar.addStep')} onClick={onAddStep}/>\n            </div>\n            <DndContext sensors={sensors} onDragEnd={handleDragEnd}>\n                <SortableContext items={steps.map(step => step.id)} strategy={verticalListSortingStrategy}>\n                    <ul className=\"fb-step-list\">\n                        {steps.map(step => (\n                            <StepItem\n                                key={step.id}\n                                step={step}\n                                isActive={step.id === activeStepId}\n                                onSelect={onSelectStep}\n                                onRemove={onRemoveStep}\n                            />\n                        ))}\n                    </ul>\n                </SortableContext>\n            </DndContext>\n        </Paper>\n    );\n};\n\nSidebar.propTypes = {\n    steps: PropTypes.array.isRequired,\n    activeStepId: PropTypes.string,\n    onSelectStep: PropTypes.func.isRequired,\n    onAddStep: PropTypes.func.isRequired,\n    onRemoveStep: PropTypes.func.isRequired,\n    onReorderSteps: PropTypes.func.isRequired\n};\n\nSidebar.defaultProps = {\n    activeStepId: null\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Button, Input, Paper, Typography} from '@jahia/moonstone';\nimport {DndContext, PointerSensor, useSensor, useSensors} from '@dnd-kit/core';\nimport {SortableContext, arrayMove, useSortable, verticalListSortingStrategy} from '@dnd-kit/sortable';\nimport {CSS} from '@dnd-kit/utilities';\nimport {useTranslation} from 'react-i18next';\nimport {FIELD_TYPES, FORM_NAMESPACE} from '../../../constants/formBuilder';\nimport {\n    Calendar,\n    CheckboxChecked,\n    CloudUpload,\n    Clock,\n    Follow,\n    Rocket,\n    MultipleListSelector,\n    Hidden,\n    ListSelection,\n    Palette,\n    Paragraph,\n    RadioChecked,\n    Text as TextIcon\n} from '@jahia/moonstone/dist/icons';\n\nconst FieldRow = ({field, isActive, onSelect, onRemove}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const {attributes, listeners, setNodeRef, transform, transition} = useSortable({id: field.id});\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition\n    };\n\n    return (\n        <li\n            ref={setNodeRef}\n            style={style}\n            className={`fb-field-row${isActive ? ' fb-field-row--active' : ''}`}\n            {...attributes}\n            {...listeners}\n        >\n            <button type=\"button\" className=\"fb-field-row__button\" onClick={() => onSelect(field.id)}>\n                <Typography variant=\"body\" weight=\"bold\">{field.label || field.name}</Typography>\n                <Typography variant=\"caption\">{field.type}</Typography>\n            </button>\n            <Button label={t('builder.fields.remove')} onClick={() => onRemove(field.id)}/>\n        </li>\n    );\n};\n\nFieldRow.propTypes = {\n    field: PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        label: PropTypes.string,\n        name: PropTypes.string.isRequired,\n        type: PropTypes.string\n    }).isRequired,\n    isActive: PropTypes.bool.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    onRemove: PropTypes.func.isRequired\n};\n\nconst FIELD_TYPE_ICONS = {\n    inputButton: Follow,\n    inputCheckbox: CheckboxChecked,\n    checkboxGroup: MultipleListSelector,\n    inputColor: Palette,\n    inputDate: Calendar,\n    inputDatetimeLocal: Clock,\n    inputEmail: Rocket,\n    inputFile: CloudUpload,\n    inputHidden: Hidden,\n    radioGroup: RadioChecked,\n    inputText: TextIcon,\n    select: ListSelection,\n    textarea: Paragraph\n};\n\nexport const StepEditor = ({\n    step,\n    onUpdateStep,\n    onAddField,\n    onRemoveField,\n    onSelectField,\n    onReorderFields,\n    activeFieldId\n}) => {\n    const sensors = useSensors(useSensor(PointerSensor, {activationConstraint: {distance: 8}}));\n    const {t} = useTranslation(FORM_NAMESPACE);\n\n    if (!step) {\n        return (\n            <Paper className=\"fb-step-editor\">\n                <Typography variant=\"body\">{t('builder.step.empty')}</Typography>\n            </Paper>\n        );\n    }\n\n    const handleDragEnd = event => {\n        const {active, over} = event;\n        if (!over || active.id === over.id) {\n            return;\n        }\n\n        const previousIndex = step.fields.findIndex(field => field.id === active.id);\n        const nextIndex = step.fields.findIndex(field => field.id === over.id);\n        if (previousIndex === -1 || nextIndex === -1) {\n            return;\n        }\n\n        onReorderFields(step.id, arrayMove(step.fields, previousIndex, nextIndex));\n    };\n\n    return (\n        <Paper className=\"fb-step-editor\">\n            <div className=\"fb-step-editor__header\">\n                <Typography variant=\"heading\">{step.label}</Typography>\n            </div>\n            <div className=\"fb-step-editor__form\">\n                <label className=\"fb-field\">\n                    <Typography variant=\"subheading\">{t('builder.step.label')}</Typography>\n                    <Input value={step.label} onChange={event => onUpdateStep(step.id, {label: event.target.value})}/>\n                </label>\n                <label className=\"fb-field\">\n                    <Typography variant=\"subheading\">{t('builder.step.description')}</Typography>\n                    <textarea\n                        rows={3}\n                        className=\"fb-textarea\"\n                        value={step.description}\n                        onChange={event => onUpdateStep(step.id, {description: event.target.value})}\n                    />\n                </label>\n            </div>\n\n            <div className=\"fb-step-editor__actions\">\n                <Typography variant=\"subheading\">{t('builder.fields.addField')}</Typography>\n                <div className=\"fb-field-type-grid\">\n                    {FIELD_TYPES.filter(type => !type.allowedParents || type.allowedParents.includes('step')).map(type => {\n                        const IconComponent = FIELD_TYPE_ICONS[type.id];\n                        return (\n                            <Button\n                                key={type.id}\n                                label={t(`fields.types.${type.id}`)}\n                                icon={IconComponent ? <IconComponent size=\"small\"/> : null}\n                                onClick={() => onAddField(step.id, type.id)}\n                            />\n                        );\n                    })}\n                </div>\n            </div>\n\n            <div className=\"fb-step-editor__list\">\n                <Typography variant=\"subheading\">{t('builder.fields.title')}</Typography>\n                {step.fields.length === 0 && (\n                    <Typography variant=\"body\">{t('builder.fields.empty')}</Typography>\n                )}\n\n                {step.fields.length > 0 && (\n                    <DndContext sensors={sensors} onDragEnd={handleDragEnd}>\n                        <SortableContext items={step.fields.map(field => field.id)} strategy={verticalListSortingStrategy}>\n                            <ul className=\"fb-field-list\">\n                                {step.fields.map(field => (\n                                    <FieldRow\n                                        key={field.id}\n                                        field={field}\n                                        isActive={field.id === activeFieldId}\n                                        onSelect={onSelectField}\n                                        onRemove={fieldId => onRemoveField(step.id, fieldId)}\n                                    />\n                                ))}\n                            </ul>\n                        </SortableContext>\n                    </DndContext>\n                )}\n            </div>\n        </Paper>\n    );\n};\n\nStepEditor.propTypes = {\n    step: PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        label: PropTypes.string,\n        description: PropTypes.string,\n        fields: PropTypes.array\n    }),\n    onUpdateStep: PropTypes.func.isRequired,\n    onAddField: PropTypes.func.isRequired,\n    onRemoveField: PropTypes.func.isRequired,\n    onSelectField: PropTypes.func.isRequired,\n    onReorderFields: PropTypes.func.isRequired,\n    activeFieldId: PropTypes.string\n};\n\nStepEditor.defaultProps = {\n    step: null,\n    activeFieldId: null\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Button, Checkbox, Dropdown, Input, Paper, Textarea as MoonstoneTextarea, Typography} from '@jahia/moonstone';\nimport {useTranslation} from 'react-i18next';\nimport {FIELD_TYPES, FORM_NAMESPACE} from '../../../constants/formBuilder';\n\nexport const FieldEditor = ({field, stepId, onChangeField, onAddNestedField}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const FormTextarea = MoonstoneTextarea || (({className = '', ...props}) => (\n        <textarea className={`moonstone-textarea ${className}`.trim()} {...props}/>\n    ));\n\n    if (!field) {\n        return (\n            <Paper className=\"fb-field-editor\">\n                <Typography variant=\"body\">{t('builder.fields.selectField')}</Typography>\n            </Paper>\n        );\n    }\n\n    const updateField = partial => {\n        onChangeField(stepId, field.id, partial);\n    };\n\n    const updateProperty = (name, value) => {\n        updateField({\n            properties: {\n                ...field.properties,\n                [name]: value\n            }\n        });\n    };\n\n    const definition = FIELD_TYPES.find(type => type.id === field.type);\n    const propertySchema = definition?.propertySchema || [];\n    const booleanDescriptors = [];\n    const beforeBoolean = [];\n    const afterBoolean = [];\n    let seenBoolean = false;\n    propertySchema.forEach(descriptor => {\n        if (descriptor.type === 'boolean') {\n            booleanDescriptors.push(descriptor);\n            seenBoolean = true;\n        } else if (!seenBoolean) {\n            beforeBoolean.push(descriptor);\n        } else {\n            afterBoolean.push(descriptor);\n        }\n    });\n    const typeLabel = definition ? t(definition.labelKey) : field.type;\n\n    const getStringArray = value => (Array.isArray(value) ? value : []);\n\n    const renderStringListField = descriptor => {\n        const items = getStringArray(field.properties[descriptor.name]);\n        const addLabel = descriptor.addLabelKey ? t(descriptor.addLabelKey) : t('builder.fields.properties.listAdd');\n        const removeLabel = descriptor.removeLabelKey ? t(descriptor.removeLabelKey) : t('builder.fields.properties.listRemove');\n        const itemLabel = index => {\n            if (descriptor.itemLabelKey) {\n                return t(descriptor.itemLabelKey, {index});\n            }\n\n            return t('builder.fields.properties.listItem', {index});\n        };\n\n        return (\n            <div key={descriptor.name} className=\"fb-field\">\n                <Typography variant=\"subheading\">{t(descriptor.labelKey)}</Typography>\n                <ul className=\"fb-options\">\n                    {items.map((option, index) => {\n                        const optionKey = `${field.id}-${descriptor.name}-${index}`;\n                        return (\n                            <li key={optionKey} className=\"fb-option-row\">\n                                <Input\n                                    value={option}\n                                    placeholder={itemLabel(index + 1)}\n                                    onChange={event => {\n                                        const next = [...items];\n                                        next[index] = event.target.value;\n                                        updateProperty(descriptor.name, next);\n                                    }}\n                                />\n                                <Button\n                                    label={removeLabel}\n                                    onClick={() => {\n                                        const next = items.filter((_, idx) => idx !== index);\n                                        updateProperty(descriptor.name, next);\n                                    }}\n                                />\n                            </li>\n                        );\n                    })}\n                </ul>\n                <Button\n                    label={addLabel}\n                    onClick={() => updateProperty(descriptor.name, [...items, ''])}\n                />\n            </div>\n        );\n    };\n\n    const renderPropertyField = descriptor => {\n        const value = field.properties?.[descriptor.name];\n        const label = t(descriptor.labelKey);\n        const key = `${field.id}-${descriptor.name}`;\n\n        switch (descriptor.type) {\n            case 'boolean':\n                return (\n                    <div key={key} className=\"fb-field fb-field--inline\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <Checkbox\n                            id={`${key}-checkbox`}\n                            checked={Boolean(value)}\n                            aria-label={label}\n                            onChange={(event, data, checked) => updateProperty(descriptor.name, checked)}\n                        />\n                    </div>\n                );\n            case 'text':\n                return (\n                    <div key={key} className=\"fb-field\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <Input\n                            value={value || ''}\n                            placeholder={descriptor.placeholderKey ? t(descriptor.placeholderKey) : undefined}\n                            onChange={event => updateProperty(descriptor.name, event.target.value)}\n                        />\n                    </div>\n                );\n            case 'multiline':\n                return (\n                    <div key={key} className=\"fb-field\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <FormTextarea\n                            rows={4}\n                            value={value || ''}\n                            onChange={event => updateProperty(descriptor.name, event.target.value)}\n                        />\n                    </div>\n                );\n            case 'number':\n                return (\n                    <div key={key} className=\"fb-field\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <Input\n                            type=\"number\"\n                            value={value === null || value === undefined ? '' : value}\n                            onChange={event => {\n                                const nextValue = event.target.value === '' ? null : Number(event.target.value);\n                                updateProperty(descriptor.name, Number.isNaN(nextValue) ? null : nextValue);\n                            }}\n                        />\n                    </div>\n                );\n            case 'date':\n                return (\n                    <div key={key} className=\"fb-field\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <Input\n                            type=\"date\"\n                            value={value || ''}\n                            onChange={event => updateProperty(descriptor.name, event.target.value || null)}\n                        />\n                    </div>\n                );\n            case 'datetime':\n                return (\n                    <div key={key} className=\"fb-field\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <Input\n                            type=\"datetime-local\"\n                            value={value || ''}\n                            onChange={event => updateProperty(descriptor.name, event.target.value || null)}\n                        />\n                    </div>\n                );\n            case 'select': {\n                const data = (descriptor.options || []).map(option => ({\n                    value: option.value,\n                    label: t(option.labelKey)\n                }));\n                const selectedValue = value || descriptor.defaultValue || data[0]?.value || '';\n\n                return (\n                    <div key={key} className=\"fb-field\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <Dropdown\n                            data={data}\n                            value={selectedValue}\n                            placeholder={t('builder.fields.properties.selectPlaceholder')}\n                            onChange={(event, item) => updateProperty(descriptor.name, item.value)}\n                        />\n                    </div>\n                );\n            }\n\n            case 'stringList':\n                return renderStringListField(descriptor);\n            default:\n                return null;\n        }\n    };\n\n    const renderCheckboxOptions = () => {\n        if (field.type !== 'checkboxGroup') {\n            return null;\n        }\n\n        const options = field.fields || [];\n        const updateNestedField = (optionId, partial) => onChangeField(stepId, optionId, partial);\n        const updateNestedProperties = (optionId, propertiesPartial) => {\n            const option = options.find(item => item.id === optionId);\n            const nextProps = {...(option?.properties || {}), ...propertiesPartial};\n            updateNestedField(optionId, {properties: nextProps});\n        };\n\n        return (\n            <div className=\"fb-field fb-option-section\">\n                <div className=\"fb-option-section__header\">\n                    <Typography variant=\"subheading\">{t('builder.fields.checkboxGroup.optionsTitle')}</Typography>\n                    <Button\n                        color=\"accent\"\n                        label={t('builder.fields.checkboxGroup.addOption')}\n                        onClick={() => {\n                            const index = options.length + 1;\n                            const optionLabel = t('builder.fields.checkboxGroup.optionLabel', {index});\n                            onAddNestedField({\n                                parentPath: field.path,\n                                typeId: 'inputCheckbox',\n                                label: optionLabel,\n                                properties: {\n                                    value: `option-${index}`,\n                                    defaultChecked: false\n                                }\n                            });\n                        }}\n                    />\n                </div>\n                {options.length === 0 && (\n                    <Typography variant=\"body\">{t('builder.fields.checkboxGroup.empty')}</Typography>\n                )}\n                {options.length > 0 && (\n                    <div className=\"fb-option-card-list\">\n                        {options.map((option, idx) => (\n                            <div key={option.id} className=\"fb-option-card\">\n                                <div className=\"fb-option-card__header\">\n                                    <Typography variant=\"body\">{t('builder.fields.checkboxGroup.optionLabel', {index: idx + 1})}</Typography>\n                                </div>\n                                <div className=\"fb-option-card__grid\">\n                                    <div className=\"fb-field\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionLabelLabel')}</Typography>\n                                        <Input\n                                            value={option.label || ''}\n                                            onChange={event => updateNestedField(option.id, {label: event.target.value})}\n                                        />\n                                    </div>\n                                    <div className=\"fb-field\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionValueLabel')}</Typography>\n                                        <Input\n                                            value={option.properties?.value || ''}\n                                            onChange={event => updateNestedProperties(option.id, {value: event.target.value})}\n                                        />\n                                    </div>\n                                    <div className=\"fb-field fb-field--inline\">\n                                        <Typography variant=\"caption\">{t('builder.fields.properties.defaultChecked')}</Typography>\n                                        <Checkbox\n                                            checked={Boolean(option.properties?.defaultChecked)}\n                                            onChange={(event, data, checked) => updateNestedProperties(option.id, {defaultChecked: checked})}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n        );\n    };\n\n    const renderRadioOptions = () => {\n        if (field.type !== 'radioGroup') {\n            return null;\n        }\n\n        const options = field.fields || [];\n        const updateNestedField = (optionId, partial) => onChangeField(stepId, optionId, partial);\n        const updateNestedProperties = (optionId, propertiesPartial) => {\n            const option = options.find(item => item.id === optionId);\n            const nextProps = {...(option?.properties || {}), ...propertiesPartial};\n            updateNestedField(optionId, {properties: nextProps});\n        };\n\n        const handleDefaultToggle = (optionId, checked) => {\n            options.forEach(item => {\n                const isTarget = item.id === optionId;\n                const currentValue = Boolean(item.properties?.defaultChecked);\n                if (isTarget) {\n                    if (currentValue !== checked) {\n                        updateNestedProperties(item.id, {defaultChecked: checked});\n                    }\n                } else if (checked && currentValue) {\n                    updateNestedProperties(item.id, {defaultChecked: false});\n                }\n            });\n        };\n\n        return (\n            <div className=\"fb-field fb-option-section\">\n                <div className=\"fb-option-section__header\">\n                    <Typography variant=\"subheading\">{t('builder.fields.radioGroup.optionsTitle')}</Typography>\n                    <Button\n                        color=\"accent\"\n                        label={t('builder.fields.radioGroup.addOption')}\n                        onClick={() => {\n                            const index = options.length + 1;\n                            const optionLabel = t('builder.fields.radioGroup.optionLabel', {index});\n                            onAddNestedField({\n                                parentPath: field.path,\n                                typeId: 'inputRadio',\n                                label: optionLabel,\n                                properties: {\n                                    value: `option-${index}`,\n                                    defaultChecked: false\n                                }\n                            });\n                        }}\n                    />\n                </div>\n                {options.length === 0 && (\n                    <Typography variant=\"body\">{t('builder.fields.radioGroup.empty')}</Typography>\n                )}\n                {options.length > 0 && (\n                    <div className=\"fb-option-card-list\">\n                        {options.map((option, idx) => (\n                            <div key={option.id} className=\"fb-option-card\">\n                                <div className=\"fb-option-card__header\">\n                                    <Typography variant=\"body\">{t('builder.fields.radioGroup.optionLabel', {index: idx + 1})}</Typography>\n                                </div>\n                                <div className=\"fb-option-card__grid\">\n                                    <div className=\"fb-field\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionLabelLabel')}</Typography>\n                                        <Input\n                                            value={option.label || ''}\n                                            onChange={event => updateNestedField(option.id, {label: event.target.value})}\n                                        />\n                                    </div>\n                                    <div className=\"fb-field\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionValueLabel')}</Typography>\n                                        <Input\n                                            value={option.properties?.value || ''}\n                                            onChange={event => updateNestedProperties(option.id, {value: event.target.value})}\n                                        />\n                                    </div>\n                                    <div className=\"fb-field fb-field--inline\">\n                                        <Typography variant=\"caption\">{t('builder.fields.properties.defaultChecked')}</Typography>\n                                        <Checkbox\n                                            checked={Boolean(option.properties?.defaultChecked)}\n                                            onChange={(event, data, checked) => handleDefaultToggle(option.id, checked)}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n        );\n    };\n\n    const renderSelectOptions = () => {\n        if (field.type !== 'select') {\n            return null;\n        }\n\n        const options = Array.isArray(field.properties?.options) ? field.properties.options : [];\n        const allowMultiple = Boolean(field.properties?.multiple);\n\n        const updateOptions = next => updateProperty('options', next);\n\n        const updateOption = (index, partial) => {\n            updateOptions(options.map((option, idx) => (idx === index ? {...option, ...partial} : option)));\n        };\n\n        const toggleSelected = index => {\n            updateOptions(options.map((option, idx) => {\n                if (idx === index) {\n                    return {...option, selected: !option.selected};\n                }\n\n                if (!allowMultiple && idx !== index) {\n                    return {...option, selected: false};\n                }\n\n                return option;\n            }));\n        };\n\n        const removeOption = index => {\n            updateOptions(options.filter((_, idx) => idx !== index));\n        };\n\n        const addOption = () => {\n            const index = options.length + 1;\n            updateOptions([\n                ...options,\n                {\n                    label: t('builder.fields.select.optionLabel', {index}),\n                    value: `option-${Date.now()}`,\n                    selected: false\n                }\n            ]);\n        };\n\n        return (\n            <div className=\"fb-field fb-option-section\">\n                <div className=\"fb-option-section__header\">\n                    <Typography variant=\"subheading\">{t('builder.fields.select.optionsTitle')}</Typography>\n                    <Button color=\"accent\" label={t('builder.fields.select.addOption')} onClick={addOption}/>\n                </div>\n                {options.length === 0 && (\n                    <Typography variant=\"body\">{t('builder.fields.select.empty')}</Typography>\n                )}\n                {options.length > 0 && (\n                    <div className=\"fb-option-card-list\">\n                        {options.map((option, idx) => (\n                            <div key={`select-option-${option.value || idx}`} className=\"fb-option-card\">\n                                <div className=\"fb-option-card__header\">\n                                    <Typography variant=\"body\">{t('builder.fields.select.optionLabel', {index: idx + 1})}</Typography>\n                                    <Button label={t('builder.fields.properties.listRemove')} onClick={() => removeOption(idx)}/>\n                                </div>\n                                <div className=\"fb-option-card__grid\">\n                                    <div className=\"fb-field\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionLabelLabel')}</Typography>\n                                        <Input value={option.label || ''} onChange={event => updateOption(idx, {label: event.target.value})}/>\n                                    </div>\n                                    <div className=\"fb-field\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionValueLabel')}</Typography>\n                                        <Input value={option.value || ''} onChange={event => updateOption(idx, {value: event.target.value})}/>\n                                    </div>\n                                    <div className=\"fb-field fb-field--inline\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionSelected')}</Typography>\n                                        <Checkbox checked={Boolean(option.selected)} onChange={() => toggleSelected(idx)}/>\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n        );\n    };\n\n    return (\n        <Paper className=\"fb-field-editor\">\n            <div className=\"fb-field-editor__header\">\n                <Typography variant=\"subheading\">{t('builder.fields.editorTitle')}</Typography>\n                <Typography variant=\"caption\" className=\"fb-field-editor__type\">\n                    {typeLabel}\n                </Typography>\n            </div>\n\n            <div className=\"fb-field\">\n                <Typography variant=\"subheading\">{t('builder.fields.label')}</Typography>\n                <Input\n                    value={field.label || ''}\n                    onChange={event => {\n                        const nextLabel = event.target.value;\n                        updateField({\n                            label: nextLabel,\n                            properties: {\n                                ...field.properties,\n                                'jcr:title': nextLabel\n                            }\n                        });\n                    }}\n                />\n            </div>\n\n            <div className=\"fb-field\">\n                <Typography variant=\"subheading\">{t('builder.fields.name')}</Typography>\n                <Input value={field.name} onChange={event => updateField({name: event.target.value})}/>\n            </div>\n\n            {beforeBoolean.map(renderPropertyField)}\n\n            {booleanDescriptors.length > 0 && (\n                <div className=\"fb-boolean-group\">\n                    {booleanDescriptors.map(renderPropertyField)}\n                </div>\n            )}\n\n            {afterBoolean.map(renderPropertyField)}\n\n            {renderCheckboxOptions()}\n            {renderRadioOptions()}\n            {renderSelectOptions()}\n        </Paper>\n    );\n};\n\nFieldEditor.propTypes = {\n    field: PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        label: PropTypes.string,\n        name: PropTypes.string,\n        path: PropTypes.string,\n        type: PropTypes.string,\n        properties: PropTypes.object,\n        fields: PropTypes.array\n    }),\n    stepId: PropTypes.string,\n    onChangeField: PropTypes.func.isRequired,\n    onAddNestedField: PropTypes.func\n};\n\nFieldEditor.defaultProps = {\n    field: null,\n    stepId: null,\n    onAddNestedField: () => {}\n};\n","import {getFieldTypeByNode, getFieldPropertyNames, resolveFieldDefinition} from '../constants/formBuilder';\n\nconst getPropertyValue = (properties, name) => {\n    const source = properties || [];\n    const target = source.find(property => property.name === name);\n    if (!target) {\n        return undefined;\n    }\n\n    if (target.values && target.values.length) {\n        return target.values;\n    }\n\n    return target.value;\n};\n\nexport const propertiesToObject = properties => {\n    if (!properties) {\n        return {};\n    }\n\n    return properties.reduce((acc, property) => {\n        if (property.values && property.values.length) {\n            acc[property.name] = property.values;\n        } else {\n            acc[property.name] = property.value;\n        }\n\n        return acc;\n    }, {});\n};\n\nconst parseOptionString = raw => {\n    if (typeof raw !== 'string') {\n        return null;\n    }\n\n    let candidate = raw.trim();\n    if (!candidate) {\n        return null;\n    }\n\n    if (candidate.endsWith('.')) {\n        candidate = candidate.slice(0, -1);\n    }\n\n    try {\n        return JSON.parse(candidate);\n    } catch (_) {\n        return null;\n    }\n};\n\nexport const normalizeField = node => {\n    const primaryNodeType = node?.primaryNodeType?.name;\n    const definition = getFieldTypeByNode(primaryNodeType);\n    const properties = {};\n    const childNodes = ((node.children || {}).nodes || []);\n\n    const coerceBoolean = value => {\n        if (typeof value === 'boolean') {\n            return value;\n        }\n\n        if (typeof value === 'string') {\n            return value.toLowerCase() === 'true';\n        }\n\n        return Boolean(value);\n    };\n\n    (node.properties || []).forEach(property => {\n        if (property.name === 'options') {\n            if (Array.isArray(property.values) && property.values.length) {\n                properties[property.name] = property.values\n                    .map(entry => (typeof entry === 'string' ? parseOptionString(entry) : entry))\n                    .filter(Boolean);\n            } else if (typeof property.value === 'string' && property.value.trim().length) {\n                const parsed = parseOptionString(property.value);\n                properties[property.name] = parsed ? [parsed] : [];\n            } else if (property.value && typeof property.value === 'object') {\n                properties[property.name] = [property.value];\n            } else {\n                properties[property.name] = [];\n            }\n\n            return;\n        }\n\n        if (property.values && property.values.length) {\n            if (property.type === 'BOOLEAN') {\n                properties[property.name] = property.values.map(coerceBoolean);\n                return;\n            }\n\n            properties[property.name] = property.values;\n            return;\n        }\n\n        if (property.type === 'BOOLEAN') {\n            properties[property.name] = coerceBoolean(property.value);\n            return;\n        }\n\n        properties[property.name] = property.value;\n    });\n\n    const title = properties['jcr:title'] || node.displayName || node.name || '';\n    if (title) {\n        properties['jcr:title'] = title;\n    }\n\n    return {\n        id: node.uuid,\n        name: node.name,\n        initialName: node.name,\n        path: node.path,\n        label: title,\n        type: definition ? definition.id : primaryNodeType,\n        nodeType: primaryNodeType,\n        properties,\n        fields: childNodes.map(normalizeField)\n    };\n};\n\nexport const normalizeStep = node => {\n    const description = getPropertyValue(node.properties || [], 'jcr:description') || '';\n    const fields = ((node.children || {}).nodes || []).map(normalizeField);\n\n    return {\n        id: node.uuid,\n        name: node.name,\n        initialName: node.name,\n        path: node.path,\n        label: node.displayName || node.name,\n        description,\n        fields\n    };\n};\n\nconst isFieldsetNode = node => node?.primaryNodeType?.name === 'fmdb:fieldset';\n\nexport const normalizeForm = node => {\n    if (!node) {\n        return null;\n    }\n\n    const intro = getPropertyValue(node.properties || [], 'intro') || '';\n    const title = getPropertyValue(node.properties || [], 'jcr:title') || node.displayName || node.name;\n\n    const directStepNodes = ((node.children || {}).nodes || []).filter(isFieldsetNode);\n    const containerNodes = ((node.fieldsetsContainers || {}).nodes || []);\n    const containerStepNodes = containerNodes.flatMap(container => ((container.children || {}).nodes || []).filter(isFieldsetNode));\n    const stepNodes = [...directStepNodes, ...containerStepNodes];\n    const fieldsetsPath = containerNodes[0]?.path || (directStepNodes.length > 0 ? node.path : null);\n    const steps = stepNodes.map(normalizeStep);\n\n    return {\n        id: node.uuid,\n        name: node.name,\n        path: node.path,\n        label: title,\n        intro,\n        steps,\n        fieldsetsPath\n    };\n};\n\nexport const buildFieldPropertiesInput = (field, language) => {\n    const safeLabel = field.label || field.name || '';\n    const properties = [\n        {name: 'jcr:title', value: safeLabel, language, type: 'STRING'}\n    ];\n    const definition = resolveFieldDefinition(field.nodeType || field.type);\n    const allowedProperties = getFieldPropertyNames(definition);\n    allowedProperties.add('jcr:title');\n    allowedProperties.add('options');\n\n    Object.entries(field.properties || {}).forEach(([name, value]) => {\n        if (name === 'jcr:title') {\n            return;\n        }\n\n        if (!allowedProperties.has(name)) {\n            return;\n        }\n\n        if (value === undefined || value === null) {\n            return;\n        }\n\n        if (name === 'options' && Array.isArray(value)) {\n            const serializedOptions = value\n                .map(option => {\n                    if (!option) {\n                        return null;\n                    }\n\n                    if (typeof option === 'string') {\n                        return option;\n                    }\n\n                    try {\n                        return JSON.stringify(option);\n                    } catch (_) {\n                        return null;\n                    }\n                })\n                .filter(Boolean);\n\n            if (!serializedOptions.length) {\n                return;\n            }\n\n            properties.push({name, values: serializedOptions, language, type: 'STRING'});\n\n            return;\n        }\n\n        if (Array.isArray(value)) {\n            if (value.length === 0) {\n                return;\n            }\n\n            properties.push({name, values: value, language, type: 'STRING'});\n        } else if (typeof value === 'boolean') {\n            properties.push({name, value, type: 'BOOLEAN'});\n        } else if (typeof value === 'string') {\n            if (value.trim() === '') {\n                return;\n            }\n\n            properties.push({name, value, language, type: 'STRING'});\n        } else {\n            properties.push({name, value: value.toString(), language, type: 'STRING'});\n        }\n    });\n\n    return properties;\n};\n\nexport const buildStepPropertiesInput = (step, language) => {\n    const properties = [\n        {name: 'jcr:title', value: step.label, language, type: 'STRING'}\n    ];\n\n    if (step.description !== undefined) {\n        properties.push({name: 'jcr:description', value: step.description || '', language, type: 'STRING'});\n    }\n\n    return properties;\n};\n","import {useCallback, useEffect, useMemo, useState} from 'react';\nimport {useMutation, useQuery} from '@apollo/client';\nimport {useFormBuilderContext} from '../contexts/FormBuilderContext';\nimport {GET_FORM_DETAILS, GET_SITE_LANGUAGES} from '../graphql/queries';\nimport {\n    ADD_FIELD_MUTATION,\n    ADD_STEP_MUTATION,\n    DELETE_NODE_MUTATION,\n    RENAME_NODE_MUTATION,\n    REORDER_FIELDS_MUTATION,\n    REORDER_STEPS_MUTATION,\n    UPDATE_FIELD_MUTATION,\n    UPDATE_FORM_METADATA_MUTATION,\n    UPDATE_STEP_MUTATION\n} from '../graphql/mutations';\nimport {buildFieldPropertiesInput, buildStepPropertiesInput, normalizeForm} from '../utils/formNormalizer';\nimport {buildNewFieldTemplate} from '../constants/formBuilder';\nimport {slugify} from '../utils/string';\n\nconst createEmptySet = () => new Set();\n\nconst updateFieldNode = (node, fieldId, partial) => {\n    if (node === null || node === undefined) {\n        return node;\n    }\n\n    let childChanged = false;\n    let children = node.fields;\n\n    if (Array.isArray(node.fields) && node.fields.length) {\n        const nextChildren = node.fields.map(child => {\n            const updated = updateFieldNode(child, fieldId, partial);\n            if (updated !== child) {\n                childChanged = true;\n            }\n\n            return updated;\n        });\n\n        if (childChanged) {\n            children = nextChildren;\n        }\n    }\n\n    if (node.id === fieldId) {\n        const shouldUseChildren = partial.fields === undefined;\n        const nextFields = shouldUseChildren ? children : partial.fields;\n        return {\n            ...node,\n            ...partial,\n            fields: nextFields\n        };\n    }\n\n    if (childChanged) {\n        return {\n            ...node,\n            fields: children\n        };\n    }\n\n    return node;\n};\n\nexport const useFormEditor = formId => {\n    const {workspace, language: defaultLanguage, siteKey} = useFormBuilderContext();\n    const [activeLanguage, setActiveLanguage] = useState(defaultLanguage);\n    const [formState, setFormState] = useState(null);\n    const [saving, setSaving] = useState(false);\n    const [dirtySteps, setDirtySteps] = useState(() => new Set());\n    const [dirtyFields, setDirtyFields] = useState(() => new Set());\n    const [formMetadataDirty, setFormMetadataDirty] = useState(false);\n    const shouldSkipFormQuery = formId === null || formId === undefined || formId === '';\n\n    const {data, loading, error, refetch} = useQuery(GET_FORM_DETAILS, {\n        variables: {\n            workspace,\n            language: activeLanguage,\n            uuid: formId\n        },\n        fetchPolicy: 'no-cache',\n        skip: shouldSkipFormQuery\n    });\n\n    const {data: languagesData} = useQuery(GET_SITE_LANGUAGES, {\n        variables: {\n            workspace,\n            sitePath: `/sites/${siteKey}`\n        }\n    });\n\n    const [updateFormMutation] = useMutation(UPDATE_FORM_METADATA_MUTATION);\n    const [addStepMutation] = useMutation(ADD_STEP_MUTATION);\n    const [updateStepMutation] = useMutation(UPDATE_STEP_MUTATION);\n    const [reorderStepsMutation] = useMutation(REORDER_STEPS_MUTATION);\n    const [deleteNodeMutation] = useMutation(DELETE_NODE_MUTATION);\n    const [addFieldMutation] = useMutation(ADD_FIELD_MUTATION);\n    const [updateFieldMutation] = useMutation(UPDATE_FIELD_MUTATION);\n    const [reorderFieldsMutation] = useMutation(REORDER_FIELDS_MUTATION);\n    const [renameNodeMutation] = useMutation(RENAME_NODE_MUTATION);\n\n    useEffect(() => {\n        console.log('GET_FORM_DETAILS raw response', {data, error, json: data ? JSON.stringify(data) : null});\n\n        if (error) {\n            return;\n        }\n\n        if (data?.jcr?.nodeById) {\n            console.log('Loaded form from GraphQL', data.jcr.nodeById);\n\n            const normalized = normalizeForm(data.jcr.nodeById);\n            if (!normalized.label) {\n                normalized.label = data.jcr.nodeById.displayName || data.jcr.nodeById.name || '';\n            }\n\n            console.log('Normalized form', normalized);\n            setFormState(normalized);\n            setDirtySteps(createEmptySet());\n            setDirtyFields(createEmptySet());\n            setFormMetadataDirty(false);\n        }\n    }, [data, error]);\n\n    const siteLanguages = useMemo(() => {\n        const values = languagesData?.jcr?.nodeByPath?.languages?.values;\n        if (!values || !values.length) {\n            return [defaultLanguage];\n        }\n\n        return values;\n    }, [defaultLanguage, languagesData]);\n\n    const updateFormState = useCallback(partial => {\n        setFormState(prev => (prev ? {...prev, ...partial} : prev));\n        setFormMetadataDirty(true);\n    }, []);\n\n    const markStepDirty = useCallback(stepId => {\n        setDirtySteps(prev => {\n            const next = new Set(prev);\n            next.add(stepId);\n            return next;\n        });\n    }, []);\n\n    const markFieldDirty = useCallback(fieldId => {\n        setDirtyFields(prev => {\n            const next = new Set(prev);\n            next.add(fieldId);\n            return next;\n        });\n    }, []);\n\n    const addStep = useCallback(async () => {\n        if (!formState || !formState.path) {\n            return;\n        }\n\n        const parentPath = formState.fieldsetsPath || formState.path;\n\n        const title = `Step ${formState.steps.length + 1}`;\n        const name = slugify(title) || `step-${Date.now()}`;\n\n        await addStepMutation({\n            variables: {\n                workspace,\n                parentPath,\n                name,\n                language: activeLanguage,\n                title,\n                description: ''\n            }\n        });\n\n        await refetch();\n    }, [activeLanguage, addStepMutation, formState, refetch, workspace]);\n\n    const updateStepState = useCallback((stepId, partial) => {\n        setFormState(prev => {\n            if (!prev) {\n                return prev;\n            }\n\n            const steps = prev.steps.map(step => (step.id === stepId ? {...step, ...partial} : step));\n            return {...prev, steps};\n        });\n        markStepDirty(stepId);\n    }, [markStepDirty]);\n\n    const removeStep = useCallback(async stepId => {\n        const step = formState?.steps?.find(item => item.id === stepId);\n        if (!step) {\n            return;\n        }\n\n        await deleteNodeMutation({\n            variables: {\n                workspace,\n                pathOrId: step.path\n            }\n        });\n\n        await refetch();\n    }, [deleteNodeMutation, formState, refetch, workspace]);\n\n    const reorderSteps = useCallback(async nextOrder => {\n        if (!formState) {\n            return;\n        }\n\n        setFormState(prev => ({...prev, steps: nextOrder}));\n\n        const stepsParentPath = formState.fieldsetsPath || formState.path;\n\n        await reorderStepsMutation({\n            variables: {\n                workspace,\n                pathOrId: stepsParentPath,\n                names: nextOrder.map(step => step.name)\n            }\n        });\n\n        await refetch();\n    }, [formState, reorderStepsMutation, refetch, workspace]);\n\n    const addField = useCallback(async (stepId, typeId) => {\n        const step = formState?.steps?.find(item => item.id === stepId);\n        if (!step) {\n            return;\n        }\n\n        const template = buildNewFieldTemplate(typeId, `Field ${step.fields.length + 1}`);\n        const properties = buildFieldPropertiesInput(template, activeLanguage);\n\n        await addFieldMutation({\n            variables: {\n                workspace,\n                parentPath: step.path,\n                name: slugify(template.label) || `field-${Date.now()}`,\n                primaryNodeType: template.nodeType,\n                properties\n            }\n        });\n\n        await refetch();\n    }, [activeLanguage, addFieldMutation, formState, refetch, workspace]);\n\n    const addNestedField = useCallback(async ({parentPath, typeId, label, properties: overrideProperties}) => {\n        if (!parentPath) {\n            return;\n        }\n\n        const template = buildNewFieldTemplate(typeId, label || `Field ${Date.now()}`);\n        const enrichedTemplate = overrideProperties ? {...template, properties: {...template.properties, ...overrideProperties}} : template;\n        const properties = buildFieldPropertiesInput(enrichedTemplate, activeLanguage);\n\n        await addFieldMutation({\n            variables: {\n                workspace,\n                parentPath,\n                name: slugify(enrichedTemplate.label) || `field-${Date.now()}`,\n                primaryNodeType: enrichedTemplate.nodeType,\n                properties\n            }\n        });\n\n        await refetch();\n    }, [activeLanguage, addFieldMutation, refetch, workspace]);\n\n    const updateFieldState = useCallback((stepId, fieldId, partial) => {\n        setFormState(prev => {\n            if (!prev) {\n                return prev;\n            }\n\n            const steps = prev.steps.map(step => {\n                if (step.id !== stepId) {\n                    return step;\n                }\n\n                const fields = step.fields.map(field => updateFieldNode(field, fieldId, partial));\n                return {...step, fields};\n            });\n\n            return {...prev, steps};\n        });\n        markFieldDirty(fieldId);\n    }, [markFieldDirty]);\n\n    const removeField = useCallback(async (stepId, fieldId) => {\n        const step = formState?.steps?.find(item => item.id === stepId);\n        const field = step?.fields?.find(item => item.id === fieldId);\n        if (!field) {\n            return;\n        }\n\n        await deleteNodeMutation({\n            variables: {\n                workspace,\n                pathOrId: field.path\n            }\n        });\n\n        await refetch();\n    }, [deleteNodeMutation, formState, refetch, workspace]);\n\n    const reorderFields = useCallback(async (stepId, nextOrder) => {\n        const step = formState?.steps?.find(item => item.id === stepId);\n        if (!step) {\n            return;\n        }\n\n        setFormState(prev => {\n            if (!prev) {\n                return prev;\n            }\n\n            const steps = prev.steps.map(item => (item.id === stepId ? {...item, fields: nextOrder} : item));\n            return {...prev, steps};\n        });\n\n        await reorderFieldsMutation({\n            variables: {\n                workspace,\n                pathOrId: step.path,\n                names: nextOrder.map(field => field.name)\n            }\n        });\n\n        await refetch();\n    }, [formState, reorderFieldsMutation, refetch, workspace]);\n\n    const saveChanges = useCallback(async () => {\n        if (!formState) {\n            return;\n        }\n\n        setSaving(true);\n\n        try {\n            const promises = [];\n            const stepsParentPath = formState.fieldsetsPath || formState.path;\n\n            if (!stepsParentPath) {\n                console.warn('Missing parent path for steps, cannot apply mutations safely');\n                setSaving(false);\n                return;\n            }\n\n            if (formMetadataDirty) {\n                promises.push(updateFormMutation({\n                    variables: {\n                        workspace,\n                        pathOrId: formState.path,\n                        language: activeLanguage,\n                        title: formState.label,\n                        intro: formState.intro || ''\n                    }\n                }));\n            }\n\n            dirtySteps.forEach(stepId => {\n                const step = formState.steps.find(item => item.id === stepId);\n                if (!step) {\n                    return;\n                }\n\n                promises.push(updateStepMutation({\n                    variables: {\n                        workspace,\n                        pathOrId: step.path,\n                        properties: buildStepPropertiesInput(step, activeLanguage)\n                    }\n                }));\n\n                if (step.name !== step.initialName) {\n                    promises.push(renameNodeMutation({\n                        variables: {\n                            workspace,\n                            pathOrId: step.path,\n                            name: slugify(step.name) || step.name\n                        }\n                    }));\n                }\n            });\n\n            dirtyFields.forEach(fieldId => {\n                const {step, field} = findFieldById(formState, fieldId);\n                if (!field || !step) {\n                    return;\n                }\n\n                promises.push(updateFieldMutation({\n                    variables: {\n                        workspace,\n                        pathOrId: field.path,\n                        properties: buildFieldPropertiesInput(field, activeLanguage)\n                    }\n                }));\n\n                if (field.name !== field.initialName) {\n                    promises.push(renameNodeMutation({\n                        variables: {\n                            workspace,\n                            pathOrId: field.path,\n                            name: slugify(field.name) || field.name\n                        }\n                    }));\n                }\n            });\n\n            await Promise.all(promises);\n            await refetch();\n\n            setDirtyFields(createEmptySet());\n            setDirtySteps(createEmptySet());\n            setFormMetadataDirty(false);\n        } finally {\n            setSaving(false);\n        }\n    }, [activeLanguage, dirtyFields, dirtySteps, formMetadataDirty, formState, refetch, renameNodeMutation, updateFieldMutation, updateFormMutation, updateStepMutation, workspace]);\n\n    return {\n        form: formState,\n        loading,\n        saveChanges,\n        saving,\n        addStep,\n        updateStepState,\n        removeStep,\n        reorderSteps,\n        addField,\n        addNestedField,\n        updateFieldState,\n        removeField,\n        reorderFields,\n        activeLanguage,\n        setActiveLanguage,\n        siteLanguages,\n        updateFormState\n    };\n};\n\nconst findFieldById = (form, fieldId) => {\n    if (!form) {\n        return {step: null, field: null};\n    }\n\n    for (const step of form.steps) {\n        const stack = [...step.fields];\n\n        while (stack.length > 0) {\n            const current = stack.shift();\n            if (current.id === fieldId) {\n                return {step, field: current};\n            }\n\n            if (current.fields && current.fields.length) {\n                stack.push(...current.fields);\n            }\n        }\n    }\n\n    return {step: null, field: null};\n};\n","import React, {useEffect, useMemo, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {useHistory, useLocation} from 'react-router';\nimport {Button, LayoutContent, Loader, Typography, Header} from '@jahia/moonstone';\nimport {ChevronLeft} from '@jahia/moonstone/dist/icons';\nimport {useTranslation} from 'react-i18next';\nimport {Sidebar} from './sidebar/Sidebar';\nimport {StepEditor} from './steps/StepEditor';\nimport {FieldEditor} from './fields/FieldEditor';\nimport {useFormEditor} from '../../hooks/useFormEditor';\nimport {FORM_NAMESPACE} from '../../constants/formBuilder';\nimport './FormBuilder.scss';\n\nexport const FormBuilder = ({match}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const history = useHistory();\n    const location = useLocation();\n    const formId = match.params.formId;\n    const basePath = match?.url ? match.url.replace(/\\/[^/]+$/, '') : '/form-builder';\n    const {\n        form,\n        loading,\n        addStep,\n        updateStepState,\n        removeStep,\n        reorderSteps,\n        addField,\n        addNestedField,\n        updateFieldState,\n        removeField,\n        reorderFields,\n        saveChanges,\n        saving\n    } = useFormEditor(formId);\n\n    const [activeStepId, setActiveStepId] = useState(null);\n    const [activeFieldId, setActiveFieldId] = useState(null);\n\n    useEffect(() => {\n        if (!form || form.steps.length === 0) {\n            setActiveStepId(null);\n            return;\n        }\n\n        if (!activeStepId) {\n            setActiveStepId(form.steps[0].id);\n            return;\n        }\n\n        const exists = form.steps.some(step => step.id === activeStepId);\n        if (!exists) {\n            setActiveStepId(form.steps[0].id);\n        }\n    }, [form, activeStepId]);\n\n    const activeStep = useMemo(() => form?.steps?.find(step => step.id === activeStepId), [form, activeStepId]);\n\n    useEffect(() => {\n        if (!activeStep) {\n            setActiveFieldId(null);\n            return;\n        }\n\n        if (activeFieldId && activeStep.fields.find(field => field.id === activeFieldId)) {\n            return;\n        }\n\n        if (activeStep.fields.length > 0) {\n            setActiveFieldId(activeStep.fields[0].id);\n        } else {\n            setActiveFieldId(null);\n        }\n    }, [activeFieldId, activeStep]);\n\n    const activeField = activeStep?.fields?.find(field => field.id === activeFieldId) || null;\n\n    const handleRemoveStep = async stepId => {\n        const step = form.steps.find(item => item.id === stepId);\n        if (!step) {\n            return;\n        }\n\n        /* eslint-disable-next-line no-alert */\n        const confirmed = window.confirm(t('builder.sidebar.removeConfirm', {title: step.label}));\n        if (!confirmed) {\n            return;\n        }\n\n        await removeStep(stepId);\n        setActiveFieldId(null);\n    };\n\n    const handleRemoveField = async (stepId, fieldId) => {\n        const step = form.steps.find(item => item.id === stepId);\n        const field = step?.fields.find(item => item.id === fieldId);\n        if (!field) {\n            return;\n        }\n\n        /* eslint-disable-next-line no-alert */\n        const confirmed = window.confirm(t('builder.fields.removeConfirm', {title: field.label || field.name}));\n        if (!confirmed) {\n            return;\n        }\n\n        await removeField(stepId, fieldId);\n        setActiveFieldId(null);\n    };\n\n    const initialTitle = location.state?.formTitle || '';\n    const currentLabel = form?.label || form?.name || initialTitle;\n    const headerPrefix = t('accordionTitle');\n    const headerTitle = currentLabel ? `${headerPrefix} - ${currentLabel}` : headerPrefix;\n    useEffect(() => {\n        console.log('FormBuilder route context', {match, location, formId});\n    }, [location, match, formId]);\n\n    useEffect(() => {\n        console.log('FormBuilder header data', {\n            loading,\n            formLabel: form?.label,\n            formName: form?.name,\n            initialTitle,\n            currentLabel,\n            headerTitle\n        });\n    }, [loading, form, initialTitle, currentLabel, headerTitle]);\n    const backButton = (\n        <button type=\"button\" className=\"fb-back-button\" onClick={() => history.push(basePath)}>\n            <ChevronLeft size=\"big\"/>\n        </button>\n    );\n    const saveAction = (\n        <Button\n            key=\"save\"\n            color=\"accent\"\n            size=\"big\"\n            label={saving ? t('actions.saving') : t('actions.save')}\n            isDisabled={saving || !form}\n            onClick={saveChanges}\n        />\n    );\n\n    const renderContent = () => {\n        if (loading || !form) {\n            return (\n                <div className=\"fb-loading\">\n                    <Loader size=\"big\"/>\n                    <Typography variant=\"body\">{t('states.loading')}</Typography>\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"fb-builder__wrapper\">\n                <div className=\"fb-builder__content\">\n                    <Sidebar\n                        steps={form.steps}\n                        activeStepId={activeStepId}\n                        onSelectStep={setActiveStepId}\n                        onAddStep={addStep}\n                        onRemoveStep={handleRemoveStep}\n                        onReorderSteps={order => reorderSteps(order)}\n                    />\n                    <div className=\"fb-builder__main\">\n                        <StepEditor\n                            step={activeStep}\n                            activeFieldId={activeFieldId}\n                            onUpdateStep={(stepId, partial) => updateStepState(stepId, partial)}\n                            onAddField={addField}\n                            onRemoveField={handleRemoveField}\n                            onSelectField={setActiveFieldId}\n                            onReorderFields={(stepId, order) => reorderFields(stepId, order)}\n                        />\n                    </div>\n                    <div className=\"fb-builder__side\">\n                        <FieldEditor\n                            field={activeField}\n                            stepId={activeStep?.id}\n                            onChangeField={updateFieldState}\n                            onAddNestedField={addNestedField}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <LayoutContent\n            header={(\n                <Header\n                    title={headerTitle}\n                    subtitle={t('list.subtitle')}\n                    backButton={backButton}\n                    mainActions={[saveAction]}\n                />\n            )}\n            content={renderContent()}\n        />\n    );\n};\n\nFormBuilder.propTypes = {\n    match: PropTypes.shape({\n        params: PropTypes.shape({\n            formId: PropTypes.string\n        }).isRequired,\n        path: PropTypes.string,\n        url: PropTypes.string\n    }).isRequired\n};\n\nconst InputField = ({label, value, onChange}) => (\n    <div className=\"fb-input\">\n        <Typography variant=\"caption\">{label}</Typography>\n        <input className=\"fb-input__control\" value={value} onChange={event => onChange(event.target.value)}/>\n    </div>\n);\n\nInputField.propTypes = {\n    label: PropTypes.string.isRequired,\n    value: PropTypes.string.isRequired,\n    onChange: PropTypes.func.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Route, Switch, Redirect, withRouter} from 'react-router';\nimport {ApolloProvider} from '@apollo/client';\nimport {getApolloClient} from '../apollo/client';\nimport {FormBuilderProvider} from '../contexts/FormBuilderContext';\nimport {FormListView} from './formList/FormListView';\nimport {FormBuilder} from './formBuilder/FormBuilder';\n\nconst client = getApolloClient();\n\nconst FormBuilderAppRaw = ({match}) => {\n    const basePath = (match?.path || '/form-builder').replace(/\\*$/, '');\n\n    return (\n        <ApolloProvider client={client}>\n            <FormBuilderProvider>\n                <Switch>\n                    <Route exact path={basePath} component={FormListView}/>\n                    <Route path={`${basePath}/:formId`} component={FormBuilder}/>\n                    <Redirect to={basePath}/>\n                </Switch>\n            </FormBuilderProvider>\n        </ApolloProvider>\n    );\n};\n\nFormBuilderAppRaw.propTypes = {\n    match: PropTypes.shape({\n        path: PropTypes.string\n    })\n};\n\nFormBuilderAppRaw.defaultProps = {\n    match: {\n        path: '/form-builder'\n    }\n};\n\nexport const FormBuilderApp = withRouter(FormBuilderAppRaw);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {FormBuilderApp} from '../components/FormBuilderApp';\n\nexport const AdminPanel = ({match}) => <FormBuilderApp match={match}/>;\n\nAdminPanel.propTypes = {\n    match: PropTypes.object\n};\n\nAdminPanel.defaultProps = {\n    match: null\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport const FormBuilderIcon = ({width, height}) => (\n    <svg\n        width={width}\n        height={height}\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"3\" stroke=\"#2681ff\" strokeWidth=\"1.8\"/>\n        <rect x=\"6\" y=\"7\" width=\"12\" height=\"2\" fill=\"#2681ff\"/>\n        <rect x=\"6\" y=\"11\" width=\"8\" height=\"2\" fill=\"#2681ff\" opacity=\"0.6\"/>\n        <rect x=\"6\" y=\"15\" width=\"10\" height=\"2\" fill=\"#2681ff\" opacity=\"0.4\"/>\n        <circle cx=\"17\" cy=\"12\" r=\"2\" stroke=\"#2681ff\" strokeWidth=\"1.5\"/>\n    </svg>\n);\n\nFormBuilderIcon.propTypes = {\n    width: PropTypes.number,\n    height: PropTypes.number\n};\n\nFormBuilderIcon.defaultProps = {\n    width: 24,\n    height: 24\n};\n","import {registry} from '@jahia/ui-extender';\nimport constants from './AdminPanel.constants';\nimport {AdminPanel} from './AdminPanel';\nimport React, {Suspense} from 'react';\nimport {FormBuilderIcon} from '../components/icons/FormBuilderIcon';\nimport {FORM_NAMESPACE} from '../constants/formBuilder';\n\nexport const registerRoutes = () => {\n    if (window.jahia && window.jahia.i18n && window.jahia.i18n.loadNamespaces) {\n        window.jahia.i18n.loadNamespaces(FORM_NAMESPACE);\n    }\n\n    registry.add('accordionItem', 'formBuilderAccordion', registry.get('accordionItem', 'renderDefaultApps'), {\n        targets: ['jcontent:75'],\n        icon: <FormBuilderIcon width={24} height={24}/>,\n        label: `${FORM_NAMESPACE}:accordionTitle`,\n        defaultPath: constants.ROUTE,\n        appsTarget: 'formBuilderAccordionApps'\n    });\n\n    registry.add('adminRoute', 'formidableBuilder', {\n        targets: ['formBuilderAccordionApps'],\n        icon: <FormBuilderIcon/>,\n        label: `${FORM_NAMESPACE}:label`,\n        path: `${constants.ROUTE}*`,\n        defaultPath: constants.ROUTE,\n        isSelectable: true,\n        requireModuleInstalledOnSite: 'formidable',\n        render: v => <Suspense fallback=\"loading ...\"><AdminPanel match={v.match}/></Suspense>\n    });\n\n    console.debug('%c form-builder module is activated', 'color: #3c8cba');\n};\n","import {registerRoutes} from './AdminPanel/AdminPanel.routes';\nimport i18next from 'i18next';\nimport {FORM_NAMESPACE} from './constants/formBuilder';\nimport en from '../main/resources/javascript/locales/en.json';\nimport fr from '../main/resources/javascript/locales/fr.json';\n\nconst registerResources = () => {\n    const bundles = [\n        ['en', en],\n        ['fr', fr]\n    ];\n\n    bundles.forEach(([language, resource]) => {\n        const namespaceData = resource[FORM_NAMESPACE];\n        if (namespaceData && !i18next.hasResourceBundle(language, FORM_NAMESPACE)) {\n            i18next.addResourceBundle(language, FORM_NAMESPACE, namespaceData, true, true);\n        }\n    });\n};\n\nexport default function () {\n    registerResources();\n    registerRoutes();\n}\n","import {registry} from '@jahia/ui-extender';\nimport register from './AdminPanel.register';\n\nexport default function () {\n    registry.add('callback', 'formidableBuilder', {\n        targets: ['jahiaApp-init:2'],\n        callback: register\n    });\n}\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./FormBuilder.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"names":["exports","___CSS_LOADER_API_IMPORT___","push","module","id","api","content","__esModule","default","options","locals","sharedClient","DEFAULT_HEADERS","getApolloClient","_window$contextJsPara","_contextJsParameters$","ApolloClient","link","HttpLink","uri","window","contextJsParameters","contextPath","concat","credentials","headers","cache","InMemoryCache","typePolicies","JCRNode","keyFields","connectToDevTools","process","FORM_NAMESPACE","DEFAULT_WORKSPACE","booleanProperty","name","labelKey","type","textProperty","_objectSpread","arguments","length","undefined","numberProperty","dateProperty","dateTimeProperty","selectProperty","defaultValue","stringListProperty","FIELD_TYPES","nodeType","defaultProperties","buttonType","variant","propertySchema","value","required","defaultChecked","min","max","step","autocomplete","multiple","placeholder","list","pattern","minLength","maxLength","addLabelKey","removeLabelKey","itemLabelKey","accept","allowedParents","label","selected","size","disabled","autofocus","rows","resize","getFieldDefinitionByNodeType","primaryNodeType","find","getFieldDefinition","typeId","buildNewFieldTemplate","definition","Error","Date","now","description","properties","FormBuilderContext","createContext","FormBuilderProvider","_ref","children","_window","_window$formidableBui","formidableBuilder","runtimeConfig","lang","_contextJsParameters$2","siteKey","_contextJsParameters$3","language","_contextJsParameters$4","workspace","uiLanguage","resolvedSiteKey","formsRoot","formsPath","getDefaultFormsPath","rawWorkspace","normalizedWorkspace","toUpperCase","useMemo","client","namespace","React","Provider","propTypes","PropTypes","isRequired","useFormBuilderContext","ctx","useContext","INITIAL_STATE","title","intro","CreateFormPanel","isOpen","onCancel","onSubmit","isLoading","t","useTranslation","_useState","useState","_useState2","_slicedToArray","formData","setFormData","FormTextarea","MoonstoneTextarea","_ref2","_ref2$className","className","props","_objectWithoutProperties","_excluded","_extends","trim","useEffect","handleChange","field","prev","_defineProperty","isDisabled","Paper","Typography","Input","onChange","event","target","Button","onClick","color","defaultProps","PROPERTY_FIELDS_FRAGMENT","gql","_templateObject","_taggedTemplateLiteral","FIELD_CHILD_FRAGMENT","_templateObject2","FIELD_FRAGMENT","_templateObject3","STEP_FRAGMENT","_templateObject4","FORM_FRAGMENT","_templateObject5","GET_FORMS_LIST","GET_FORM_DETAILS","GET_SITE_LANGUAGES","CREATE_FORM_MUTATION","UPDATE_FORM_METADATA_MUTATION","DELETE_NODE_MUTATION","ADD_STEP_MUTATION","UPDATE_STEP_MUTATION","REORDER_STEPS_MUTATION","_templateObject6","ADD_FIELD_MUTATION","_templateObject7","UPDATE_FIELD_MUTATION","_templateObject8","REORDER_FIELDS_MUTATION","_templateObject9","RENAME_NODE_MUTATION","_templateObject0","slugify","toString","toLowerCase","replace","substring","buildStepCount","node","fieldsetContainer","nodes","FormListView","history","useHistory","match","useRouteMatch","_useFormList","_useFormBuilderContex","_useQuery","useQuery","variables","paths","fetchPolicy","data","loading","refetch","_useMutation","useMutation","_useMutation2","createFormMutation","creating","_useMutation3","_useMutation4","deleteMutation","deleting","forms","_data$jcr","jcr","nodesByCriteria","map","_node$properties","_node$properties2","uuid","path","displayName","property","steps","updatedAt","createForm","useCallback","_asyncToGenerator","_regeneratorRuntime","_callee","form","_context","next","parentPath","stop","_x","apply","deleteForm","_callee2","pathOrId","_context2","_x2","useFormList","createOpen","setCreateOpen","basePath","url","handleDelete","confirm","abrupt","formatUpdatedAt","formatter","Intl","DateTimeFormat","dateStyle","timeStyle","error","console","warn","format","_unused","handleDuplicate","duplicateTitle","LayoutContent","header","Header","subtitle","mainActions","key","_ref3","_callee3","payload","_context3","_x3","Loader","Chip","count","dangerouslySetInnerHTML","__html","navigateToPreview","icon","Visibility","navigateToSubmissions","ViewStream","navigateToSettings","SettingIcon","Copy","pathname","state","formTitle","navigateToForm","EditIcon","DeleteIcon","row","action","join","IconComponent","StepItem","isActive","onSelect","onRemove","_useSortable","useSortable","attributes","listeners","setNodeRef","transform","transition","style","CSS","Transform","ref","weight","fields","Sidebar","activeStepId","onSelectStep","onAddStep","onRemoveStep","onReorderSteps","sensors","useSensors","useSensor","PointerSensor","activationConstraint","distance","DndContext","onDragEnd","active","over","previousIndex","findIndex","nextIndex","reordered","arrayMove","SortableContext","items","strategy","verticalListSortingStrategy","FieldRow","FIELD_TYPE_ICONS","inputButton","Follow","inputCheckbox","CheckboxChecked","checkboxGroup","MultipleListSelector","inputColor","Palette","inputDate","Calendar","inputDatetimeLocal","Clock","inputEmail","Rocket","inputFile","CloudUpload","inputHidden","Hidden","radioGroup","RadioChecked","inputText","TextIcon","select","ListSelection","textarea","Paragraph","StepEditor","onUpdateStep","onAddField","onRemoveField","onSelectField","onReorderFields","activeFieldId","filter","includes","fieldId","FieldEditor","stepId","onChangeField","onAddNestedField","updateField","partial","updateProperty","booleanDescriptors","beforeBoolean","afterBoolean","seenBoolean","forEach","descriptor","typeLabel","renderPropertyField","_field$properties","Checkbox","checked","Boolean","placeholderKey","nextValue","Number","isNaN","_data$","option","selectedValue","Dropdown","item","Array","isArray","addLabel","removeLabel","itemLabel","index","optionKey","_toConsumableArray","_","idx","renderStringListField","nextLabel","updateNestedField","optionId","updateNestedProperties","propertiesPartial","nextProps","optionLabel","_option$properties","_option$properties2","renderCheckboxOptions","_option$properties3","_option$properties4","_item$properties","isTarget","currentValue","handleDefaultToggle","renderRadioOptions","_field$properties2","_field$properties3","allowMultiple","updateOptions","updateOption","renderSelectOptions","getPropertyValue","values","parseOptionString","raw","candidate","endsWith","slice","JSON","parse","normalizeField","_node$primaryNodeType","getFieldTypeByNode","childNodes","coerceBoolean","entry","parsed","_typeof","initialName","normalizeStep","isFieldsetNode","_node$primaryNodeType2","buildFieldPropertiesInput","identifier","names","allowedProperties","Set","add","Object","entries","has","serializedOptions","stringify","buildStepPropertiesInput","createEmptySet","updateFieldNode","childChanged","nextChildren","child","updated","nextFields","findFieldById","_step","_iterator","_createForOfIteratorHelper","s","n","done","stack","current","shift","err","e","f","FormBuilder","_activeStep$fields","_location$state","location","useLocation","formId","params","_useFormEditor","defaultLanguage","activeLanguage","setActiveLanguage","_useState3","_useState4","formState","setFormState","_useState5","_useState6","saving","setSaving","_useState7","_useState8","dirtySteps","setDirtySteps","_useState9","_useState0","dirtyFields","setDirtyFields","_useState1","_useState10","formMetadataDirty","setFormMetadataDirty","shouldSkipFormQuery","skip","languagesData","sitePath","updateFormMutation","addStepMutation","_useMutation5","updateStepMutation","_useMutation7","reorderStepsMutation","_useMutation9","deleteNodeMutation","_useMutation1","addFieldMutation","_useMutation11","updateFieldMutation","_useMutation13","reorderFieldsMutation","_useMutation15","renameNodeMutation","log","json","nodeById","normalized","_containerNodes$","directStepNodes","containerNodes","fieldsetsContainers","containerStepNodes","flatMap","container","stepNodes","fieldsetsPath","normalizeForm","siteLanguages","_languagesData$jcr","nodeByPath","languages","updateFormState","markStepDirty","markFieldDirty","addStep","updateStepState","removeStep","_formState$steps","reorderSteps","nextOrder","stepsParentPath","addField","_ref4","_callee4","_formState$steps2","template","_context4","_x4","addNestedField","_ref6","_callee5","_ref5","overrideProperties","enrichedTemplate","_context5","_x5","updateFieldState","removeField","_ref7","_callee6","_formState$steps3","_step$fields","_context6","_x6","_x7","reorderFields","_ref8","_callee7","_formState$steps4","_context7","_x8","_x9","saveChanges","_callee8","promises","_context8","_findFieldById","Promise","all","finish","useFormEditor","setActiveStepId","setActiveFieldId","some","activeStep","_form$steps","activeField","handleRemoveStep","handleRemoveField","initialTitle","currentLabel","headerPrefix","headerTitle","formLabel","formName","backButton","ChevronLeft","saveAction","order","FormBuilderAppRaw","ApolloProvider","Switch","Route","exact","component","Redirect","to","FormBuilderApp","withRouter","AdminPanel","FormBuilderIcon","width","height","viewBox","fill","xmlns","x","y","rx","stroke","strokeWidth","opacity","cx","cy","r","registerRoutes","jahia","i18n","loadNamespaces","registry","get","targets","defaultPath","constants","appsTarget","isSelectable","requireModuleInstalledOnSite","render","v","Suspense","fallback","debug","registerResources","en","fr","namespaceData","i18next","callback","register"],"ignoreList":[],"sourceRoot":""}