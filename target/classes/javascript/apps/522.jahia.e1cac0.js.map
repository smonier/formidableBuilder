{"version":3,"file":"522.jahia.e1cac0.js","mappings":"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","sources":["webpack://formidableBuilder/./src/javascript/components/formList/FormListView.scss?b605","webpack://formidableBuilder/./src/javascript/components/formBuilder/FormSettings.scss","webpack://formidableBuilder/./src/javascript/components/formBuilder/FormPreview.scss","webpack://formidableBuilder/./src/javascript/components/formBuilder/FormPreview.scss?20cf","webpack://formidableBuilder/./src/javascript/components/formList/FormListView.scss","webpack://formidableBuilder/./src/javascript/AdminPanel/AdminPanel.constants.jsx","webpack://formidableBuilder/./src/javascript/apollo/client.js","webpack://formidableBuilder/./src/javascript/constants/formBuilder.js","webpack://formidableBuilder/./src/javascript/contexts/FormBuilderContext.jsx","webpack://formidableBuilder/./src/javascript/components/formList/CreateFormPanel.jsx","webpack://formidableBuilder/./src/javascript/graphql/fragments.js","webpack://formidableBuilder/./src/javascript/graphql/queries.js","webpack://formidableBuilder/./src/javascript/graphql/mutations.js","webpack://formidableBuilder/./src/javascript/utils/string.js","webpack://formidableBuilder/./src/javascript/hooks/useFormList.js","webpack://formidableBuilder/./src/javascript/components/formList/FormListView.jsx","webpack://formidableBuilder/./src/javascript/components/formBuilder/sidebar/Sidebar.jsx","webpack://formidableBuilder/./src/javascript/components/formBuilder/fields/FieldPreview.jsx","webpack://formidableBuilder/./src/javascript/components/formBuilder/steps/StepEditor.jsx","webpack://formidableBuilder/./src/javascript/components/formBuilder/fields/FieldEditor.jsx","webpack://formidableBuilder/./src/javascript/utils/formNormalizer.js","webpack://formidableBuilder/./src/javascript/hooks/useFormEditor.js","webpack://formidableBuilder/./src/javascript/components/formBuilder/FormPreview.jsx","webpack://formidableBuilder/./src/javascript/components/formBuilder/FormBuilder.jsx","webpack://formidableBuilder/./src/javascript/components/formBuilder/FormSettings.jsx","webpack://formidableBuilder/./src/javascript/components/FormBuilderApp.jsx","webpack://formidableBuilder/./src/javascript/AdminPanel/AdminPanel.jsx","webpack://formidableBuilder/./src/javascript/components/icons/FormBuilderIcon.jsx","webpack://formidableBuilder/./src/javascript/AdminPanel/AdminPanel.routes.jsx","webpack://formidableBuilder/./src/javascript/AdminPanel.register.js","webpack://formidableBuilder/./src/javascript/init.js","webpack://formidableBuilder/./src/javascript/components/formBuilder/FormSettings.scss?5f7d","webpack://formidableBuilder/./src/javascript/components/formBuilder/FormBuilder.scss","webpack://formidableBuilder/./src/javascript/components/formBuilder/FormBuilder.scss?6176"],"sourcesContent":["var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./FormListView.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".fs-settings{padding:24px}.fs-settings__form-header{margin-bottom:32px;padding-bottom:16px;border-bottom:1px solid #e0e0e0}.fs-settings__form-subtitle{margin-top:8px;color:#666}.fs-settings__content{max-width:800px;margin:0 auto}.fs-settings__tabs{display:flex;gap:8px;margin-bottom:24px;border-bottom:1px solid #e0e0e0;padding-bottom:16px}.fs-settings__tab-content{padding:24px 0}.fs-settings__section{margin-bottom:32px}.fs-settings__section:last-child{margin-bottom:0}.fs-settings__field-description{margin-bottom:8px;color:#666;font-size:.875rem;line-height:1.4}.fs-settings__field{margin-bottom:24px}.fs-settings__field:last-child{margin-bottom:0}.fs-settings__switch-field{display:flex;align-items:center;gap:12px;margin-bottom:12px}.lexical-editor{border:1px solid #ccc;border-radius:4px;padding:8px}.lexical-editor .lexical-toolbar{display:flex;gap:4px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid #e0e0e0}.lexical-editor .lexical-toolbar .lexical-toolbar-button{padding:4px 8px;border:1px solid #ccc;border-radius:3px;background:#fff;cursor:pointer;font-size:14px;min-width:28px;display:flex;align-items:center;justify-content:center}.lexical-editor .lexical-toolbar .lexical-toolbar-button:hover{background:#f5f5f5}.lexical-editor .lexical-toolbar .lexical-toolbar-button:active{background:#e0e0e0}.lexical-editor .lexical-content-editable{outline:none;min-height:80px;padding:8px 0}.lexical-editor .lexical-placeholder{color:#999;position:absolute;top:8px;left:8px;pointer-events:none}.lexical-editor .font-bold{font-weight:bold}.lexical-editor .italic{font-style:italic}.lexical-editor .underline{text-decoration:underline}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".fb-preview{max-width:800px;margin:0 auto;padding:24px}.fb-preview__tabs{display:flex;gap:8px;margin-bottom:24px;border-bottom:1px solid #e0e0e0;padding-bottom:16px}.fb-preview__buttons{display:flex;gap:12px;margin-top:24px;justify-content:center}.fb-preview__step{padding:24px;border:1px solid #e0e0e0;border-radius:8px;background:#fff}.fb-preview__step-description{margin-top:8px;margin-bottom:16px;color:#666}.fb-preview__fields{display:flex;flex-direction:column;gap:16px}.fb-preview__field{padding:16px;border:1px solid #f0f0f0;border-radius:6px;background:#fafafa}.fb-field-preview__label{display:block;margin-bottom:8px;font-weight:500}.fb-field-preview__input,.fb-field-preview__select,.fb-field-preview__textarea{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px}.fb-field-preview__checkbox{margin-right:8px}.fb-field-preview__option{display:block;margin-bottom:4px}.fb-field-preview__button{display:block;margin-bottom:4px}.fb-field-preview__button{padding:8px 16px;border:none;border-radius:4px;cursor:pointer}.fb-field-preview__button--primary{background:#007bff;color:#fff}.fb-field-preview__button--secondary{background:#6c757d;color:#fff}.fb-field-preview__placeholder{color:#999;font-style:italic}.fb-preview__loading{display:flex;align-items:center;justify-content:center;min-height:200px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./FormPreview.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".fb-list{display:flex;flex-direction:column;align-items:center;gap:40px;padding:48px 64px 64px;background:linear-gradient(135deg, #f8faff 0%, #f1f5ff 80%);min-height:calc(100vh - 150px)}.fb-list__section{width:100%;max-width:1280px}.fb-panel{padding:32px 36px;border-radius:12px;box-shadow:0 20px 40px rgba(15,19,39,.08);display:flex;flex-direction:column;gap:24px}.fb-panel__header{display:flex;flex-direction:column;gap:8px}.fb-panel__body{display:flex;flex-direction:column;gap:20px}.fb-field{display:flex;flex-direction:column;gap:10px}.fb-textarea{width:100%;border:1px solid #cfd5e6;border-radius:8px;padding:12px;background:#fdfdff;resize:vertical;font-family:inherit}.fb-panel__actions{display:flex;justify-content:flex-end;gap:16px;padding-top:8px}.fb-list__loading,.fb-list__empty{display:flex;align-items:center;gap:12px;min-height:160px;justify-content:center}.fb-list__panel{padding:40px 48px;background:#fff;border-radius:16px;box-shadow:0 24px 60px rgba(19,32,68,.08);display:flex;flex-direction:column;gap:32px}.fb-card-grid{display:grid;grid-template-columns:1fr;gap:32px;width:100%}.fb-card{display:flex;flex-direction:column;gap:20px;padding:28px 32px;border-radius:20px;border:1px solid rgba(15,19,39,.08);box-shadow:0 20px 55px rgba(19,32,68,.08);background:#fdfdff}.fb-card__header{display:flex;align-items:flex-start;justify-content:space-between;gap:20px;padding-bottom:12px;border-bottom:1px solid rgba(143,155,179,.2)}.fb-card__title{display:flex;flex-direction:column;gap:4px}.fb-card__intro{min-height:64px;color:#31374a;line-height:1.5}.fb-card__intro-html{display:flex;flex-direction:column;gap:8px}.fb-card__intro-html p{margin:0}.fb-card__meta{display:flex;gap:32px;font-size:14px;color:#4c566a;border-top:1px solid rgba(143,155,179,.18);padding-top:16px}.fb-card__meta-item{display:flex;flex-direction:column;gap:6px}.fb-card__actions{display:flex;flex-direction:column;gap:12px;border-top:1px solid rgba(143,155,179,.15);padding-top:20px}.fb-card__actions-row{display:flex;flex-wrap:nowrap;gap:12px;width:100%}.fb-card__actions-row .moonstone-button{flex:1;justify-content:flex-start}@media(max-width: 900px){.fb-card__actions-row{flex-wrap:wrap}}@media(max-width: 1024px){.fb-list{padding:32px}.fb-list__panel{padding:32px}}@media(min-width: 720px){.fb-card-grid{grid-template-columns:repeat(2, minmax(0, 1fr))}}@media(min-width: 1100px){.fb-card-grid{grid-template-columns:repeat(3, minmax(0, 1fr))}}@media(max-width: 720px){.fb-list{padding:24px 16px 40px}.fb-card{padding:24px}}.fb-card-grid .moonstone-paper{margin-top:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nexport default {\n    ROUTE: '/form-builder',\n    ROUTE_DEFAULT_PATH: '/form-builder'\n};\n","import {ApolloClient, HttpLink, InMemoryCache} from '@apollo/client';\n\nconst DEFAULT_HEADERS = {\n    'X-Requested-With': 'XMLHttpRequest'\n};\n\nconst buildGraphQLUri = () => {\n    const {contextJsParameters = {}} = window;\n    const {contextPath = ''} = contextJsParameters;\n\n    return `${contextPath || ''}/modules/graphql`;\n};\n\nexport const createApolloClient = () => {\n    return new ApolloClient({\n        link: new HttpLink({\n            uri: buildGraphQLUri(),\n            credentials: 'include',\n            headers: DEFAULT_HEADERS\n        }),\n        cache: new InMemoryCache({\n            typePolicies: {\n                JCRNode: {\n                    keyFields: ['uuid']\n                }\n            }\n        }),\n        connectToDevTools: process.env.NODE_ENV !== 'production'\n    });\n};\n\nlet sharedClient;\n\nexport const getApolloClient = () => {\n    if (!sharedClient) {\n        sharedClient = createApolloClient();\n    }\n\n    return sharedClient;\n};\n","export const FORM_NAMESPACE = 'formidableBuilder';\n\nexport const DEFAULT_WORKSPACE = 'EDIT';\n\nexport const getDefaultFormsPath = siteKey => `/sites/${siteKey}/contents/forms`;\n\nconst booleanProperty = (name, labelKey) => ({\n    name,\n    type: 'boolean',\n    labelKey\n});\n\nconst textProperty = (name, labelKey, options = {}) => ({\n    name,\n    type: 'text',\n    labelKey,\n    ...options\n});\n\nconst multilineProperty = (name, labelKey) => ({\n    name,\n    type: 'multiline',\n    labelKey\n});\n\nconst numberProperty = (name, labelKey) => ({\n    name,\n    type: 'number',\n    labelKey\n});\n\nconst dateProperty = (name, labelKey) => ({\n    name,\n    type: 'date',\n    labelKey\n});\n\nconst dateTimeProperty = (name, labelKey) => ({\n    name,\n    type: 'datetime',\n    labelKey\n});\n\nconst selectProperty = (name, labelKey, options, defaultValue) => ({\n    name,\n    type: 'select',\n    labelKey,\n    options,\n    defaultValue\n});\n\nconst stringListProperty = (name, labelKey, config = {}) => ({\n    name,\n    type: 'stringList',\n    labelKey,\n    ...config\n});\n\nconst buttonTypeOptions = [\n    {value: 'button', labelKey: 'builder.fields.properties.buttonTypeOptions.button'},\n    {value: 'submit', labelKey: 'builder.fields.properties.buttonTypeOptions.submit'},\n    {value: 'reset', labelKey: 'builder.fields.properties.buttonTypeOptions.reset'}\n];\n\nconst buttonVariantOptions = [\n    {value: 'primary', labelKey: 'builder.fields.properties.variantOptions.primary'},\n    {value: 'secondary', labelKey: 'builder.fields.properties.variantOptions.secondary'},\n    {value: 'danger', labelKey: 'builder.fields.properties.variantOptions.danger'}\n];\n\nconst resizeOptions = [\n    {value: 'none', labelKey: 'builder.fields.properties.resizeOptions.none'},\n    {value: 'both', labelKey: 'builder.fields.properties.resizeOptions.both'},\n    {value: 'horizontal', labelKey: 'builder.fields.properties.resizeOptions.horizontal'},\n    {value: 'vertical', labelKey: 'builder.fields.properties.resizeOptions.vertical'}\n];\n\nexport const FIELD_TYPES = [\n    {\n        id: 'inputButton',\n        nodeType: 'fmdb:inputButton',\n        labelKey: 'fields.types.inputButton',\n        defaultProperties: {\n            buttonType: 'button',\n            variant: 'primary'\n        },\n        propertySchema: [\n            selectProperty('buttonType', 'builder.fields.properties.buttonType', buttonTypeOptions, 'button'),\n            selectProperty('variant', 'builder.fields.properties.variant', buttonVariantOptions, 'primary')\n        ]\n    },\n    {\n        id: 'inputCheckbox',\n        nodeType: 'fmdb:inputCheckbox',\n        labelKey: 'fields.types.inputCheckbox',\n        defaultProperties: {\n            required: false,\n            defaultChecked: false,\n            value: ''\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            booleanProperty('defaultChecked', 'builder.fields.properties.defaultChecked'),\n            textProperty('value', 'builder.fields.properties.value')\n        ]\n    },\n    {\n        id: 'checkboxGroup',\n        nodeType: 'fmdb:checkboxGroup',\n        labelKey: 'fields.types.checkboxGroup',\n        defaultProperties: {\n            required: false\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required')\n        ]\n    },\n    {\n        id: 'inputColor',\n        nodeType: 'fmdb:inputColor',\n        labelKey: 'fields.types.inputColor',\n        defaultProperties: {\n            required: false,\n            defaultValue: ''\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            textProperty('defaultValue', 'builder.fields.properties.defaultValue')\n        ]\n    },\n    {\n        id: 'inputDate',\n        nodeType: 'fmdb:inputDate',\n        labelKey: 'fields.types.inputDate',\n        defaultProperties: {\n            required: false,\n            defaultValue: null,\n            min: null,\n            max: null,\n            step: null\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            dateProperty('defaultValue', 'builder.fields.properties.defaultDate'),\n            dateProperty('min', 'builder.fields.properties.minDate'),\n            dateProperty('max', 'builder.fields.properties.maxDate'),\n            numberProperty('step', 'builder.fields.properties.step')\n        ]\n    },\n    {\n        id: 'inputDatetimeLocal',\n        nodeType: 'fmdb:inputDatetimeLocal',\n        labelKey: 'fields.types.inputDatetimeLocal',\n        defaultProperties: {\n            required: false,\n            defaultValue: null,\n            min: null,\n            max: null,\n            step: null\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            dateTimeProperty('defaultValue', 'builder.fields.properties.defaultDateTime'),\n            dateTimeProperty('min', 'builder.fields.properties.minDateTime'),\n            dateTimeProperty('max', 'builder.fields.properties.maxDateTime'),\n            numberProperty('step', 'builder.fields.properties.step')\n        ]\n    },\n    {\n        id: 'inputEmail',\n        nodeType: 'fmdb:inputEmail',\n        labelKey: 'fields.types.inputEmail',\n        defaultProperties: {\n            required: false,\n            autocomplete: false,\n            multiple: false,\n            placeholder: '',\n            defaultValue: '',\n            list: [],\n            pattern: '',\n            minLength: null,\n            maxLength: null\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            booleanProperty('autocomplete', 'builder.fields.properties.autocomplete'),\n            booleanProperty('multiple', 'builder.fields.properties.multiple'),\n            textProperty('placeholder', 'builder.fields.properties.placeholder'),\n            textProperty('defaultValue', 'builder.fields.properties.defaultValue'),\n            stringListProperty('list', 'builder.fields.properties.list', {\n                addLabelKey: 'builder.fields.properties.listAdd',\n                removeLabelKey: 'builder.fields.properties.listRemove',\n                itemLabelKey: 'builder.fields.properties.listItem'\n            }),\n            textProperty('pattern', 'builder.fields.properties.pattern'),\n            numberProperty('minLength', 'builder.fields.properties.minLength'),\n            numberProperty('maxLength', 'builder.fields.properties.maxLength')\n        ]\n    },\n    {\n        id: 'inputFile',\n        nodeType: 'fmdb:inputFile',\n        labelKey: 'fields.types.inputFile',\n        defaultProperties: {\n            accept: '',\n            multiple: false,\n            required: false\n        },\n        propertySchema: [\n            textProperty('accept', 'builder.fields.properties.accept'),\n            booleanProperty('multiple', 'builder.fields.properties.multiple'),\n            booleanProperty('required', 'builder.fields.properties.required')\n        ]\n    },\n    {\n        id: 'inputHidden',\n        nodeType: 'fmdb:inputHidden',\n        labelKey: 'fields.types.inputHidden',\n        defaultProperties: {\n            value: ''\n        },\n        propertySchema: [\n            textProperty('value', 'builder.fields.properties.value')\n        ]\n    },\n    {\n        id: 'inputRadio',\n        nodeType: 'fmdb:inputRadio',\n        labelKey: 'fields.types.inputRadio',\n        allowedParents: ['radioGroup'],\n        defaultProperties: {\n            defaultChecked: false,\n            value: ''\n        },\n        propertySchema: [\n            booleanProperty('defaultChecked', 'builder.fields.properties.defaultChecked'),\n            textProperty('value', 'builder.fields.properties.value')\n        ]\n    },\n    {\n        id: 'radioGroup',\n        nodeType: 'fmdb:radioGroup',\n        labelKey: 'fields.types.radioGroup',\n        defaultProperties: {\n            required: false\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required')\n        ]\n    },\n    {\n        id: 'inputText',\n        nodeType: 'fmdb:inputText',\n        labelKey: 'fields.types.inputText',\n        defaultProperties: {\n            required: false,\n            placeholder: '',\n            defaultValue: '',\n            list: [],\n            minLength: null,\n            maxLength: null\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            textProperty('placeholder', 'builder.fields.properties.placeholder'),\n            textProperty('defaultValue', 'builder.fields.properties.defaultValue'),\n            stringListProperty('list', 'builder.fields.properties.list', {\n                addLabelKey: 'builder.fields.properties.listAdd',\n                removeLabelKey: 'builder.fields.properties.listRemove',\n                itemLabelKey: 'builder.fields.properties.listItem'\n            }),\n            numberProperty('minLength', 'builder.fields.properties.minLength'),\n            numberProperty('maxLength', 'builder.fields.properties.maxLength')\n        ]\n    },\n    {\n        id: 'select',\n        nodeType: 'fmdb:select',\n        labelKey: 'fields.types.select',\n        defaultProperties: {\n            options: [\n                {\n                    label: 'Option 1',\n                    value: 'option-1',\n                    selected: false\n                }\n            ],\n            size: null,\n            required: false,\n            multiple: false,\n            disabled: false,\n            autofocus: false\n        },\n        propertySchema: [\n            numberProperty('size', 'builder.fields.properties.size'),\n            booleanProperty('required', 'builder.fields.properties.required'),\n            booleanProperty('multiple', 'builder.fields.properties.multiple'),\n            booleanProperty('disabled', 'builder.fields.properties.disabled'),\n            booleanProperty('autofocus', 'builder.fields.properties.autofocus')\n        ]\n    },\n    {\n        id: 'textarea',\n        nodeType: 'fmdb:textarea',\n        labelKey: 'fields.types.textarea',\n        defaultProperties: {\n            required: false,\n            placeholder: '',\n            defaultValue: '',\n            minLength: null,\n            maxLength: null,\n            rows: null,\n            resize: 'vertical'\n        },\n        propertySchema: [\n            booleanProperty('required', 'builder.fields.properties.required'),\n            textProperty('placeholder', 'builder.fields.properties.placeholder'),\n            multilineProperty('defaultValue', 'builder.fields.properties.defaultValue'),\n            numberProperty('minLength', 'builder.fields.properties.minLength'),\n            numberProperty('maxLength', 'builder.fields.properties.maxLength'),\n            numberProperty('rows', 'builder.fields.properties.rows'),\n            selectProperty('resize', 'builder.fields.properties.resize', resizeOptions, 'vertical')\n        ]\n    }\n];\n\nexport const getFieldDefinitionByNodeType = primaryNodeType => FIELD_TYPES.find(type => type.nodeType === primaryNodeType);\n\nexport const getFieldDefinition = typeId => FIELD_TYPES.find(type => type.id === typeId);\n\nexport const resolveFieldDefinition = identifier => getFieldDefinition(identifier) || getFieldDefinitionByNodeType(identifier);\n\nexport const getFieldTypeByNode = primaryNodeType => getFieldDefinitionByNodeType(primaryNodeType);\n\nexport const buildNewFieldTemplate = (typeId, label) => {\n    const definition = getFieldDefinition(typeId);\n    if (!definition) {\n        throw new Error(`Unknown field type ${typeId}`);\n    }\n\n    return {\n        id: `temp-${Date.now()}`,\n        label: label || '',\n        name: '',\n        description: '',\n        type: definition.id,\n        nodeType: definition.nodeType,\n        properties: {...definition.defaultProperties}\n    };\n};\n\nexport const getFieldPropertyNames = definition => {\n    const names = new Set();\n    if (!definition) {\n        return names;\n    }\n\n    (definition.propertySchema || []).forEach(descriptor => {\n        if (descriptor && descriptor.name) {\n            names.add(descriptor.name);\n        }\n    });\n\n    return names;\n};\n","import React, {createContext, useContext, useMemo} from 'react';\nimport PropTypes from 'prop-types';\nimport {getApolloClient} from '../apollo/client';\nimport {DEFAULT_WORKSPACE, FORM_NAMESPACE, getDefaultFormsPath} from '../constants/formBuilder';\n\nconst FormBuilderContext = createContext(null);\n\nexport const FormBuilderProvider = ({children}) => {\n    const {contextJsParameters = {}, formidableBuilder: runtimeConfig = {}} = window;\n    const {\n        lang = 'en',\n        siteKey = 'default',\n        language = contextJsParameters.lang,\n        workspace = DEFAULT_WORKSPACE\n    } = contextJsParameters;\n\n    const uiLanguage = runtimeConfig.uiLanguage || lang || language || 'en';\n    const resolvedSiteKey = runtimeConfig.siteKey || siteKey;\n    const formsRoot = runtimeConfig.formsPath || getDefaultFormsPath(resolvedSiteKey);\n    const rawWorkspace = runtimeConfig.workspace || workspace || DEFAULT_WORKSPACE;\n    const normalizedWorkspace = (() => {\n        const value = (rawWorkspace || DEFAULT_WORKSPACE).toUpperCase();\n        if (value === 'LIVE' || value === 'EDIT') {\n            return value;\n        }\n\n        return DEFAULT_WORKSPACE;\n    })();\n\n    const value = useMemo(() => ({\n        client: getApolloClient(),\n        namespace: FORM_NAMESPACE,\n        language: uiLanguage,\n        siteKey: resolvedSiteKey,\n        workspace: normalizedWorkspace,\n        formsPath: formsRoot\n    }), [uiLanguage, resolvedSiteKey, formsRoot, normalizedWorkspace]);\n\n    return (\n        <FormBuilderContext.Provider value={value}>\n            {children}\n        </FormBuilderContext.Provider>\n    );\n};\n\nFormBuilderProvider.propTypes = {\n    children: PropTypes.node.isRequired\n};\n\nexport const useFormBuilderContext = () => {\n    const ctx = useContext(FormBuilderContext);\n    if (!ctx) {\n        throw new Error('useFormBuilderContext must be used inside FormBuilderProvider');\n    }\n\n    return ctx;\n};\n","import React, {useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {Paper, Typography, Button, Input, Textarea as MoonstoneTextarea} from '@jahia/moonstone';\nimport {useTranslation} from 'react-i18next';\nimport {FORM_NAMESPACE} from '../../constants/formBuilder';\n\nconst INITIAL_STATE = {\n    title: '',\n    intro: ''\n};\n\nexport const CreateFormPanel = ({isOpen, onCancel, onSubmit, isLoading}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const [formData, setFormData] = useState(INITIAL_STATE);\n    const FormTextarea = MoonstoneTextarea || (({className = '', ...props}) => (\n        <textarea className={`fb-textarea ${className}`.trim()} {...props}/>\n    ));\n\n    useEffect(() => {\n        if (!isOpen) {\n            setFormData(INITIAL_STATE);\n        }\n    }, [isOpen]);\n\n    if (!isOpen) {\n        return null;\n    }\n\n    const handleChange = (field, value) => {\n        setFormData(prev => ({...prev, [field]: value}));\n    };\n\n    const isDisabled = !formData.title || isLoading;\n\n    return (\n        <Paper className=\"fb-panel\">\n            <div className=\"fb-panel__header\">\n                <Typography variant=\"heading\">{t('list.create.title')}</Typography>\n                <Typography variant=\"body\">{t('list.create.description')}</Typography>\n            </div>\n            <div className=\"fb-panel__body\">\n                <div className=\"fb-field\">\n                    <Typography variant=\"subheading\">{t('list.fields.title')}</Typography>\n                    <Input\n                        value={formData.title}\n                        placeholder={t('list.fields.titlePlaceholder')}\n                        size=\"big\"\n                        onChange={event => handleChange('title', event.target.value)}\n                    />\n                </div>\n                <div className=\"fb-field\">\n                    <Typography variant=\"subheading\">{t('list.fields.intro')}</Typography>\n                    <FormTextarea\n                        value={formData.intro}\n                        placeholder={t('list.fields.introPlaceholder')}\n                        rows={4}\n                        onChange={event => handleChange('intro', event.target.value)}\n                    />\n                </div>\n            </div>\n            <div className=\"fb-panel__actions\">\n                <Button label={t('actions.cancel')} size=\"big\" onClick={onCancel}/>\n                <Button\n                    label={isLoading ? t('actions.creating') : t('actions.create')}\n                    size=\"big\"\n                    color=\"accent\"\n                    isDisabled={isDisabled}\n                    onClick={() => onSubmit(formData)}\n                />\n            </div>\n        </Paper>\n    );\n};\n\nCreateFormPanel.propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n    isLoading: PropTypes.bool\n};\n\nCreateFormPanel.defaultProps = {\n    isLoading: false\n};\n","import {gql} from '@apollo/client';\n\nexport const PROPERTY_FIELDS_FRAGMENT = gql`\n    fragment PropertyFields on JCRProperty {\n        name\n        value\n        values\n        type\n    }\n`;\n\nexport const FIELD_CHILD_FRAGMENT = gql`\n    fragment FieldChildFragment on JCRNode {\n        uuid\n        name\n        path\n        primaryNodeType {\n            name\n        }\n        displayName(language: $language)\n        properties(language: $language) {\n            ...PropertyFields\n        }\n    }\n    ${PROPERTY_FIELDS_FRAGMENT}\n`;\n\nexport const FIELD_FRAGMENT = gql`\n    fragment FieldFragment on JCRNode {\n        uuid\n        name\n        path\n        primaryNodeType {\n            name\n        }\n        displayName(language: $language)\n        properties(language: $language) {\n            ...PropertyFields\n        }\n        children {\n            nodes {\n                ...FieldChildFragment\n            }\n        }\n    }\n    ${FIELD_CHILD_FRAGMENT}\n    ${PROPERTY_FIELDS_FRAGMENT}\n`;\n\nexport const STEP_FRAGMENT = gql`\n    fragment StepFragment on JCRNode {\n        uuid\n        name\n        path\n        primaryNodeType {\n            name\n        }\n        displayName(language: $language)\n        properties(language: $language, names: [\"jcr:description\"]) {\n            ...PropertyFields\n        }\n        children {\n            nodes {\n                ...FieldFragment\n            }\n        }\n    }\n    ${FIELD_FRAGMENT}\n    ${PROPERTY_FIELDS_FRAGMENT}\n`;\n\nexport const FORM_FRAGMENT = gql`\n    fragment FormFragment on JCRNode {\n        uuid\n        name\n        path\n        displayName(language: $language)\n        properties(language: $language) {\n            ...PropertyFields\n        }\n        children {\n            nodes {\n                ...StepFragment\n            }\n        }\n        fieldsetsContainers: children(names: [\"fieldsets\"]) {\n            nodes {\n                uuid\n                name\n                path\n                children {\n                    nodes {\n                        ...StepFragment\n                    }\n                }\n            }\n        }\n    }\n    ${STEP_FRAGMENT}\n    ${PROPERTY_FIELDS_FRAGMENT}\n`;\n","import {gql} from '@apollo/client';\nimport {FORM_FRAGMENT, PROPERTY_FIELDS_FRAGMENT} from './fragments';\n\nexport const GET_FORMS_LIST = gql`\n    query GetFormidableForms($workspace: Workspace!, $language: String!, $paths: [String!]!) {\n        jcr(workspace: $workspace) {\n            nodesByCriteria(criteria: {nodeType: \"fmdb:form\", paths: $paths}) {\n                nodes {\n                    uuid\n                    name\n                    path\n                    displayName(language: $language)\n                    properties(language: $language, names: [\"intro\", \"jcr:lastModified\"]) {\n                        ...PropertyFields\n                    }\n                    children {\n                        nodes {\n                            uuid\n                            name\n                            path\n                            primaryNodeType {\n                                name\n                            }\n                            properties(language: $language, names: [\"jcr:lastModified\"]) {\n                                ...PropertyFields\n                            }\n                            children {\n                                nodes {\n                                    uuid\n                                    properties(language: $language, names: [\"jcr:lastModified\"]) {\n                                        ...PropertyFields\n                                    }\n                                    children {\n                                        nodes {\n                                            properties(language: $language, names: [\"jcr:lastModified\"]) {\n                                                ...PropertyFields\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    ${PROPERTY_FIELDS_FRAGMENT}\n`;\n\nexport const GET_FORM_DETAILS = gql`\n    query GetFormidableForm($workspace: Workspace!, $language: String!, $uuid: String!) {\n        jcr(workspace: $workspace) {\n            nodeById(uuid: $uuid) {\n                ...FormFragment\n            }\n        }\n    }\n    ${FORM_FRAGMENT}\n`;\n\nexport const GET_SITE_LANGUAGES = gql`\n    query GetSiteLanguages($workspace: Workspace!, $sitePath: String!) {\n        jcr(workspace: $workspace) {\n            nodeByPath(path: $sitePath) {\n                languages: property(name: \"j:languages\") {\n                    values\n                }\n            }\n        }\n    }\n`;\n","import {gql} from '@apollo/client';\n\nexport const CREATE_FORM_MUTATION = gql`\n    mutation CreateForm($workspace: Workspace!, $parentPath: String!, $name: String!, $language: String!, $title: String!, $intro: String) {\n        jcr(workspace: $workspace) {\n            addNode(\n                parentPathOrId: $parentPath\n                name: $name\n                primaryNodeType: \"fmdb:form\"\n                properties: [\n                    {name: \"jcr:title\", value: $title, language: $language}\n                    {name: \"intro\", value: $intro, language: $language}\n                ]\n            ) {\n                uuid\n            }\n        }\n    }\n`;\n\nexport const UPDATE_FORM_METADATA_MUTATION = gql`\n    mutation UpdateFormMetadata($workspace: Workspace!, $pathOrId: String!, $language: String!, $title: String!, $intro: String) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                mutateProperty_title: mutateProperty(name: \"jcr:title\") {\n                    setValue(value: $title, language: $language)\n                }\n                mutateProperty_intro: mutateProperty(name: \"intro\") {\n                    setValue(value: $intro, language: $language)\n                }\n                uuid\n            }\n        }\n    }\n`;\n\nexport const UPDATE_FORM_MIXIN_RESPONSES_MUTATION = gql`\n    mutation UpdateFormMixinResponses($workspace: Workspace!, $pathOrId: String!, $language: String!, $submissionMessage: String, $errorMessage: String) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                addMixin(mixin: \"fmdbmix:responses\")\n                mutateProperty_submissionMessage: mutateProperty(name: \"submissionMessage\") {\n                    setValue(value: $submissionMessage, language: $language)\n                }\n                mutateProperty_errorMessage: mutateProperty(name: \"errorMessage\") {\n                    setValue(value: $errorMessage, language: $language)\n                }\n                uuid\n            }\n        }\n    }\n`;\n\nexport const UPDATE_FORM_MIXIN_BUTTONS_MUTATION = gql`\n    mutation UpdateFormMixinButtons($workspace: Workspace!, $pathOrId: String!, $language: String!, $submitBtnLabel: String, $resetBtnLabel: String, $showResetBtn: String, $newFormBtnLabel: String, $showNewFormBtn: String, $tryAgainBtnLabel: String, $showTryAgainBtn: String) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                addMixin(mixin: \"fmdbmix:buttons\")\n                mutateProperty_submitBtnLabel: mutateProperty(name: \"submitBtnLabel\") {\n                    setValue(value: $submitBtnLabel, language: $language)\n                }\n                mutateProperty_resetBtnLabel: mutateProperty(name: \"resetBtnLabel\") {\n                    setValue(value: $resetBtnLabel, language: $language)\n                }\n                mutateProperty_showResetBtn: mutateProperty(name: \"showResetBtn\") {\n                    setValue(value: $showResetBtn)\n                }\n                mutateProperty_newFormBtnLabel: mutateProperty(name: \"newFormBtnLabel\") {\n                    setValue(value: $newFormBtnLabel, language: $language)\n                }\n                mutateProperty_showNewFormBtn: mutateProperty(name: \"showNewFormBtn\") {\n                    setValue(value: $showNewFormBtn)\n                }\n                mutateProperty_tryAgainBtnLabel: mutateProperty(name: \"tryAgainBtnLabel\") {\n                    setValue(value: $tryAgainBtnLabel, language: $language)\n                }\n                mutateProperty_showTryAgainBtn: mutateProperty(name: \"showTryAgainBtn\") {\n                    setValue(value: $showTryAgainBtn)\n                }\n                uuid\n            }\n        }\n    }\n`;\n\nexport const UPDATE_FORM_MIXIN_ACTIONS_MUTATION = gql`\n    mutation UpdateFormMixinActions($workspace: Workspace!, $pathOrId: String!, $customTarget: String) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                addMixin(mixin: \"fmdbmix:actions\")\n                mutateProperty(name: \"customTarget\") {\n                    setValue(value: $customTarget)\n                }\n                uuid\n            }\n        }\n    }\n`;\n\nexport const UPDATE_FORM_MIXIN_STYLE_MUTATION = gql`\n    mutation UpdateFormMixinStyle($workspace: Workspace!, $pathOrId: String!, $css: String) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                addMixin(mixin: \"fmdbmix:style\")\n                mutateProperty(name: \"css\") {\n                    setValue(value: $css)\n                }\n                uuid\n            }\n        }\n    }\n`;\n\nexport const DELETE_NODE_MUTATION = gql`\n    mutation DeleteNode($workspace: Workspace!, $pathOrId: String!) {\n        jcr(workspace: $workspace) {\n            deleteNode(pathOrId: $pathOrId)\n        }\n    }\n`;\n\nexport const ADD_STEP_MUTATION = gql`\n    mutation AddFieldset($workspace: Workspace!, $parentPath: String!, $name: String!, $language: String!, $title: String!, $description: String) {\n        jcr(workspace: $workspace) {\n            addNode(\n                parentPathOrId: $parentPath\n                name: $name\n                primaryNodeType: \"fmdb:fieldset\"\n                properties: [\n                    {name: \"jcr:title\", value: $title, language: $language}\n                    {name: \"jcr:description\", value: $description, language: $language}\n                ]\n            ) {\n                uuid\n            }\n        }\n    }\n`;\n\nexport const UPDATE_STEP_MUTATION = gql`\n    mutation UpdateFieldset($workspace: Workspace!, $pathOrId: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                setPropertiesBatch(properties: $properties) {\n                    property {\n                        name\n                    }\n                }\n                uuid\n            }\n        }\n    }\n`;\n\nexport const REORDER_STEPS_MUTATION = gql`\n    mutation ReorderSteps($workspace: Workspace!, $pathOrId: String!, $names: [String!]!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                reorderChildren(names: $names)\n            }\n        }\n    }\n`;\n\nexport const ADD_FIELD_MUTATION = gql`\n    mutation AddField($workspace: Workspace!, $parentPath: String!, $name: String!, $primaryNodeType: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: $workspace) {\n            addNode(\n                parentPathOrId: $parentPath\n                name: $name\n                primaryNodeType: $primaryNodeType\n                properties: $properties\n            ) {\n                uuid\n            }\n        }\n    }\n`;\n\nexport const UPDATE_FIELD_MUTATION = gql`\n    mutation UpdateField($workspace: Workspace!, $pathOrId: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                setPropertiesBatch(properties: $properties) {\n                    property {\n                        name\n                    }\n                }\n                uuid\n            }\n        }\n    }\n`;\n\nexport const REORDER_FIELDS_MUTATION = gql`\n    mutation ReorderFields($workspace: Workspace!, $pathOrId: String!, $names: [String!]!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                reorderChildren(names: $names)\n            }\n        }\n    }\n`;\n\nexport const RENAME_NODE_MUTATION = gql`\n    mutation RenameNode($workspace: Workspace!, $pathOrId: String!, $name: String!) {\n        jcr(workspace: $workspace) {\n            mutateNode(pathOrId: $pathOrId) {\n                rename(name: $name)\n                uuid\n            }\n        }\n    }\n`;\n","export const slugify = value => {\n    if (!value) {\n        return '';\n    }\n\n    return value\n        .toString()\n        .trim()\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, '-')\n        .replace(/^-+|-+$/g, '')\n        .substring(0, 42);\n};\n","import {useCallback, useMemo} from 'react';\nimport {useMutation, useQuery} from '@apollo/client';\nimport {useFormBuilderContext} from '../contexts/FormBuilderContext';\nimport {GET_FORMS_LIST} from '../graphql/queries';\nimport {CREATE_FORM_MUTATION, DELETE_NODE_MUTATION} from '../graphql/mutations';\nimport {slugify} from '../utils/string';\n\nconst buildStepCount = node => {\n    const fieldsets = ((node.children || {}).nodes || []).filter(child => child.primaryNodeType?.name === 'fmdb:fieldset');\n    return fieldsets.length;\n};\n\nconst getLatestModifiedDate = node => {\n    const dates = [];\n\n    // Add the form's own last modified date\n    const formLastModified = node.properties?.find(property => property.name === 'jcr:lastModified')?.value;\n    if (formLastModified) {\n        dates.push(new Date(formLastModified));\n    }\n\n    // Recursively collect last modified dates from all child nodes\n    const collectDates = (currentNode, depth = 0) => {\n        // Only go 3 levels deep to avoid infinite recursion\n        if (depth > 3) {\n            return;\n        }\n\n        if (currentNode.properties && Array.isArray(currentNode.properties)) {\n            const lastModified = currentNode.properties.find(property => property.name === 'jcr:lastModified')?.value;\n            if (lastModified) {\n                dates.push(new Date(lastModified));\n            }\n        }\n\n        if (currentNode.children && currentNode.children.nodes && Array.isArray(currentNode.children.nodes)) {\n            currentNode.children.nodes.forEach(child => collectDates(child, depth + 1));\n        }\n    };\n\n    // Start collecting from all fieldsets\n    const fieldsets = ((node.children || {}).nodes || []).filter(child => child.primaryNodeType?.name === 'fmdb:fieldset');\n    fieldsets.forEach(fieldset => collectDates(fieldset));\n\n    // Return the most recent date, or null if no dates found\n    if (dates.length > 0) {\n        return new Date(Math.max(...dates.map(date => date.getTime())));\n    }\n\n    return null;\n};\n\nexport const useFormList = () => {\n    const {workspace, language, formsPath} = useFormBuilderContext();\n    const {data, loading, refetch} = useQuery(GET_FORMS_LIST, {\n        variables: {workspace, language, paths: [formsPath]},\n        fetchPolicy: 'network-only'\n    });\n\n    const [createFormMutation, {loading: creating}] = useMutation(CREATE_FORM_MUTATION);\n    const [deleteMutation, {loading: deleting}] = useMutation(DELETE_NODE_MUTATION);\n\n    const forms = useMemo(() => {\n        const nodes = data?.jcr?.nodesByCriteria?.nodes || [];\n\n        return nodes.map(node => ({\n            id: node.uuid,\n            name: node.name,\n            path: node.path,\n            title: node.displayName || node.name,\n            intro: node.properties?.find(property => property.name === 'intro')?.value || '',\n            steps: buildStepCount(node),\n            updatedAt: getLatestModifiedDate(node)\n        }));\n    }, [data]);\n\n    const createForm = useCallback(async form => {\n        const name = slugify(form.title) || `form-${Date.now()}`;\n\n        await createFormMutation({\n            variables: {\n                workspace,\n                parentPath: formsPath,\n                name,\n                language,\n                title: form.title,\n                intro: form.intro || ''\n            }\n        });\n\n        await refetch();\n    }, [createFormMutation, formsPath, language, refetch, workspace]);\n\n    const deleteForm = useCallback(async pathOrId => {\n        await deleteMutation({\n            variables: {\n                workspace,\n                pathOrId\n            }\n        });\n\n        await refetch();\n    }, [deleteMutation, refetch, workspace]);\n\n    return {\n        forms,\n        loading: loading || creating || deleting,\n        createForm,\n        deleteForm,\n        refetch\n    };\n};\n","import React, {useMemo, useState} from 'react';\nimport {useHistory, useRouteMatch} from 'react-router';\nimport {Button, Chip, LayoutContent, Loader, Paper, Typography, Header} from '@jahia/moonstone';\nimport {useTranslation} from 'react-i18next';\nimport {CreateFormPanel} from './CreateFormPanel';\nimport {useFormList} from '../../hooks/useFormList';\nimport {FORM_NAMESPACE} from '../../constants/formBuilder';\nimport {useFormBuilderContext} from '../../contexts/FormBuilderContext';\nimport {Copy, Delete as DeleteIcon, Edit as EditIcon, Setting as SettingIcon, ViewStream, Visibility} from '@jahia/moonstone/dist/icons';\nimport './FormListView.scss';\n\nexport const FormListView = () => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const history = useHistory();\n    const match = useRouteMatch();\n    const {language} = useFormBuilderContext();\n    const {forms, loading, createForm, deleteForm, refetch} = useFormList();\n    const [createOpen, setCreateOpen] = useState(false);\n\n    const basePath = (match?.url || '/form-builder').replace(/\\*$/, '');\n\n    const navigateToForm = form => {\n        history.push({\n            pathname: `${basePath}/${form.id}`,\n            state: {formTitle: form.title}\n        });\n    };\n\n    const navigateToSettings = form => {\n        history.push({\n            pathname: `${basePath}/${form.id}/settings`,\n            state: {formTitle: form.title}\n        });\n    };\n\n    const navigateToPreview = form => {\n        history.push(`${basePath}/${form.id}?view=preview`);\n    };\n\n    const navigateToSubmissions = form => {\n        history.push(`${basePath}/${form.id}?view=submissions`);\n    };\n\n    const handleDelete = async form => {\n        /* eslint-disable-next-line no-alert */\n        const confirmed = window.confirm(t('list.actions.deleteConfirm', {title: form.title}));\n        if (!confirmed) {\n            return;\n        }\n\n        await deleteForm(form.path);\n    };\n\n    const formatUpdatedAt = useMemo(() => {\n        let formatter = null;\n        try {\n            formatter = new Intl.DateTimeFormat(language || 'en', {\n                dateStyle: 'medium',\n                timeStyle: 'short'\n            });\n        } catch (error) {\n            console.warn('Unable to format date for locale', language, error);\n        }\n\n        return value => {\n            if (!value) {\n                return t('list.cards.neverUpdated');\n            }\n\n            try {\n                return formatter ? formatter.format(new Date(value)) : value;\n            } catch {\n                return value;\n            }\n        };\n    }, [language, t]);\n\n    const handleDuplicate = async form => {\n        const duplicateTitle = t('list.cards.duplicateName', {title: form.title});\n        await createForm({\n            title: duplicateTitle,\n            intro: form.intro\n        });\n    };\n\n    return (\n        <LayoutContent\n            header={(\n                <Header\n                    title={t('list.title')}\n                    subtitle={t('list.subtitle')}\n                    mainActions={[\n                        <Button\n                            key=\"refresh\"\n                            size=\"big\"\n                            label={t('actions.refresh')}\n                            isDisabled={loading}\n                            onClick={() => refetch()}\n                        />,\n                        <Button\n                            key=\"createForm\"\n                            color=\"accent\"\n                            size=\"big\"\n                            label={t('actions.create')}\n                            onClick={() => setCreateOpen(true)}\n                        />\n                    ]}\n                />\n            )}\n            content={(\n                <div className=\"fb-list\">\n                    {createOpen && (\n                        <div className=\"fb-list__section\">\n                            <CreateFormPanel\n                                isOpen={createOpen}\n                                isLoading={loading}\n                                onCancel={() => setCreateOpen(false)}\n                                onSubmit={async payload => {\n                                    await createForm(payload);\n                                    setCreateOpen(false);\n                                }}\n                            />\n                        </div>\n                    )}\n\n                    <Paper className=\"fb-list__panel fb-list__section\">\n                        {loading && (\n                            <div className=\"fb-list__loading\">\n                                <Loader size=\"big\"/>\n                                <Typography variant=\"body\">{t('states.loading')}</Typography>\n                            </div>\n                        )}\n\n                        {!loading && forms.length === 0 && (\n                            <div className=\"fb-list__empty\">\n                                <Typography variant=\"body\">{t('list.empty')}</Typography>\n                            </div>\n                        )}\n\n                        {!loading && forms.length > 0 && (\n                            <div className=\"fb-card-grid\">\n                                {forms.map(form => (\n                                    <Paper key={form.id} className=\"fb-card\">\n                                        <div className=\"fb-card__header\">\n                                            <div className=\"fb-card__title\">\n                                                <Typography variant=\"subheading\">{form.title}</Typography>\n                                                <Typography variant=\"caption\">{form.name}</Typography>\n                                            </div>\n                                            <Chip\n                                                color=\"accent\"\n                                                size=\"small\"\n                                                label={t('list.columns.stepCount', {count: form.steps})}\n                                            />\n                                        </div>\n\n                                        <div className=\"fb-card__intro\">\n                                            {form.intro ? (\n                                                <div\n                                                    /* eslint-disable-next-line react/no-danger */\n                                                    dangerouslySetInnerHTML={{__html: form.intro}}\n                                                    className=\"fb-card__intro-html\"\n                                                />\n                                            ) : (\n                                                <Typography variant=\"body\">{t('list.cards.introFallback')}</Typography>\n                                            )}\n                                        </div>\n\n                                        <div className=\"fb-card__meta\">\n                                            <div className=\"fb-card__meta-item\">\n                                                <Typography variant=\"caption\">{t('list.cards.updated')}</Typography>\n                                                <Typography variant=\"body\">{formatUpdatedAt(form.updatedAt)}</Typography>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"fb-card__actions\">\n                                            {[\n                                                [\n                                                    {\n                                                        key: 'preview',\n                                                        label: t('actions.preview'),\n                                                        onClick: () => navigateToPreview(form),\n                                                        icon: Visibility\n                                                    },\n                                                    {\n                                                        key: 'submissions',\n                                                        label: t('actions.submissions'),\n                                                        onClick: () => navigateToSubmissions(form),\n                                                        icon: ViewStream\n                                                    },\n                                                    {\n                                                        key: 'settings',\n                                                        label: t('actions.settings'),\n                                                        onClick: () => navigateToSettings(form),\n                                                        icon: SettingIcon\n                                                    }\n                                                ],\n                                                [\n                                                    {\n                                                        key: 'duplicate',\n                                                        label: t('actions.duplicate'),\n                                                        onClick: () => handleDuplicate(form),\n                                                        icon: Copy\n                                                    },\n                                                    {\n                                                        key: 'edit',\n                                                        label: t('actions.edit'),\n                                                        onClick: () => navigateToForm(form),\n                                                        icon: EditIcon\n                                                    },\n                                                    {\n                                                        key: 'delete',\n                                                        label: t('actions.delete'),\n                                                        onClick: () => handleDelete(form),\n                                                        icon: DeleteIcon,\n                                                        color: 'danger'\n                                                    }\n                                                ]\n                                            ].map(row => (\n                                                <div key={`actions-row-${row.map(action => action.key).join('-')}`} className=\"fb-card__actions-row\">\n                                                    {row.map(action => {\n                                                        const IconComponent = action.icon;\n                                                        return (\n                                                            <Button\n                                                                key={action.key}\n                                                                size=\"default\"\n                                                                variant=\"ghost\"\n                                                                color={action.color || 'default'}\n                                                                icon={<IconComponent size=\"small\"/>}\n                                                                label={action.label}\n                                                                onClick={action.onClick}\n                                                            />\n                                                        );\n                                                    })}\n                                                </div>\n                                            ))}\n                                        </div>\n                                    </Paper>\n                                ))}\n                            </div>\n                        )}\n                    </Paper>\n                </div>\n            )}\n        />\n    );\n};\n","import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {Button, Typography, Paper} from '@jahia/moonstone';\nimport {DndContext, PointerSensor, useSensor, useSensors} from '@dnd-kit/core';\nimport {SortableContext, verticalListSortingStrategy, useSortable, arrayMove} from '@dnd-kit/sortable';\nimport {CSS} from '@dnd-kit/utilities';\nimport {useTranslation} from 'react-i18next';\nimport {FIELD_TYPES, FORM_NAMESPACE} from '../../../constants/formBuilder';\nimport {\n    Calendar,\n    CheckboxChecked,\n    CloudUpload,\n    Clock,\n    Follow,\n    Hidden,\n    ListSelection,\n    MultipleListSelector,\n    Palette,\n    Paragraph,\n    RadioChecked,\n    Rocket,\n    Text\n} from '@jahia/moonstone/dist/icons';\n\nconst FIELD_TYPE_ICONS = {\n    inputButton: Follow,\n    inputCheckbox: CheckboxChecked,\n    checkboxGroup: MultipleListSelector,\n    inputColor: Palette,\n    inputDate: Calendar,\n    inputDatetimeLocal: Clock,\n    inputEmail: Rocket,\n    inputFile: CloudUpload,\n    inputHidden: Hidden,\n    inputRadio: RadioChecked,\n    radioGroup: RadioChecked,\n    inputText: Text,\n    select: ListSelection,\n    textarea: Paragraph\n};\n\nconst StepItem = ({step, isActive, onSelect, onRemove}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const {attributes, listeners, setNodeRef, transform, transition} = useSortable({id: step.id});\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition\n    };\n\n    return (\n        <li ref={setNodeRef} style={style} className={`fb-step${isActive ? ' fb-step--active' : ''}`} {...attributes} {...listeners}>\n            <button type=\"button\" className=\"fb-step__button\" onClick={() => onSelect(step.id)}>\n                <Typography variant=\"body\" weight=\"bold\">{step.label}</Typography>\n                <Typography variant=\"caption\">{step.fields.length} fields</Typography>\n            </button>\n            <Button label={t('builder.sidebar.removeStep')} className=\"fb-step__delete\" onClick={() => onRemove(step.id)}/>\n        </li>\n    );\n};\n\nStepItem.propTypes = {\n    step: PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        label: PropTypes.string.isRequired,\n        fields: PropTypes.array\n    }).isRequired,\n    isActive: PropTypes.bool.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    onRemove: PropTypes.func.isRequired\n};\n\nexport const Sidebar = ({steps, activeStepId, onSelectStep, onAddStep, onRemoveStep, onReorderSteps, onAddField}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const [activeTab, setActiveTab] = useState('steps');\n    const sensors = useSensors(useSensor(PointerSensor, {activationConstraint: {distance: 8}}));\n\n    const handleDragEnd = event => {\n        const {active, over} = event;\n        if (!over || active.id === over.id) {\n            return;\n        }\n\n        const previousIndex = steps.findIndex(step => step.id === active.id);\n        const nextIndex = steps.findIndex(step => step.id === over.id);\n        if (previousIndex === -1 || nextIndex === -1) {\n            return;\n        }\n\n        const reordered = arrayMove(steps, previousIndex, nextIndex);\n        onReorderSteps(reordered);\n    };\n\n    return (\n        <Paper className=\"fb-sidebar\">\n            <div className=\"fb-sidebar__header\">\n                <Typography variant=\"subheading\">{t('builder.sidebar.title')}</Typography>\n            </div>\n            <div className=\"fb-sidebar__tabs\">\n                <Button\n                    variant={activeTab === 'steps' ? 'primary' : 'ghost'}\n                    size=\"big\"\n                    label={t('builder.sidebar.stepsTab')}\n                    onClick={() => setActiveTab('steps')}\n                />\n                <Button\n                    variant={activeTab === 'fields' ? 'primary' : 'ghost'}\n                    size=\"big\"\n                    label={t('builder.sidebar.fieldsTab')}\n                    onClick={() => setActiveTab('fields')}\n                />\n            </div>\n            {activeTab === 'steps' && (\n                <>\n                    <div className=\"fb-sidebar__header\" style={{paddingTop: 0}}>\n                        <Button color=\"accent\" label={t('builder.sidebar.addStep')} onClick={onAddStep}/>\n                    </div>\n                    <DndContext sensors={sensors} onDragEnd={handleDragEnd}>\n                        <SortableContext items={steps.map(step => step.id)} strategy={verticalListSortingStrategy}>\n                            <ul className=\"fb-step-list\">\n                                {steps.map(step => (\n                                    <StepItem\n                                        key={step.id}\n                                        step={step}\n                                        isActive={step.id === activeStepId}\n                                        onSelect={onSelectStep}\n                                        onRemove={onRemoveStep}\n                                    />\n                                ))}\n                            </ul>\n                        </SortableContext>\n                    </DndContext>\n                </>\n            )}\n            {activeTab === 'fields' && (\n                <div className=\"fb-sidebar__fields\">\n                    <Typography variant=\"subheading\">{t('builder.fields.addField')}</Typography>\n                    <div className=\"fb-field-type-grid\">\n                        {FIELD_TYPES.filter(type => !type.allowedParents || type.allowedParents.includes('step')).map(type => {\n                            const IconComponent = FIELD_TYPE_ICONS[type.id];\n                            return (\n                                <Button\n                                    key={type.id}\n                                    label={t(`fields.types.${type.id}`)}\n                                    icon={IconComponent ? <IconComponent size=\"small\"/> : null}\n                                    isDisabled={!activeStepId}\n                                    onClick={() => onAddField(activeStepId, type.id)}\n                                />\n                            );\n                        })}\n                    </div>\n                </div>\n            )}\n        </Paper>\n    );\n};\n\nSidebar.propTypes = {\n    steps: PropTypes.array.isRequired,\n    activeStepId: PropTypes.string,\n    onSelectStep: PropTypes.func.isRequired,\n    onAddStep: PropTypes.func.isRequired,\n    onRemoveStep: PropTypes.func.isRequired,\n    onReorderSteps: PropTypes.func.isRequired,\n    onAddField: PropTypes.func.isRequired\n};\n\nSidebar.defaultProps = {\n    activeStepId: null\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Typography} from '@jahia/moonstone';\n\nexport const FieldPreview = ({field}) => {\n    if (!field) {\n        return null;\n    }\n\n    const renderField = () => {\n        const {type, properties = {}, label} = field;\n\n        switch (type) {\n            case 'inputText':\n            case 'inputEmail':\n            case 'inputColor':\n            case 'inputDate':\n            case 'inputDatetimeLocal':\n            case 'inputFile':\n            case 'inputHidden':\n                return (\n                    <input\n                        readOnly\n                        type={type.replace('input', '').toLowerCase()}\n                        disabled={type === 'inputFile'}\n                        value={properties.defaultValue || ''}\n                        placeholder={properties.placeholder || ''}\n                        className=\"fb-field-preview__input\"\n                    />\n                );\n            case 'inputCheckbox':\n                return (\n                    <input\n                        disabled\n                        type=\"checkbox\"\n                        checked={properties.defaultChecked || false}\n                        className=\"fb-field-preview__checkbox\"\n                    />\n                );\n            case 'checkboxGroup': {\n                // Render checkboxes based on nested fields\n                const checkboxOptions = field.fields || [];\n                return (\n                    <div className=\"fb-field-preview__group\">\n                        {checkboxOptions.map(option => (\n                            <label key={option.id} className=\"fb-field-preview__option\">\n                                <input\n                                    disabled\n                                    type=\"checkbox\"\n                                    checked={option.properties?.defaultChecked || false}\n                                />\n                                <span>{option.label || option.name}</span>\n                            </label>\n                        ))}\n                        {checkboxOptions.length === 0 && (\n                            <span className=\"fb-field-preview__placeholder\">No options configured</span>\n                        )}\n                    </div>\n                );\n            }\n\n            case 'radioGroup': {\n                // Render radio buttons based on nested fields\n                const radioOptions = field.fields || [];\n                return (\n                    <div className=\"fb-field-preview__group\">\n                        {radioOptions.map(option => (\n                            <label key={option.id} className=\"fb-field-preview__option\">\n                                <input\n                                    disabled\n                                    type=\"radio\"\n                                    checked={option.properties?.defaultChecked || false}\n                                    name={`preview-${field.id}`}\n                                />\n                                <span>{option.label || option.name}</span>\n                            </label>\n                        ))}\n                        {radioOptions.length === 0 && (\n                            <span className=\"fb-field-preview__placeholder\">No options configured</span>\n                        )}\n                    </div>\n                );\n            }\n\n            case 'select':\n                return (\n                    <select disabled className=\"fb-field-preview__select\">\n                        {(properties.options || []).map(option => (\n                            <option key={option.value} value={option.value} selected={option.selected}>\n                                {option.label}\n                            </option>\n                        ))}\n                    </select>\n                );\n            case 'textarea':\n                return (\n                    <textarea\n                        readOnly\n                        value={properties.defaultValue || ''}\n                        placeholder={properties.placeholder || ''}\n                        rows={properties.rows || 3}\n                        className=\"fb-field-preview__textarea\"\n                    />\n                );\n            case 'inputButton':\n                return (\n                    <button\n                        disabled\n                        type=\"button\"\n                        className={`fb-field-preview__button fb-field-preview__button--${properties.variant || 'primary'}`}\n                    >\n                        {label || 'Button'}\n                    </button>\n                );\n            default:\n                return (\n                    <div className=\"fb-field-preview__unknown\">\n                        Unknown field type: {type}\n                    </div>\n                );\n        }\n    };\n\n    return (\n        <div className=\"fb-field-preview\">\n            {field.label && (\n                <Typography variant=\"caption\" className=\"fb-field-preview__label\">\n                    {field.label}\n                </Typography>\n            )}\n            {renderField()}\n        </div>\n    );\n};\n\nFieldPreview.propTypes = {\n    field: PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        label: PropTypes.string,\n        type: PropTypes.string.isRequired,\n        properties: PropTypes.object,\n        fields: PropTypes.array\n    }).isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Button, Input, Paper, Typography} from '@jahia/moonstone';\nimport {DndContext, PointerSensor, useSensor, useSensors} from '@dnd-kit/core';\nimport {SortableContext, arrayMove, useSortable, verticalListSortingStrategy} from '@dnd-kit/sortable';\nimport {CSS} from '@dnd-kit/utilities';\nimport {useTranslation} from 'react-i18next';\nimport {FORM_NAMESPACE} from '../../../constants/formBuilder';\nimport {FieldPreview} from '../fields/FieldPreview';\n\nconst FieldRow = ({field, isActive, onSelect, onRemove}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const {attributes, listeners, setNodeRef, transform, transition} = useSortable({id: field.id});\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition\n    };\n\n    return (\n        <li\n            ref={setNodeRef}\n            style={style}\n            className={`fb-field-row${isActive ? ' fb-field-row--active' : ''}`}\n            {...attributes}\n            {...listeners}\n        >\n            <div className=\"fb-field-row__content\">\n                <button type=\"button\" className=\"fb-field-row__button\" onClick={() => onSelect(field.id)}>\n                    <Typography variant=\"body\" weight=\"bold\">{field.label || field.name}</Typography>\n                    <Typography variant=\"caption\">{field.type}</Typography>\n                </button>\n                <FieldPreview field={field}/>\n            </div>\n            <Button label={t('builder.fields.remove')} onClick={() => onRemove(field.id)}/>\n        </li>\n    );\n};\n\nFieldRow.propTypes = {\n    field: PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        label: PropTypes.string,\n        name: PropTypes.string.isRequired,\n        type: PropTypes.string\n    }).isRequired,\n    isActive: PropTypes.bool.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    onRemove: PropTypes.func.isRequired\n};\n\nexport const StepEditor = ({\n    step,\n    onUpdateStep,\n    onRemoveField,\n    onSelectField,\n    onReorderFields,\n    activeFieldId\n}) => {\n    const sensors = useSensors(useSensor(PointerSensor, {activationConstraint: {distance: 8}}));\n    const {t} = useTranslation(FORM_NAMESPACE);\n\n    if (!step) {\n        return (\n            <Paper className=\"fb-step-editor\">\n                <Typography variant=\"body\">{t('builder.step.empty')}</Typography>\n            </Paper>\n        );\n    }\n\n    const handleDragEnd = event => {\n        const {active, over} = event;\n        if (!over || active.id === over.id) {\n            return;\n        }\n\n        const previousIndex = step.fields.findIndex(field => field.id === active.id);\n        const nextIndex = step.fields.findIndex(field => field.id === over.id);\n        if (previousIndex === -1 || nextIndex === -1) {\n            return;\n        }\n\n        onReorderFields(step.id, arrayMove(step.fields, previousIndex, nextIndex));\n    };\n\n    return (\n        <Paper className=\"fb-step-editor\">\n            <div className=\"fb-step-editor__header\">\n                <Typography variant=\"heading\">{step.label}</Typography>\n            </div>\n            <div className=\"fb-step-editor__form\">\n                <label className=\"fb-field\">\n                    <Typography variant=\"subheading\">{t('builder.step.label')}</Typography>\n                    <Input value={step.label} onChange={event => onUpdateStep(step.id, {label: event.target.value})}/>\n                </label>\n                <label className=\"fb-field\">\n                    <Typography variant=\"subheading\">{t('builder.step.description')}</Typography>\n                    <textarea\n                        rows={3}\n                        className=\"fb-textarea\"\n                        value={step.description}\n                        onChange={event => onUpdateStep(step.id, {description: event.target.value})}\n                    />\n                </label>\n            </div>\n\n            <div className=\"fb-step-editor__list\">\n                <Typography variant=\"subheading\">{t('builder.fields.title')}</Typography>\n                {step.fields.length === 0 && (\n                    <Typography variant=\"body\">{t('builder.fields.empty')}</Typography>\n                )}\n\n                {step.fields.length > 0 && (\n                    <DndContext sensors={sensors} onDragEnd={handleDragEnd}>\n                        <SortableContext items={step.fields.map(field => field.id)} strategy={verticalListSortingStrategy}>\n                            <ul className=\"fb-field-list\">\n                                {step.fields.map(field => (\n                                    <FieldRow\n                                        key={field.id}\n                                        field={field}\n                                        isActive={field.id === activeFieldId}\n                                        onSelect={onSelectField}\n                                        onRemove={fieldId => onRemoveField(step.id, fieldId)}\n                                    />\n                                ))}\n                            </ul>\n                        </SortableContext>\n                    </DndContext>\n                )}\n            </div>\n        </Paper>\n    );\n};\n\nStepEditor.propTypes = {\n    step: PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        label: PropTypes.string,\n        description: PropTypes.string,\n        fields: PropTypes.array\n    }),\n    onUpdateStep: PropTypes.func.isRequired,\n    onRemoveField: PropTypes.func.isRequired,\n    onSelectField: PropTypes.func.isRequired,\n    onReorderFields: PropTypes.func.isRequired,\n    activeFieldId: PropTypes.string\n};\n\nStepEditor.defaultProps = {\n    step: null,\n    activeFieldId: null\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Button, Checkbox, Dropdown, Input, Paper, Textarea as MoonstoneTextarea, Typography} from '@jahia/moonstone';\nimport {useTranslation} from 'react-i18next';\nimport {FIELD_TYPES, FORM_NAMESPACE} from '../../../constants/formBuilder';\n\nexport const FieldEditor = ({field, stepId, onChangeField, onAddNestedField}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const FormTextarea = MoonstoneTextarea || (({className = '', ...props}) => (\n        <textarea className={`moonstone-textarea ${className}`.trim()} {...props}/>\n    ));\n\n    if (!field) {\n        return (\n            <Paper className=\"fb-field-editor\">\n                <Typography variant=\"body\">{t('builder.fields.selectField')}</Typography>\n            </Paper>\n        );\n    }\n\n    const updateField = partial => {\n        onChangeField(stepId, field.id, partial);\n    };\n\n    const updateProperty = (name, value) => {\n        updateField({\n            properties: {\n                ...field.properties,\n                [name]: value\n            }\n        });\n    };\n\n    const definition = FIELD_TYPES.find(type => type.id === field.type);\n    const propertySchema = definition?.propertySchema || [];\n    const booleanDescriptors = [];\n    const beforeBoolean = [];\n    const afterBoolean = [];\n    let seenBoolean = false;\n    propertySchema.forEach(descriptor => {\n        if (descriptor.type === 'boolean') {\n            booleanDescriptors.push(descriptor);\n            seenBoolean = true;\n        } else if (!seenBoolean) {\n            beforeBoolean.push(descriptor);\n        } else {\n            afterBoolean.push(descriptor);\n        }\n    });\n    const typeLabel = definition ? t(definition.labelKey) : field.type;\n\n    const getStringArray = value => (Array.isArray(value) ? value : []);\n\n    const renderStringListField = descriptor => {\n        const items = getStringArray(field.properties[descriptor.name]);\n        const addLabel = descriptor.addLabelKey ? t(descriptor.addLabelKey) : t('builder.fields.properties.listAdd');\n        const removeLabel = descriptor.removeLabelKey ? t(descriptor.removeLabelKey) : t('builder.fields.properties.listRemove');\n        const itemLabel = index => {\n            if (descriptor.itemLabelKey) {\n                return t(descriptor.itemLabelKey, {index});\n            }\n\n            return t('builder.fields.properties.listItem', {index});\n        };\n\n        return (\n            <div key={descriptor.name} className=\"fb-field\">\n                <Typography variant=\"subheading\">{t(descriptor.labelKey)}</Typography>\n                <ul className=\"fb-options\">\n                    {items.map((option, index) => {\n                        const optionKey = `${field.id}-${descriptor.name}-${index}`;\n                        return (\n                            <li key={optionKey} className=\"fb-option-row\">\n                                <Input\n                                    value={option}\n                                    placeholder={itemLabel(index + 1)}\n                                    onChange={event => {\n                                        const next = [...items];\n                                        next[index] = event.target.value;\n                                        updateProperty(descriptor.name, next);\n                                    }}\n                                />\n                                <Button\n                                    label={removeLabel}\n                                    onClick={() => {\n                                        const next = items.filter((_, idx) => idx !== index);\n                                        updateProperty(descriptor.name, next);\n                                    }}\n                                />\n                            </li>\n                        );\n                    })}\n                </ul>\n                <Button\n                    label={addLabel}\n                    onClick={() => updateProperty(descriptor.name, [...items, ''])}\n                />\n            </div>\n        );\n    };\n\n    const renderPropertyField = descriptor => {\n        const value = field.properties?.[descriptor.name];\n        const label = t(descriptor.labelKey);\n        const key = `${field.id}-${descriptor.name}`;\n\n        switch (descriptor.type) {\n            case 'boolean':\n                return (\n                    <div key={key} className=\"fb-field fb-field--inline\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <Checkbox\n                            id={`${key}-checkbox`}\n                            checked={Boolean(value)}\n                            aria-label={label}\n                            onChange={(event, data, checked) => updateProperty(descriptor.name, checked)}\n                        />\n                    </div>\n                );\n            case 'text':\n                return (\n                    <div key={key} className=\"fb-field\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <Input\n                            value={value || ''}\n                            placeholder={descriptor.placeholderKey ? t(descriptor.placeholderKey) : undefined}\n                            onChange={event => updateProperty(descriptor.name, event.target.value)}\n                        />\n                    </div>\n                );\n            case 'multiline':\n                return (\n                    <div key={key} className=\"fb-field\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <FormTextarea\n                            rows={4}\n                            value={value || ''}\n                            onChange={event => updateProperty(descriptor.name, event.target.value)}\n                        />\n                    </div>\n                );\n            case 'number':\n                return (\n                    <div key={key} className=\"fb-field\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <Input\n                            type=\"number\"\n                            value={value === null || value === undefined ? '' : value}\n                            onChange={event => {\n                                const nextValue = event.target.value === '' ? null : Number(event.target.value);\n                                updateProperty(descriptor.name, Number.isNaN(nextValue) ? null : nextValue);\n                            }}\n                        />\n                    </div>\n                );\n            case 'date':\n                return (\n                    <div key={key} className=\"fb-field\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <Input\n                            type=\"date\"\n                            value={value || ''}\n                            onChange={event => updateProperty(descriptor.name, event.target.value || null)}\n                        />\n                    </div>\n                );\n            case 'datetime':\n                return (\n                    <div key={key} className=\"fb-field\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <Input\n                            type=\"datetime-local\"\n                            value={value || ''}\n                            onChange={event => updateProperty(descriptor.name, event.target.value || null)}\n                        />\n                    </div>\n                );\n            case 'select': {\n                const data = (descriptor.options || []).map(option => ({\n                    value: option.value,\n                    label: t(option.labelKey)\n                }));\n                const selectedValue = value || descriptor.defaultValue || data[0]?.value || '';\n\n                return (\n                    <div key={key} className=\"fb-field\">\n                        <Typography variant=\"subheading\">{label}</Typography>\n                        <Dropdown\n                            data={data}\n                            value={selectedValue}\n                            placeholder={t('builder.fields.properties.selectPlaceholder')}\n                            onChange={(event, item) => updateProperty(descriptor.name, item.value)}\n                        />\n                    </div>\n                );\n            }\n\n            case 'stringList':\n                return renderStringListField(descriptor);\n            default:\n                return null;\n        }\n    };\n\n    const renderCheckboxOptions = () => {\n        if (field.type !== 'checkboxGroup') {\n            return null;\n        }\n\n        const options = field.fields || [];\n        const updateNestedField = (optionId, partial) => onChangeField(stepId, optionId, partial);\n        const updateNestedProperties = (optionId, propertiesPartial) => {\n            const option = options.find(item => item.id === optionId);\n            const nextProps = {...(option?.properties || {}), ...propertiesPartial};\n            updateNestedField(optionId, {properties: nextProps});\n        };\n\n        return (\n            <div className=\"fb-field fb-option-section\">\n                <div className=\"fb-option-section__header\">\n                    <Typography variant=\"subheading\">{t('builder.fields.checkboxGroup.optionsTitle')}</Typography>\n                    <Button\n                        color=\"accent\"\n                        label={t('builder.fields.checkboxGroup.addOption')}\n                        onClick={() => {\n                            const index = options.length + 1;\n                            const optionLabel = t('builder.fields.checkboxGroup.optionLabel', {index});\n                            onAddNestedField({\n                                parentPath: field.path,\n                                typeId: 'inputCheckbox',\n                                label: optionLabel,\n                                properties: {\n                                    value: `option-${index}`,\n                                    defaultChecked: false\n                                }\n                            });\n                        }}\n                    />\n                </div>\n                {options.length === 0 && (\n                    <Typography variant=\"body\">{t('builder.fields.checkboxGroup.empty')}</Typography>\n                )}\n                {options.length > 0 && (\n                    <div className=\"fb-option-card-list\">\n                        {options.map((option, idx) => (\n                            <div key={option.id} className=\"fb-option-card\">\n                                <div className=\"fb-option-card__header\">\n                                    <Typography variant=\"body\">{t('builder.fields.checkboxGroup.optionLabel', {index: idx + 1})}</Typography>\n                                </div>\n                                <div className=\"fb-option-card__grid\">\n                                    <div className=\"fb-field\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionLabelLabel')}</Typography>\n                                        <Input\n                                            value={option.label || ''}\n                                            onChange={event => updateNestedField(option.id, {label: event.target.value})}\n                                        />\n                                    </div>\n                                    <div className=\"fb-field\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionValueLabel')}</Typography>\n                                        <Input\n                                            value={option.properties?.value || ''}\n                                            onChange={event => updateNestedProperties(option.id, {value: event.target.value})}\n                                        />\n                                    </div>\n                                    <div className=\"fb-field fb-field--inline\">\n                                        <Typography variant=\"caption\">{t('builder.fields.properties.defaultChecked')}</Typography>\n                                        <Checkbox\n                                            checked={Boolean(option.properties?.defaultChecked)}\n                                            onChange={(event, data, checked) => updateNestedProperties(option.id, {defaultChecked: checked})}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n        );\n    };\n\n    const renderRadioOptions = () => {\n        if (field.type !== 'radioGroup') {\n            return null;\n        }\n\n        const options = field.fields || [];\n        const updateNestedField = (optionId, partial) => onChangeField(stepId, optionId, partial);\n        const updateNestedProperties = (optionId, propertiesPartial) => {\n            const option = options.find(item => item.id === optionId);\n            const nextProps = {...(option?.properties || {}), ...propertiesPartial};\n            updateNestedField(optionId, {properties: nextProps});\n        };\n\n        const handleDefaultToggle = (optionId, checked) => {\n            options.forEach(item => {\n                const isTarget = item.id === optionId;\n                const currentValue = Boolean(item.properties?.defaultChecked);\n                if (isTarget) {\n                    if (currentValue !== checked) {\n                        updateNestedProperties(item.id, {defaultChecked: checked});\n                    }\n                } else if (checked && currentValue) {\n                    updateNestedProperties(item.id, {defaultChecked: false});\n                }\n            });\n        };\n\n        return (\n            <div className=\"fb-field fb-option-section\">\n                <div className=\"fb-option-section__header\">\n                    <Typography variant=\"subheading\">{t('builder.fields.radioGroup.optionsTitle')}</Typography>\n                    <Button\n                        color=\"accent\"\n                        label={t('builder.fields.radioGroup.addOption')}\n                        onClick={() => {\n                            const index = options.length + 1;\n                            const optionLabel = t('builder.fields.radioGroup.optionLabel', {index});\n                            onAddNestedField({\n                                parentPath: field.path,\n                                typeId: 'inputRadio',\n                                label: optionLabel,\n                                properties: {\n                                    value: `option-${index}`,\n                                    defaultChecked: false\n                                }\n                            });\n                        }}\n                    />\n                </div>\n                {options.length === 0 && (\n                    <Typography variant=\"body\">{t('builder.fields.radioGroup.empty')}</Typography>\n                )}\n                {options.length > 0 && (\n                    <div className=\"fb-option-card-list\">\n                        {options.map((option, idx) => (\n                            <div key={option.id} className=\"fb-option-card\">\n                                <div className=\"fb-option-card__header\">\n                                    <Typography variant=\"body\">{t('builder.fields.radioGroup.optionLabel', {index: idx + 1})}</Typography>\n                                </div>\n                                <div className=\"fb-option-card__grid\">\n                                    <div className=\"fb-field\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionLabelLabel')}</Typography>\n                                        <Input\n                                            value={option.label || ''}\n                                            onChange={event => updateNestedField(option.id, {label: event.target.value})}\n                                        />\n                                    </div>\n                                    <div className=\"fb-field\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionValueLabel')}</Typography>\n                                        <Input\n                                            value={option.properties?.value || ''}\n                                            onChange={event => updateNestedProperties(option.id, {value: event.target.value})}\n                                        />\n                                    </div>\n                                    <div className=\"fb-field fb-field--inline\">\n                                        <Typography variant=\"caption\">{t('builder.fields.properties.defaultChecked')}</Typography>\n                                        <Checkbox\n                                            checked={Boolean(option.properties?.defaultChecked)}\n                                            onChange={(event, data, checked) => handleDefaultToggle(option.id, checked)}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n        );\n    };\n\n    const renderSelectOptions = () => {\n        if (field.type !== 'select') {\n            return null;\n        }\n\n        const options = Array.isArray(field.properties?.options) ? field.properties.options : [];\n        const allowMultiple = Boolean(field.properties?.multiple);\n\n        const updateOptions = next => updateProperty('options', next);\n\n        const updateOption = (index, partial) => {\n            updateOptions(options.map((option, idx) => (idx === index ? {...option, ...partial} : option)));\n        };\n\n        const toggleSelected = index => {\n            updateOptions(options.map((option, idx) => {\n                if (idx === index) {\n                    return {...option, selected: !option.selected};\n                }\n\n                if (!allowMultiple && idx !== index) {\n                    return {...option, selected: false};\n                }\n\n                return option;\n            }));\n        };\n\n        const removeOption = index => {\n            updateOptions(options.filter((_, idx) => idx !== index));\n        };\n\n        const addOption = () => {\n            const index = options.length + 1;\n            updateOptions([\n                ...options,\n                {\n                    label: t('builder.fields.select.optionLabel', {index}),\n                    value: `option-${Date.now()}`,\n                    selected: false\n                }\n            ]);\n        };\n\n        return (\n            <div className=\"fb-field fb-option-section\">\n                <div className=\"fb-option-section__header\">\n                    <Typography variant=\"subheading\">{t('builder.fields.select.optionsTitle')}</Typography>\n                    <Button color=\"accent\" label={t('builder.fields.select.addOption')} onClick={addOption}/>\n                </div>\n                {options.length === 0 && (\n                    <Typography variant=\"body\">{t('builder.fields.select.empty')}</Typography>\n                )}\n                {options.length > 0 && (\n                    <div className=\"fb-option-card-list\">\n                        {options.map((option, idx) => (\n                            <div key={`select-option-${option.value || idx}`} className=\"fb-option-card\">\n                                <div className=\"fb-option-card__header\">\n                                    <Typography variant=\"body\">{t('builder.fields.select.optionLabel', {index: idx + 1})}</Typography>\n                                    <Button label={t('builder.fields.properties.listRemove')} onClick={() => removeOption(idx)}/>\n                                </div>\n                                <div className=\"fb-option-card__grid\">\n                                    <div className=\"fb-field\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionLabelLabel')}</Typography>\n                                        <Input value={option.label || ''} onChange={event => updateOption(idx, {label: event.target.value})}/>\n                                    </div>\n                                    <div className=\"fb-field\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionValueLabel')}</Typography>\n                                        <Input value={option.value || ''} onChange={event => updateOption(idx, {value: event.target.value})}/>\n                                    </div>\n                                    <div className=\"fb-field fb-field--inline\">\n                                        <Typography variant=\"caption\">{t('builder.fields.select.optionSelected')}</Typography>\n                                        <Checkbox checked={Boolean(option.selected)} onChange={() => toggleSelected(idx)}/>\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n        );\n    };\n\n    return (\n        <Paper className=\"fb-field-editor\">\n            <div className=\"fb-field-editor__header\">\n                <Typography variant=\"subheading\">{t('builder.fields.editorTitle')}</Typography>\n                <Typography variant=\"caption\" className=\"fb-field-editor__type\">\n                    {typeLabel}\n                </Typography>\n            </div>\n\n            <div className=\"fb-field\">\n                <Typography variant=\"subheading\">{t('builder.fields.label')}</Typography>\n                <Input\n                    value={field.label || ''}\n                    onChange={event => {\n                        const nextLabel = event.target.value;\n                        updateField({\n                            label: nextLabel,\n                            properties: {\n                                ...field.properties,\n                                'jcr:title': nextLabel\n                            }\n                        });\n                    }}\n                />\n            </div>\n\n            <div className=\"fb-field\">\n                <Typography variant=\"subheading\">{t('builder.fields.name')}</Typography>\n                <Input value={field.name} onChange={event => updateField({name: event.target.value})}/>\n            </div>\n\n            {beforeBoolean.map(renderPropertyField)}\n\n            {booleanDescriptors.length > 0 && (\n                <div className=\"fb-boolean-group\">\n                    {booleanDescriptors.map(renderPropertyField)}\n                </div>\n            )}\n\n            {afterBoolean.map(renderPropertyField)}\n\n            {renderCheckboxOptions()}\n            {renderRadioOptions()}\n            {renderSelectOptions()}\n        </Paper>\n    );\n};\n\nFieldEditor.propTypes = {\n    field: PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        label: PropTypes.string,\n        name: PropTypes.string,\n        path: PropTypes.string,\n        type: PropTypes.string,\n        properties: PropTypes.object,\n        fields: PropTypes.array\n    }),\n    stepId: PropTypes.string,\n    onChangeField: PropTypes.func.isRequired,\n    onAddNestedField: PropTypes.func\n};\n\nFieldEditor.defaultProps = {\n    field: null,\n    stepId: null,\n    onAddNestedField: () => {}\n};\n","import {getFieldTypeByNode, getFieldPropertyNames, resolveFieldDefinition} from '../constants/formBuilder';\n\nconst getPropertyValue = (properties, name) => {\n    const source = properties || [];\n    const target = source.find(property => property.name === name);\n    if (!target) {\n        return undefined;\n    }\n\n    if (target.values && target.values.length) {\n        return target.values;\n    }\n\n    return target.value;\n};\n\nexport const propertiesToObject = properties => {\n    if (!properties) {\n        return {};\n    }\n\n    return properties.reduce((acc, property) => {\n        if (property.values && property.values.length) {\n            acc[property.name] = property.values;\n        } else {\n            acc[property.name] = property.value;\n        }\n\n        return acc;\n    }, {});\n};\n\nconst parseOptionString = raw => {\n    if (typeof raw !== 'string') {\n        return null;\n    }\n\n    let candidate = raw.trim();\n    if (!candidate) {\n        return null;\n    }\n\n    if (candidate.endsWith('.')) {\n        candidate = candidate.slice(0, -1);\n    }\n\n    try {\n        return JSON.parse(candidate);\n    } catch (_) {\n        return null;\n    }\n};\n\nexport const normalizeField = node => {\n    const primaryNodeType = node?.primaryNodeType?.name;\n    const definition = getFieldTypeByNode(primaryNodeType);\n    const properties = {};\n    const childNodes = ((node.children || {}).nodes || []);\n\n    const coerceBoolean = value => {\n        if (typeof value === 'boolean') {\n            return value;\n        }\n\n        if (typeof value === 'string') {\n            return value.toLowerCase() === 'true';\n        }\n\n        return Boolean(value);\n    };\n\n    (node.properties || []).forEach(property => {\n        if (property.name === 'options') {\n            if (Array.isArray(property.values) && property.values.length) {\n                properties[property.name] = property.values\n                    .map(entry => (typeof entry === 'string' ? parseOptionString(entry) : entry))\n                    .filter(Boolean);\n            } else if (typeof property.value === 'string' && property.value.trim().length) {\n                const parsed = parseOptionString(property.value);\n                properties[property.name] = parsed ? [parsed] : [];\n            } else if (property.value && typeof property.value === 'object') {\n                properties[property.name] = [property.value];\n            } else {\n                properties[property.name] = [];\n            }\n\n            return;\n        }\n\n        if (property.values && property.values.length) {\n            if (property.type === 'BOOLEAN') {\n                properties[property.name] = property.values.map(coerceBoolean);\n                return;\n            }\n\n            properties[property.name] = property.values;\n            return;\n        }\n\n        if (property.type === 'BOOLEAN') {\n            properties[property.name] = coerceBoolean(property.value);\n            return;\n        }\n\n        properties[property.name] = property.value;\n    });\n\n    const title = properties['jcr:title'] || node.displayName || node.name || '';\n    if (title) {\n        properties['jcr:title'] = title;\n    }\n\n    return {\n        id: node.uuid,\n        name: node.name,\n        initialName: node.name,\n        path: node.path,\n        label: title,\n        type: definition ? definition.id : primaryNodeType,\n        nodeType: primaryNodeType,\n        properties,\n        fields: childNodes.map(normalizeField)\n    };\n};\n\nexport const normalizeStep = node => {\n    const description = getPropertyValue(node.properties || [], 'jcr:description') || '';\n    const fields = ((node.children || {}).nodes || []).map(normalizeField);\n\n    return {\n        id: node.uuid,\n        name: node.name,\n        initialName: node.name,\n        path: node.path,\n        label: node.displayName || node.name,\n        description,\n        fields\n    };\n};\n\nconst isFieldsetNode = node => node?.primaryNodeType?.name === 'fmdb:fieldset';\n\nexport const normalizeForm = node => {\n    if (!node) {\n        return null;\n    }\n\n    const intro = getPropertyValue(node.properties || [], 'intro') || '';\n    const title = getPropertyValue(node.properties || [], 'jcr:title') || node.displayName || node.name;\n    const properties = propertiesToObject(node.properties || []);\n\n    const directStepNodes = ((node.children || {}).nodes || []).filter(isFieldsetNode);\n    const containerNodes = ((node.fieldsetsContainers || {}).nodes || []);\n    const containerStepNodes = containerNodes.flatMap(container => ((container.children || {}).nodes || []).filter(isFieldsetNode));\n    const stepNodes = [...directStepNodes, ...containerStepNodes];\n    const fieldsetsPath = containerNodes[0]?.path || (directStepNodes.length > 0 ? node.path : null);\n    const steps = stepNodes.map(normalizeStep);\n\n    return {\n        id: node.uuid,\n        name: node.name,\n        path: node.path,\n        label: title,\n        intro,\n        properties,\n        steps,\n        fieldsetsPath\n    };\n};\n\nexport const buildFieldPropertiesInput = (field, language) => {\n    const safeLabel = field.label || field.name || '';\n    const properties = [\n        {name: 'jcr:title', value: safeLabel, language, type: 'STRING'}\n    ];\n    const definition = resolveFieldDefinition(field.nodeType || field.type);\n    const allowedProperties = getFieldPropertyNames(definition);\n    allowedProperties.add('jcr:title');\n    allowedProperties.add('options');\n\n    Object.entries(field.properties || {}).forEach(([name, value]) => {\n        if (name === 'jcr:title') {\n            return;\n        }\n\n        if (!allowedProperties.has(name)) {\n            return;\n        }\n\n        if (value === undefined || value === null) {\n            return;\n        }\n\n        if (name === 'options' && Array.isArray(value)) {\n            const serializedOptions = value\n                .map(option => {\n                    if (!option) {\n                        return null;\n                    }\n\n                    if (typeof option === 'string') {\n                        return option;\n                    }\n\n                    try {\n                        return JSON.stringify(option);\n                    } catch (_) {\n                        return null;\n                    }\n                })\n                .filter(Boolean);\n\n            if (!serializedOptions.length) {\n                return;\n            }\n\n            properties.push({name, values: serializedOptions, language, type: 'STRING'});\n\n            return;\n        }\n\n        if (Array.isArray(value)) {\n            if (value.length === 0) {\n                return;\n            }\n\n            properties.push({name, values: value, language, type: 'STRING'});\n        } else if (typeof value === 'boolean') {\n            properties.push({name, value, type: 'BOOLEAN'});\n        } else if (typeof value === 'string') {\n            if (value.trim() === '') {\n                return;\n            }\n\n            properties.push({name, value, language, type: 'STRING'});\n        } else {\n            properties.push({name, value: value.toString(), language, type: 'STRING'});\n        }\n    });\n\n    return properties;\n};\n\nexport const buildStepPropertiesInput = (step, language) => {\n    const properties = [\n        {name: 'jcr:title', value: step.label, language, type: 'STRING'}\n    ];\n\n    if (step.description !== undefined) {\n        properties.push({name: 'jcr:description', value: step.description || '', language, type: 'STRING'});\n    }\n\n    return properties;\n};\n","import {useCallback, useEffect, useMemo, useState} from 'react';\nimport {useMutation, useQuery} from '@apollo/client';\nimport {useFormBuilderContext} from '../contexts/FormBuilderContext';\nimport {GET_FORM_DETAILS, GET_SITE_LANGUAGES} from '../graphql/queries';\nimport {\n    ADD_FIELD_MUTATION,\n    ADD_STEP_MUTATION,\n    DELETE_NODE_MUTATION,\n    RENAME_NODE_MUTATION,\n    REORDER_FIELDS_MUTATION,\n    REORDER_STEPS_MUTATION,\n    UPDATE_FIELD_MUTATION,\n    UPDATE_FORM_METADATA_MUTATION,\n    UPDATE_STEP_MUTATION\n} from '../graphql/mutations';\nimport {buildFieldPropertiesInput, buildStepPropertiesInput, normalizeForm} from '../utils/formNormalizer';\nimport {buildNewFieldTemplate} from '../constants/formBuilder';\nimport {slugify} from '../utils/string';\n\nconst createEmptySet = () => new Set();\n\nconst updateFieldNode = (node, fieldId, partial) => {\n    if (node === null || node === undefined) {\n        return node;\n    }\n\n    let childChanged = false;\n    let children = node.fields;\n\n    if (Array.isArray(node.fields) && node.fields.length) {\n        const nextChildren = node.fields.map(child => {\n            const updated = updateFieldNode(child, fieldId, partial);\n            if (updated !== child) {\n                childChanged = true;\n            }\n\n            return updated;\n        });\n\n        if (childChanged) {\n            children = nextChildren;\n        }\n    }\n\n    if (node.id === fieldId) {\n        const shouldUseChildren = partial.fields === undefined;\n        const nextFields = shouldUseChildren ? children : partial.fields;\n        return {\n            ...node,\n            ...partial,\n            fields: nextFields\n        };\n    }\n\n    if (childChanged) {\n        return {\n            ...node,\n            fields: children\n        };\n    }\n\n    return node;\n};\n\nexport const useFormEditor = formId => {\n    const {workspace, language: defaultLanguage, siteKey} = useFormBuilderContext();\n    const [activeLanguage, setActiveLanguage] = useState(defaultLanguage);\n    const [formState, setFormState] = useState(null);\n    const [saving, setSaving] = useState(false);\n    const [dirtySteps, setDirtySteps] = useState(() => new Set());\n    const [dirtyFields, setDirtyFields] = useState(() => new Set());\n    const [formMetadataDirty, setFormMetadataDirty] = useState(false);\n    const shouldSkipFormQuery = formId === null || formId === undefined || formId === '';\n\n    const {data, loading, error, refetch} = useQuery(GET_FORM_DETAILS, {\n        variables: {\n            workspace,\n            language: activeLanguage,\n            uuid: formId\n        },\n        fetchPolicy: 'no-cache',\n        skip: shouldSkipFormQuery\n    });\n\n    const {data: languagesData} = useQuery(GET_SITE_LANGUAGES, {\n        variables: {\n            workspace,\n            sitePath: `/sites/${siteKey}`\n        }\n    });\n\n    const [updateFormMutation] = useMutation(UPDATE_FORM_METADATA_MUTATION);\n    const [addStepMutation] = useMutation(ADD_STEP_MUTATION);\n    const [updateStepMutation] = useMutation(UPDATE_STEP_MUTATION);\n    const [reorderStepsMutation] = useMutation(REORDER_STEPS_MUTATION);\n    const [deleteNodeMutation] = useMutation(DELETE_NODE_MUTATION);\n    const [addFieldMutation] = useMutation(ADD_FIELD_MUTATION);\n    const [updateFieldMutation] = useMutation(UPDATE_FIELD_MUTATION);\n    const [reorderFieldsMutation] = useMutation(REORDER_FIELDS_MUTATION);\n    const [renameNodeMutation] = useMutation(RENAME_NODE_MUTATION);\n\n    useEffect(() => {\n        console.log('GET_FORM_DETAILS raw response', {data, error, json: data ? JSON.stringify(data) : null});\n\n        if (error) {\n            return;\n        }\n\n        if (data?.jcr?.nodeById) {\n            console.log('Loaded form from GraphQL', data.jcr.nodeById);\n\n            const normalized = normalizeForm(data.jcr.nodeById);\n            if (!normalized.label) {\n                normalized.label = data.jcr.nodeById.displayName || data.jcr.nodeById.name || '';\n            }\n\n            console.log('Normalized form', normalized);\n            setFormState(normalized);\n            setDirtySteps(createEmptySet());\n            setDirtyFields(createEmptySet());\n            setFormMetadataDirty(false);\n        }\n    }, [data, error]);\n\n    const siteLanguages = useMemo(() => {\n        const values = languagesData?.jcr?.nodeByPath?.languages?.values;\n        if (!values || !values.length) {\n            return [defaultLanguage];\n        }\n\n        return values;\n    }, [defaultLanguage, languagesData]);\n\n    const updateFormState = useCallback(partial => {\n        setFormState(prev => (prev ? {...prev, ...partial} : prev));\n        setFormMetadataDirty(true);\n    }, []);\n\n    const markStepDirty = useCallback(stepId => {\n        setDirtySteps(prev => {\n            const next = new Set(prev);\n            next.add(stepId);\n            return next;\n        });\n    }, []);\n\n    const markFieldDirty = useCallback(fieldId => {\n        setDirtyFields(prev => {\n            const next = new Set(prev);\n            next.add(fieldId);\n            return next;\n        });\n    }, []);\n\n    const addStep = useCallback(async () => {\n        if (!formState || !formState.path) {\n            return;\n        }\n\n        const parentPath = formState.fieldsetsPath || formState.path;\n\n        const title = `Step ${formState.steps.length + 1}`;\n        const name = slugify(title) || `step-${Date.now()}`;\n\n        await addStepMutation({\n            variables: {\n                workspace,\n                parentPath,\n                name,\n                language: activeLanguage,\n                title,\n                description: ''\n            }\n        });\n\n        await refetch();\n    }, [activeLanguage, addStepMutation, formState, refetch, workspace]);\n\n    const updateStepState = useCallback((stepId, partial) => {\n        setFormState(prev => {\n            if (!prev) {\n                return prev;\n            }\n\n            const steps = prev.steps.map(step => (step.id === stepId ? {...step, ...partial} : step));\n            return {...prev, steps};\n        });\n        markStepDirty(stepId);\n    }, [markStepDirty]);\n\n    const removeStep = useCallback(async stepId => {\n        const step = formState?.steps?.find(item => item.id === stepId);\n        if (!step) {\n            return;\n        }\n\n        await deleteNodeMutation({\n            variables: {\n                workspace,\n                pathOrId: step.path\n            }\n        });\n\n        await refetch();\n    }, [deleteNodeMutation, formState, refetch, workspace]);\n\n    const reorderSteps = useCallback(async nextOrder => {\n        if (!formState) {\n            return;\n        }\n\n        setFormState(prev => ({...prev, steps: nextOrder}));\n\n        const stepsParentPath = formState.fieldsetsPath || formState.path;\n\n        await reorderStepsMutation({\n            variables: {\n                workspace,\n                pathOrId: stepsParentPath,\n                names: nextOrder.map(step => step.name)\n            }\n        });\n\n        await refetch();\n    }, [formState, reorderStepsMutation, refetch, workspace]);\n\n    const addField = useCallback(async (stepId, typeId) => {\n        const step = formState?.steps?.find(item => item.id === stepId);\n        if (!step) {\n            return;\n        }\n\n        const template = buildNewFieldTemplate(typeId, `Field ${step.fields.length + 1}`);\n        const properties = buildFieldPropertiesInput(template, activeLanguage);\n\n        await addFieldMutation({\n            variables: {\n                workspace,\n                parentPath: step.path,\n                name: slugify(template.label) || `field-${Date.now()}`,\n                primaryNodeType: template.nodeType,\n                properties\n            }\n        });\n\n        await refetch();\n    }, [activeLanguage, addFieldMutation, formState, refetch, workspace]);\n\n    const addNestedField = useCallback(async ({parentPath, typeId, label, properties: overrideProperties}) => {\n        if (!parentPath) {\n            return;\n        }\n\n        const template = buildNewFieldTemplate(typeId, label || `Field ${Date.now()}`);\n        const enrichedTemplate = overrideProperties ? {...template, properties: {...template.properties, ...overrideProperties}} : template;\n        const properties = buildFieldPropertiesInput(enrichedTemplate, activeLanguage);\n\n        await addFieldMutation({\n            variables: {\n                workspace,\n                parentPath,\n                name: slugify(enrichedTemplate.label) || `field-${Date.now()}`,\n                primaryNodeType: enrichedTemplate.nodeType,\n                properties\n            }\n        });\n\n        await refetch();\n    }, [activeLanguage, addFieldMutation, refetch, workspace]);\n\n    const updateFieldState = useCallback((stepId, fieldId, partial) => {\n        setFormState(prev => {\n            if (!prev) {\n                return prev;\n            }\n\n            const steps = prev.steps.map(step => {\n                if (step.id !== stepId) {\n                    return step;\n                }\n\n                const fields = step.fields.map(field => updateFieldNode(field, fieldId, partial));\n                return {...step, fields};\n            });\n\n            return {...prev, steps};\n        });\n        markFieldDirty(fieldId);\n    }, [markFieldDirty]);\n\n    const removeField = useCallback(async (stepId, fieldId) => {\n        const step = formState?.steps?.find(item => item.id === stepId);\n        const field = step?.fields?.find(item => item.id === fieldId);\n        if (!field) {\n            return;\n        }\n\n        await deleteNodeMutation({\n            variables: {\n                workspace,\n                pathOrId: field.path\n            }\n        });\n\n        await refetch();\n    }, [deleteNodeMutation, formState, refetch, workspace]);\n\n    const reorderFields = useCallback(async (stepId, nextOrder) => {\n        const step = formState?.steps?.find(item => item.id === stepId);\n        if (!step) {\n            return;\n        }\n\n        setFormState(prev => {\n            if (!prev) {\n                return prev;\n            }\n\n            const steps = prev.steps.map(item => (item.id === stepId ? {...item, fields: nextOrder} : item));\n            return {...prev, steps};\n        });\n\n        await reorderFieldsMutation({\n            variables: {\n                workspace,\n                pathOrId: step.path,\n                names: nextOrder.map(field => field.name)\n            }\n        });\n\n        await refetch();\n    }, [formState, reorderFieldsMutation, refetch, workspace]);\n\n    const saveChanges = useCallback(async () => {\n        if (!formState) {\n            return;\n        }\n\n        setSaving(true);\n\n        try {\n            const promises = [];\n            const stepsParentPath = formState.fieldsetsPath || formState.path;\n\n            if (!stepsParentPath) {\n                console.warn('Missing parent path for steps, cannot apply mutations safely');\n                setSaving(false);\n                return;\n            }\n\n            if (formMetadataDirty) {\n                promises.push(updateFormMutation({\n                    variables: {\n                        workspace,\n                        pathOrId: formState.path,\n                        language: activeLanguage,\n                        title: formState.label,\n                        intro: formState.intro || ''\n                    }\n                }));\n            }\n\n            dirtySteps.forEach(stepId => {\n                const step = formState.steps.find(item => item.id === stepId);\n                if (!step) {\n                    return;\n                }\n\n                promises.push(updateStepMutation({\n                    variables: {\n                        workspace,\n                        pathOrId: step.path,\n                        properties: buildStepPropertiesInput(step, activeLanguage)\n                    }\n                }));\n\n                if (step.name !== step.initialName) {\n                    promises.push(renameNodeMutation({\n                        variables: {\n                            workspace,\n                            pathOrId: step.path,\n                            name: slugify(step.name) || step.name\n                        }\n                    }));\n                }\n            });\n\n            dirtyFields.forEach(fieldId => {\n                const {step, field} = findFieldById(formState, fieldId);\n                if (!field || !step) {\n                    return;\n                }\n\n                promises.push(updateFieldMutation({\n                    variables: {\n                        workspace,\n                        pathOrId: field.path,\n                        properties: buildFieldPropertiesInput(field, activeLanguage)\n                    }\n                }));\n\n                if (field.name !== field.initialName) {\n                    promises.push(renameNodeMutation({\n                        variables: {\n                            workspace,\n                            pathOrId: field.path,\n                            name: slugify(field.name) || field.name\n                        }\n                    }));\n                }\n            });\n\n            await Promise.all(promises);\n            await refetch();\n\n            setDirtyFields(createEmptySet());\n            setDirtySteps(createEmptySet());\n            setFormMetadataDirty(false);\n        } finally {\n            setSaving(false);\n        }\n    }, [activeLanguage, dirtyFields, dirtySteps, formMetadataDirty, formState, refetch, renameNodeMutation, updateFieldMutation, updateFormMutation, updateStepMutation, workspace]);\n\n    return {\n        form: formState,\n        loading,\n        saveChanges,\n        saving,\n        addStep,\n        updateStepState,\n        removeStep,\n        reorderSteps,\n        addField,\n        addNestedField,\n        updateFieldState,\n        removeField,\n        reorderFields,\n        activeLanguage,\n        setActiveLanguage,\n        siteLanguages,\n        updateFormState\n    };\n};\n\nconst findFieldById = (form, fieldId) => {\n    if (!form) {\n        return {step: null, field: null};\n    }\n\n    for (const step of form.steps) {\n        const stack = [...step.fields];\n\n        while (stack.length > 0) {\n            const current = stack.shift();\n            if (current.id === fieldId) {\n                return {step, field: current};\n            }\n\n            if (current.fields && current.fields.length) {\n                stack.push(...current.fields);\n            }\n        }\n    }\n\n    return {step: null, field: null};\n};\n","import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {LayoutContent, Typography, Button} from '@jahia/moonstone';\nimport {useTranslation} from 'react-i18next';\nimport {useFormEditor} from '../../hooks/useFormEditor';\nimport {FORM_NAMESPACE} from '../../constants/formBuilder';\nimport './FormPreview.scss';\n\nexport const FormPreview = ({match}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const formId = match.params.formId;\n    const {form, loading} = useFormEditor(formId);\n\n    const [formData, setFormData] = useState({});\n    const [activeStep, setActiveStep] = useState(0);\n\n    const handleFieldChange = (fieldId, value) => {\n        setFormData(prev => ({\n            ...prev,\n            [fieldId]: value\n        }));\n    };\n\n    // eslint-disable-next-line complexity\n    const renderEditableField = field => {\n        if (!field) {\n            return null;\n        }\n\n        const {type, properties = {}, label, id} = field;\n        const value = formData[id] || properties.defaultValue || '';\n\n        switch (type) {\n            case 'inputText':\n            case 'inputEmail':\n            case 'inputColor':\n            case 'inputDate':\n            case 'inputDatetimeLocal':\n                return (\n                    <label className=\"fb-field-preview__label\">\n                        {label}\n                        <input\n                            type={type.replace('input', '').toLowerCase()}\n                            value={value}\n                            placeholder={properties.placeholder || ''}\n                            className=\"fb-field-preview__input\"\n                            onChange={e => handleFieldChange(id, e.target.value)}\n                        />\n                    </label>\n                );\n            case 'inputFile':\n                return (\n                    <label className=\"fb-field-preview__label\">\n                        {label}\n                        <input\n                            type=\"file\"\n                            className=\"fb-field-preview__input\"\n                            onChange={e => handleFieldChange(id, e.target.files[0])}\n                        />\n                    </label>\n                );\n            case 'inputCheckbox':\n                return (\n                    <input\n                        type=\"checkbox\"\n                        checked={formData[id] || properties.defaultChecked || false}\n                        className=\"fb-field-preview__checkbox\"\n                        onChange={e => handleFieldChange(id, e.target.checked)}\n                    />\n                );\n\n            case 'checkboxGroup': {\n                const checkboxOptions = field.fields || [];\n                return (\n                    <div className=\"fb-field-preview__group\">\n                        <div className=\"fb-field-preview__label\">{label}</div>\n                        {checkboxOptions.map(option => (\n                            <label key={option.id} className=\"fb-field-preview__option\">\n                                <input\n                                    type=\"checkbox\"\n                                    checked={formData[option.id] || option.properties?.defaultChecked || false}\n                                    onChange={e => handleFieldChange(option.id, e.target.checked)}\n                                />\n                                <span>{option.label || option.name}</span>\n                            </label>\n                        ))}\n                        {checkboxOptions.length === 0 && (\n                            <span className=\"fb-field-preview__placeholder\">No options configured</span>\n                        )}\n                    </div>\n                );\n            }\n\n            case 'radioGroup': {\n                const radioOptions = field.fields || [];\n                return (\n                    <div className=\"fb-field-preview__group\">\n                        <div className=\"fb-field-preview__label\">{label}</div>\n                        {radioOptions.map(option => (\n                            <label key={option.id} className=\"fb-field-preview__option\">\n                                <input\n                                    type=\"radio\"\n                                    checked={formData[id] === option.id || option.properties?.defaultChecked}\n                                    name={`preview-${id}`}\n                                    onChange={() => handleFieldChange(id, option.id)}\n                                />\n                                <span>{option.label || option.name}</span>\n                            </label>\n                        ))}\n                        {radioOptions.length === 0 && (\n                            <span className=\"fb-field-preview__placeholder\">No options configured</span>\n                        )}\n                    </div>\n                );\n            }\n\n            case 'select':\n                return (\n                    <label className=\"fb-field-preview__label\">\n                        {label}\n                        <select\n                            value={value}\n                            className=\"fb-field-preview__select\"\n                            onChange={e => handleFieldChange(id, e.target.value)}\n                        >\n                            {(properties.options || []).map(option => (\n                                <option key={option.value} value={option.value}>\n                                    {option.label}\n                                </option>\n                            ))}\n                        </select>\n                    </label>\n                );\n            case 'textarea':\n                return (\n                    <label className=\"fb-field-preview__label\">\n                        {label}\n                        <textarea\n                            value={value}\n                            placeholder={properties.placeholder || ''}\n                            rows={properties.rows || 3}\n                            className=\"fb-field-preview__textarea\"\n                            onChange={e => handleFieldChange(id, e.target.value)}\n                        />\n                    </label>\n                );\n            case 'inputButton':\n                return (\n                    <button\n                        type=\"button\"\n                        className={`fb-field-preview__button fb-field-preview__button--${properties.variant || 'primary'}`}\n                    >\n                        {label || 'Button'}\n                    </button>\n                );\n            default:\n                return (\n                    <div className=\"fb-field-preview__unknown\">\n                        Unknown field type: {type}\n                    </div>\n                );\n        }\n    };\n\n    const renderFormPreview = () => {\n        if (loading || !form) {\n            return (\n                <div className=\"fb-preview__loading\">\n                    <Typography variant=\"body\">{t('states.loading')}</Typography>\n                </div>\n            );\n        }\n\n        // Apply custom CSS from form settings\n        const customCss = form.properties?.css?.value || '';\n        const cssStyle = customCss ? (\n            // eslint-disable-next-line react/no-danger\n            <style dangerouslySetInnerHTML={{__html: customCss}}/>\n        ) : null;\n\n        const steps = form.steps;\n\n        // Get button settings from form properties\n        const submitBtnLabel = form.properties?.submitBtnLabel || 'Submit';\n        const resetBtnLabel = form.properties?.resetBtnLabel || 'Reset';\n        const showResetBtn = Boolean(form.properties?.showResetBtn);\n        const newFormBtnLabel = form.properties?.newFormBtnLabel || 'New Form';\n        const showNewFormBtn = Boolean(form.properties?.showNewFormBtn);\n        const tryAgainBtnLabel = form.properties?.tryAgainBtnLabel || 'Try Again';\n        const showTryAgainBtn = Boolean(form.properties?.showTryAgainBtn);\n\n        const handleSubmit = () => {\n            // eslint-disable-next-line no-alert\n            alert('Form submitted! Check console for data.');\n            console.log('Form data:', formData);\n        };\n\n        const handleReset = () => {\n            setFormData({});\n        };\n\n        const handleNewForm = () => {\n            // eslint-disable-next-line no-alert\n            alert('New form would be started.');\n        };\n\n        const handleTryAgain = () => {\n            // eslint-disable-next-line no-alert\n            alert('Try again would reset the form.');\n            setFormData({});\n        };\n\n        return (\n            <div className=\"fb-preview\">\n                {cssStyle}\n                <div className=\"fb-preview__tabs\">\n                    {steps.map((step, index) => (\n                        <Button\n                            key={step.id}\n                            variant={activeStep === index ? 'primary' : 'ghost'}\n                            size=\"big\"\n                            label={step.label}\n                            onClick={() => setActiveStep(index)}\n                        />\n                    ))}\n                </div>\n                <div className=\"fb-preview__step-content\">\n                    {steps[activeStep] && (\n                        <div className=\"fb-preview__step\">\n                            {steps[activeStep].description && (\n                                <Typography variant=\"body\" className=\"fb-preview__step-description\">\n                                    {steps[activeStep].description}\n                                </Typography>\n                            )}\n                            <div className=\"fb-preview__fields\">\n                                {steps[activeStep].fields.map(field => (\n                                    <div key={field.id} className=\"fb-preview__field\">\n                                        {renderEditableField(field)}\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    )}\n                </div>\n                <div className=\"fb-preview__buttons\">\n                    <button\n                        type=\"button\"\n                        className=\"fb-field-preview__button fb-field-preview__button--primary\"\n                        onClick={handleSubmit}\n                    >\n                        {submitBtnLabel}\n                    </button>\n                    {showResetBtn && (\n                        <button\n                            type=\"button\"\n                            className=\"fb-field-preview__button fb-field-preview__button--secondary\"\n                            onClick={handleReset}\n                        >\n                            {resetBtnLabel}\n                        </button>\n                    )}\n                    {showNewFormBtn && (\n                        <button\n                            type=\"button\"\n                            className=\"fb-field-preview__button fb-field-preview__button--secondary\"\n                            onClick={handleNewForm}\n                        >\n                            {newFormBtnLabel}\n                        </button>\n                    )}\n                    {showTryAgainBtn && (\n                        <button\n                            type=\"button\"\n                            className=\"fb-field-preview__button fb-field-preview__button--secondary\"\n                            onClick={handleTryAgain}\n                        >\n                            {tryAgainBtnLabel}\n                        </button>\n                    )}\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <LayoutContent\n            content={renderFormPreview()}\n        />\n    );\n};\n\nFormPreview.propTypes = {\n    match: PropTypes.shape({\n        params: PropTypes.shape({\n            formId: PropTypes.string\n        }).isRequired,\n        url: PropTypes.string\n    }).isRequired\n};\n","import React, {useEffect, useMemo, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {useHistory, useLocation} from 'react-router';\nimport {Button, LayoutContent, Loader, Typography, Header} from '@jahia/moonstone';\nimport {ChevronLeft, Visibility, Setting, Edit} from '@jahia/moonstone/dist/icons';\nimport {useTranslation} from 'react-i18next';\nimport {Sidebar} from './sidebar/Sidebar';\nimport {StepEditor} from './steps/StepEditor';\nimport {FieldEditor} from './fields/FieldEditor';\nimport {FormPreview} from './FormPreview';\nimport {useFormEditor} from '../../hooks/useFormEditor';\nimport {FORM_NAMESPACE} from '../../constants/formBuilder';\nimport './FormBuilder.scss';\n\nexport const FormBuilder = ({match}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const history = useHistory();\n    const location = useLocation();\n    const formId = match.params.formId;\n    const basePath = match?.url ? match.url.replace(/\\/[^/]+$/, '') : '/form-builder';\n    const {\n        form,\n        loading,\n        addStep,\n        updateStepState,\n        removeStep,\n        reorderSteps,\n        addField,\n        addNestedField,\n        updateFieldState,\n        removeField,\n        reorderFields,\n        saveChanges,\n        saving\n    } = useFormEditor(formId);\n\n    // Check if we're in preview mode\n    const searchParams = new URLSearchParams(location.search);\n    const isPreviewMode = searchParams.get('view') === 'preview';\n\n    const [activeStepId, setActiveStepId] = useState(null);\n    const [activeFieldId, setActiveFieldId] = useState(null);\n\n    useEffect(() => {\n        if (!form || form.steps.length === 0) {\n            setActiveStepId(null);\n            return;\n        }\n\n        if (!activeStepId) {\n            setActiveStepId(form.steps[0].id);\n            return;\n        }\n\n        const exists = form.steps.some(step => step.id === activeStepId);\n        if (!exists) {\n            setActiveStepId(form.steps[0].id);\n        }\n    }, [form, activeStepId]);\n\n    const activeStep = useMemo(() => form?.steps?.find(step => step.id === activeStepId), [form, activeStepId]);\n\n    useEffect(() => {\n        if (!activeStep) {\n            setActiveFieldId(null);\n            return;\n        }\n\n        if (activeFieldId && activeStep.fields.find(field => field.id === activeFieldId)) {\n            return;\n        }\n\n        if (activeStep.fields.length > 0) {\n            setActiveFieldId(activeStep.fields[0].id);\n        } else {\n            setActiveFieldId(null);\n        }\n    }, [activeFieldId, activeStep]);\n\n    const activeField = activeStep?.fields?.find(field => field.id === activeFieldId) || null;\n\n    const handleRemoveStep = async stepId => {\n        const step = form.steps.find(item => item.id === stepId);\n        if (!step) {\n            return;\n        }\n\n        /* eslint-disable-next-line no-alert */\n        const confirmed = window.confirm(t('builder.sidebar.removeConfirm', {title: step.label}));\n        if (!confirmed) {\n            return;\n        }\n\n        await removeStep(stepId);\n        setActiveFieldId(null);\n    };\n\n    const handleRemoveField = async (stepId, fieldId) => {\n        const step = form.steps.find(item => item.id === stepId);\n        const field = step?.fields.find(item => item.id === fieldId);\n        if (!field) {\n            return;\n        }\n\n        /* eslint-disable-next-line no-alert */\n        const confirmed = window.confirm(t('builder.fields.removeConfirm', {title: field.label || field.name}));\n        if (!confirmed) {\n            return;\n        }\n\n        await removeField(stepId, fieldId);\n        setActiveFieldId(null);\n    };\n\n    const initialTitle = location.state?.formTitle || '';\n    const currentLabel = form?.label || form?.name || initialTitle;\n    const headerPrefix = t('accordionTitle');\n    const headerTitle = currentLabel ? `${headerPrefix} - ${currentLabel}` : headerPrefix;\n    useEffect(() => {\n        console.log('FormBuilder route context', {match, location, formId});\n    }, [location, match, formId]);\n\n    useEffect(() => {\n        console.log('FormBuilder header data', {\n            loading,\n            formLabel: form?.label,\n            formName: form?.name,\n            initialTitle,\n            currentLabel,\n            headerTitle\n        });\n    }, [loading, form, initialTitle, currentLabel, headerTitle]);\n    const backButton = (\n        <button type=\"button\" className=\"fb-back-button\" onClick={() => history.push(basePath)}>\n            <ChevronLeft size=\"big\"/>\n        </button>\n    );\n    const settingsAction = (\n        <Button\n            key=\"settings\"\n            variant=\"ghost\"\n            size=\"big\"\n            label={t('actions.settings')}\n            icon={<Setting size=\"small\"/>}\n            onClick={() => history.push(`${match.url}/settings`)}\n        />\n    );\n    const previewAction = (\n        <Button\n            key=\"preview\"\n            variant=\"ghost\"\n            size=\"big\"\n            label={t('actions.preview')}\n            icon={<Visibility size=\"small\"/>}\n            onClick={() => history.push(`${match.url}?view=preview`)}\n        />\n    );\n    const editAction = (\n        <Button\n            key=\"edit\"\n            variant=\"ghost\"\n            size=\"big\"\n            label=\"Edit Form\"\n            icon={<Edit size=\"small\"/>}\n            onClick={() => history.push(match.url)}\n        />\n    );\n    const saveAction = (\n        <Button\n            key=\"save\"\n            color=\"accent\"\n            size=\"big\"\n            label={saving ? t('actions.saving') : t('actions.save')}\n            isDisabled={saving || !form}\n            onClick={saveChanges}\n        />\n    );\n\n    const renderContent = () => {\n        if (loading || !form) {\n            return (\n                <div className=\"fb-loading\">\n                    <Loader size=\"big\"/>\n                    <Typography variant=\"body\">{t('states.loading')}</Typography>\n                </div>\n            );\n        }\n\n        // If in preview mode, render the preview component\n        if (isPreviewMode) {\n            return <FormPreview match={match} location={location}/>;\n        }\n\n        return (\n            <div className=\"fb-builder__wrapper\">\n                <div className=\"fb-builder__content\">\n                    <Sidebar\n                        steps={form.steps}\n                        activeStepId={activeStepId}\n                        onSelectStep={setActiveStepId}\n                        onAddStep={addStep}\n                        onRemoveStep={handleRemoveStep}\n                        onReorderSteps={order => reorderSteps(order)}\n                        onAddField={addField}\n                    />\n                    <div className=\"fb-builder__main\">\n                        <StepEditor\n                            step={activeStep}\n                            activeFieldId={activeFieldId}\n                            onUpdateStep={(stepId, partial) => updateStepState(stepId, partial)}\n                            onRemoveField={handleRemoveField}\n                            onSelectField={setActiveFieldId}\n                            onReorderFields={(stepId, order) => reorderFields(stepId, order)}\n                        />\n                    </div>\n                    <div className=\"fb-builder__side\">\n                        <FieldEditor\n                            field={activeField}\n                            stepId={activeStep?.id}\n                            onChangeField={updateFieldState}\n                            onAddNestedField={addNestedField}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <LayoutContent\n            header={(\n                <Header\n                    title={headerTitle}\n                    subtitle={t('list.subtitle')}\n                    backButton={backButton}\n                    mainActions={isPreviewMode ? [settingsAction, editAction, saveAction] : [settingsAction, previewAction, saveAction]}\n                />\n            )}\n            content={renderContent()}\n        />\n    );\n};\n\nFormBuilder.propTypes = {\n    match: PropTypes.shape({\n        params: PropTypes.shape({\n            formId: PropTypes.string\n        }).isRequired,\n        path: PropTypes.string,\n        url: PropTypes.string\n    }).isRequired\n};\n\nconst InputField = ({label, value, onChange}) => (\n    <div className=\"fb-input\">\n        <Typography variant=\"caption\">{label}</Typography>\n        <input className=\"fb-input__control\" value={value} onChange={event => onChange(event.target.value)}/>\n    </div>\n);\n\nInputField.propTypes = {\n    label: PropTypes.string.isRequired,\n    value: PropTypes.string.isRequired,\n    onChange: PropTypes.func.isRequired\n};\n","import React, {useState, useEffect, useRef} from 'react';\nimport PropTypes from 'prop-types';\nimport {useHistory, useLocation} from 'react-router';\nimport {Button, LayoutContent, Typography, Header, Paper, Input, Textarea, Switch} from '@jahia/moonstone';\nimport {ChevronLeft} from '@jahia/moonstone/dist/icons';\nimport {useTranslation} from 'react-i18next';\nimport {useQuery, useMutation} from '@apollo/client';\nimport {LexicalComposer} from '@lexical/react/LexicalComposer';\nimport {RichTextPlugin} from '@lexical/react/LexicalRichTextPlugin';\nimport {ContentEditable} from '@lexical/react/LexicalContentEditable';\nimport {FORMAT_TEXT_COMMAND} from 'lexical';\nimport {HistoryPlugin} from '@lexical/react/LexicalHistoryPlugin';\nimport {$generateHtmlFromNodes, $generateNodesFromDOM} from '@lexical/html';\nimport {useLexicalComposerContext} from '@lexical/react/LexicalComposerContext';\nimport {$getRoot, $createTextNode, $createParagraphNode} from 'lexical';\nimport {FORM_NAMESPACE} from '../../constants/formBuilder';\nimport {useFormBuilderContext} from '../../contexts/FormBuilderContext';\nimport {GET_FORM_DETAILS} from '../../graphql/queries';\nimport {UPDATE_FORM_METADATA_MUTATION, UPDATE_FORM_MIXIN_RESPONSES_MUTATION, UPDATE_FORM_MIXIN_BUTTONS_MUTATION, UPDATE_FORM_MIXIN_ACTIONS_MUTATION, UPDATE_FORM_MIXIN_STYLE_MUTATION} from '../../graphql/mutations';\nimport './FormSettings.scss';\n\n// Simple Toolbar Component\nconst Toolbar = () => {\n    const [editor] = useLexicalComposerContext();\n\n    const formatText = formatType => {\n        editor.dispatchCommand(FORMAT_TEXT_COMMAND, formatType);\n    };\n\n    return (\n        <div className=\"lexical-toolbar\">\n            <button\n                type=\"button\"\n                className=\"lexical-toolbar-button\"\n                title=\"Bold\"\n                onClick={() => formatText('bold')}\n            >\n                <strong>B</strong>\n            </button>\n            <button\n                type=\"button\"\n                className=\"lexical-toolbar-button\"\n                title=\"Italic\"\n                onClick={() => formatText('italic')}\n            >\n                <em>I</em>\n            </button>\n            <button\n                type=\"button\"\n                className=\"lexical-toolbar-button\"\n                title=\"Underline\"\n                onClick={() => formatText('underline')}\n            >\n                <u>U</u>\n            </button>\n        </div>\n    );\n};\n\nconst ContentSetterPlugin = ({value}) => {\n    const [editor] = useLexicalComposerContext();\n    const hasSetInitialContentRef = useRef(false);\n\n    // Share the setting state with ChangeHandlerPlugin\n    useEffect(() => {\n        // Access the ChangeHandlerPlugin's ref somehow? Wait, this won't work.\n        // Actually, let's use a different approach. Let's pass a callback or use context.\n\n        // For now, let's just prevent multiple content settings\n        if (editor && value !== undefined && !hasSetInitialContentRef.current) {\n            console.log('ContentSetterPlugin: editor ready, value:', value, 'type:', typeof value);\n            // Small delay to ensure editor is fully ready\n            const timeoutId = setTimeout(() => {\n                // Mark that we're setting content\n                window._isSettingLexicalContent = true;\n\n                editor.update(() => {\n                    console.log('ContentSetterPlugin: setting content:', value);\n                    $getRoot().clear();\n\n                    if (value && value.trim()) {\n                        // Parse HTML content using Lexical's proper HTML import method\n                        console.log('ContentSetterPlugin: parsing HTML content:', value);\n                        try {\n                            const parser = new DOMParser();\n                            const dom = parser.parseFromString(value, 'text/html');\n                            const nodes = $generateNodesFromDOM(editor, dom);\n                            console.log('ContentSetterPlugin: generated nodes:', nodes.length);\n                            for (const node of nodes) {\n                                $getRoot().append(node);\n                            }\n                        } catch (error) {\n                            console.error('ContentSetterPlugin: error parsing HTML:', error);\n                            // Fallback to plain text\n                            const paragraphNode = $createParagraphNode();\n                            const textNode = $createTextNode(value);\n                            $getRoot().append(paragraphNode);\n                            paragraphNode.append(textNode);\n                        }\n                    } else {\n                        console.log('ContentSetterPlugin: no value to set or empty value:', value);\n                    }\n\n                    console.log('ContentSetterPlugin: content set successfully');\n                    hasSetInitialContentRef.current = true;\n\n                    // Clear the flag after a short delay\n                    setTimeout(() => {\n                        window._isSettingLexicalContent = false;\n                    }, 50);\n                });\n            }, 100);\n\n            return () => clearTimeout(timeoutId);\n        }\n    }, [editor, value]);\n\n    return null;\n};\n\nContentSetterPlugin.propTypes = {\n    value: PropTypes.string\n};\n\n// Plugin to handle changes and generate HTML\nconst ChangeHandlerPlugin = ({onChange}) => {\n    const [editor] = useLexicalComposerContext();\n    const lastHtmlRef = useRef(null);\n\n    useEffect(() => {\n        const unregister = editor.registerUpdateListener(({editorState}) => {\n            // Don't trigger onChange if we're currently setting content\n            if (window._isSettingLexicalContent) {\n                return;\n            }\n\n            editorState.read(() => {\n                const htmlString = $generateHtmlFromNodes(editor);\n                if (htmlString !== lastHtmlRef.current) {\n                    lastHtmlRef.current = htmlString;\n                    onChange(htmlString);\n                }\n            });\n        });\n\n        return unregister;\n    }, [editor, onChange]);\n\n    return null;\n};\n\nChangeHandlerPlugin.propTypes = {\n    onChange: PropTypes.func.isRequired\n};\n\n// Lexical Editor Component with minimal toolbar\nconst LexicalEditor = ({value, onChange, placeholder, height = 120}) => {\n    console.log('LexicalEditor: rendering with value:', value, 'type:', typeof value);\n\n    const initialConfig = {\n        namespace: 'FormidableEditor',\n        onError: error => console.error('Lexical error:', error)\n    };\n\n    return (\n        <div className=\"lexical-editor\" style={{minHeight: height}}>\n            <LexicalComposer initialConfig={initialConfig}>\n                <Toolbar/>\n                <RichTextPlugin\n                    contentEditable={\n                        <ContentEditable\n                            className=\"lexical-content-editable\"\n                            style={{minHeight: height - 60}}\n                        />\n                    }\n                    placeholder={<div className=\"lexical-placeholder\">{placeholder}</div>}\n                />\n                <HistoryPlugin/>\n                <ChangeHandlerPlugin onChange={onChange}/>\n                <ContentSetterPlugin value={value}/>\n            </LexicalComposer>\n        </div>\n    );\n};\n\nLexicalEditor.propTypes = {\n    value: PropTypes.string,\n    onChange: PropTypes.func.isRequired,\n    placeholder: PropTypes.string,\n    height: PropTypes.number\n};\n\nexport const FormSettings = ({match}) => {\n    const {t} = useTranslation(FORM_NAMESPACE);\n    const history = useHistory();\n    const location = useLocation();\n    const {workspace} = useFormBuilderContext();\n    const formId = match.params.formId;\n    const basePath = match?.url ? match.url.replace(/\\/[^/]+$/, '') : '/form-builder';\n\n    // Use the same query as FormBuilder but with English to get properties\n    const {data, loading} = useQuery(GET_FORM_DETAILS, {\n        variables: {\n            workspace,\n            language: 'en', // Use English to get the properties\n            uuid: formId\n        },\n        fetchPolicy: 'no-cache',\n        skip: !formId\n    });\n\n    // Form data state\n    const [formData, setFormData] = useState({\n        title: '',\n        intro: '',\n        submissionMessage: '',\n        errorMessage: '',\n        submitBtnLabel: '',\n        resetBtnLabel: '',\n        showResetBtn: false,\n        newFormBtnLabel: '',\n        showNewFormBtn: false,\n        tryAgainBtnLabel: '',\n        showTryAgainBtn: false,\n        customTarget: '',\n        css: ''\n    });\n\n    // Active tab state\n    const [activeTab, setActiveTab] = useState('basic');\n\n    const [updateFormMetadata] = useMutation(UPDATE_FORM_METADATA_MUTATION);\n    const [updateResponses] = useMutation(UPDATE_FORM_MIXIN_RESPONSES_MUTATION);\n    const [updateButtons] = useMutation(UPDATE_FORM_MIXIN_BUTTONS_MUTATION);\n    const [updateActions] = useMutation(UPDATE_FORM_MIXIN_ACTIONS_MUTATION);\n    const [updateStyle] = useMutation(UPDATE_FORM_MIXIN_STYLE_MUTATION);\n\n    const [saving, setSaving] = useState(false);\n\n    useEffect(() => {\n        if (data?.jcr?.nodeById) {\n            const node = data.jcr.nodeById;\n            const properties = node.properties || [];\n\n            const getPropertyValue = name => {\n                const prop = properties.find(p => p.name === name);\n                return prop?.value || '';\n            };\n\n            const getBooleanPropertyValue = name => {\n                const prop = properties.find(p => p.name === name);\n                return prop?.value === 'true' || prop?.value === true;\n            };\n\n            const newFormData = {\n                title: getPropertyValue('jcr:title') || node.displayName || node.name || '',\n                intro: getPropertyValue('intro') || '',\n                submissionMessage: getPropertyValue('submissionMessage') || '',\n                errorMessage: getPropertyValue('errorMessage') || '',\n                submitBtnLabel: getPropertyValue('submitBtnLabel') || 'Submit',\n                resetBtnLabel: getPropertyValue('resetBtnLabel') || 'Reset',\n                showResetBtn: getBooleanPropertyValue('showResetBtn'),\n                newFormBtnLabel: getPropertyValue('newFormBtnLabel') || 'New Form',\n                showNewFormBtn: getBooleanPropertyValue('showNewFormBtn'),\n                tryAgainBtnLabel: getPropertyValue('tryAgainBtnLabel') || 'Try Again',\n                showTryAgainBtn: getBooleanPropertyValue('showTryAgainBtn'),\n                customTarget: getPropertyValue('customTarget') || '',\n                css: getPropertyValue('css') || ''\n            };\n\n            console.log('FormSettings: loaded formData:', newFormData);\n            setFormData(newFormData);\n        }\n    }, [data]);\n\n    const handleSave = async () => {\n        setSaving(true);\n        try {\n            // Save basic form metadata\n            await updateFormMetadata({\n                variables: {\n                    workspace: 'EDIT',\n                    pathOrId: formId,\n                    language: 'en',\n                    title: formData.title,\n                    intro: formData.intro\n                }\n            });\n\n            // Save mixin properties\n            await Promise.all([\n                updateResponses({\n                    variables: {\n                        workspace: 'EDIT',\n                        pathOrId: formId,\n                        language: 'en',\n                        submissionMessage: formData.submissionMessage,\n                        errorMessage: formData.errorMessage\n                    }\n                }),\n                updateButtons({\n                    variables: {\n                        workspace: 'EDIT',\n                        pathOrId: formId,\n                        language: 'en',\n                        submitBtnLabel: formData.submitBtnLabel,\n                        resetBtnLabel: formData.resetBtnLabel,\n                        showResetBtn: formData.showResetBtn.toString(),\n                        newFormBtnLabel: formData.newFormBtnLabel,\n                        showNewFormBtn: formData.showNewFormBtn.toString(),\n                        tryAgainBtnLabel: formData.tryAgainBtnLabel,\n                        showTryAgainBtn: formData.showTryAgainBtn.toString()\n                    }\n                }),\n                updateActions({\n                    variables: {\n                        workspace: 'EDIT',\n                        pathOrId: formId,\n                        customTarget: formData.customTarget\n                    }\n                }),\n                updateStyle({\n                    variables: {\n                        workspace: 'EDIT',\n                        pathOrId: formId,\n                        css: formData.css\n                    }\n                })\n            ]);\n        } catch (error) {\n            console.error('Error saving form settings:', error);\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    const handleInputChange = (field, value) => {\n        setFormData(prev => ({\n            ...prev,\n            [field]: value\n        }));\n    };\n\n    const initialTitle = location.state?.formTitle || '';\n    const currentLabel = formData.title || initialTitle;\n    const headerPrefix = t('settings.title');\n    const headerTitle = currentLabel ? `${headerPrefix} - ${currentLabel}` : headerPrefix;\n\n    const backButton = (\n        <button type=\"button\" className=\"fb-back-button\" onClick={() => history.push(`${basePath}/${formId}`)}>\n            <ChevronLeft size=\"big\"/>\n        </button>\n    );\n\n    const saveAction = (\n        <Button\n            key=\"save\"\n            color=\"accent\"\n            size=\"big\"\n            label={saving ? t('actions.saving') : t('actions.save')}\n            isDisabled={saving || loading}\n            onClick={handleSave}\n        />\n    );\n\n    const renderBasicSettings = () => (\n        <div className=\"fs-settings__section\">\n            <Typography variant=\"heading\" level={3}>{t('settings.basic.title')}</Typography>\n            <div className=\"fs-settings__field\">\n                <Typography variant=\"body\" className=\"fs-settings__field-description\">\n                    {t('settings.basic.formTitleDescription')}\n                </Typography>\n                <Input\n                    label={t('settings.basic.formTitle')}\n                    value={formData.title}\n                    placeholder={t('settings.basic.formTitlePlaceholder')}\n                    onChange={e => handleInputChange('title', e.target.value)}\n                />\n            </div>\n            <div className=\"fs-settings__field\">\n                <Typography variant=\"body\" className=\"fs-settings__field-description\">\n                    {t('settings.basic.introDescription')}\n                </Typography>\n                <LexicalEditor\n                    value={formData.intro}\n                    placeholder={t('settings.basic.introPlaceholder')}\n                    height={120}\n                    onChange={value => handleInputChange('intro', value)}\n                />\n            </div>\n        </div>\n    );\n\n    const renderResponseSettings = () => (\n        <div className=\"fs-settings__section\">\n            <Typography variant=\"heading\" level={3}>{t('settings.responses.title')}</Typography>\n            <div className=\"fs-settings__field\">\n                <Typography variant=\"body\" className=\"fs-settings__field-description\">\n                    {t('settings.responses.submissionMessageDescription')}\n                </Typography>\n                <LexicalEditor\n                    value={formData.submissionMessage}\n                    placeholder={t('settings.responses.submissionMessagePlaceholder')}\n                    height={100}\n                    onChange={value => handleInputChange('submissionMessage', value)}\n                />\n            </div>\n            <div className=\"fs-settings__field\">\n                <Typography variant=\"body\" className=\"fs-settings__field-description\">\n                    {t('settings.responses.errorMessageDescription')}\n                </Typography>\n                <LexicalEditor\n                    value={formData.errorMessage}\n                    placeholder={t('settings.responses.errorMessagePlaceholder')}\n                    height={100}\n                    onChange={value => handleInputChange('errorMessage', value)}\n                />\n            </div>\n        </div>\n    );\n\n    const renderButtonSettings = () => (\n        <div className=\"fs-settings__section\">\n            <Typography variant=\"heading\" level={3}>{t('settings.buttons.title')}</Typography>\n            <div className=\"fs-settings__field\">\n                <Typography variant=\"body\" className=\"fs-settings__field-description\">\n                    {t('settings.buttons.submitBtnLabelDescription')}\n                </Typography>\n                <Input\n                    label={t('settings.buttons.submitBtnLabel')}\n                    value={formData.submitBtnLabel}\n                    placeholder={t('settings.buttons.submitBtnLabelPlaceholder')}\n                    onChange={e => handleInputChange('submitBtnLabel', e.target.value)}\n                />\n            </div>\n            <div className=\"fs-settings__field\">\n                <Typography variant=\"body\" className=\"fs-settings__field-description\">\n                    {t('settings.buttons.showResetBtnDescription')}\n                </Typography>\n                <div className=\"fs-settings__switch-field\">\n                    <Switch\n                        checked={formData.showResetBtn}\n                        onChange={e => handleInputChange('showResetBtn', e.target.checked)}\n                    />\n                    <Typography variant=\"body\">{t('settings.buttons.showResetBtn')}</Typography>\n                </div>\n                {formData.showResetBtn && (\n                    <Input\n                        label={t('settings.buttons.resetBtnLabel')}\n                        value={formData.resetBtnLabel}\n                        placeholder={t('settings.buttons.resetBtnLabelPlaceholder')}\n                        onChange={e => handleInputChange('resetBtnLabel', e.target.value)}\n                    />\n                )}\n            </div>\n            <div className=\"fs-settings__field\">\n                <Typography variant=\"body\" className=\"fs-settings__field-description\">\n                    {t('settings.buttons.showNewFormBtnDescription')}\n                </Typography>\n                <div className=\"fs-settings__switch-field\">\n                    <Switch\n                        checked={formData.showNewFormBtn}\n                        onChange={e => handleInputChange('showNewFormBtn', e.target.checked)}\n                    />\n                    <Typography variant=\"body\">{t('settings.buttons.showNewFormBtn')}</Typography>\n                </div>\n                {formData.showNewFormBtn && (\n                    <Input\n                        label={t('settings.buttons.newFormBtnLabel')}\n                        value={formData.newFormBtnLabel}\n                        placeholder={t('settings.buttons.newFormBtnLabelPlaceholder')}\n                        onChange={e => handleInputChange('newFormBtnLabel', e.target.value)}\n                    />\n                )}\n            </div>\n            <div className=\"fs-settings__field\">\n                <Typography variant=\"body\" className=\"fs-settings__field-description\">\n                    {t('settings.buttons.showTryAgainBtnDescription')}\n                </Typography>\n                <div className=\"fs-settings__switch-field\">\n                    <Switch\n                        checked={formData.showTryAgainBtn}\n                        onChange={e => handleInputChange('showTryAgainBtn', e.target.checked)}\n                    />\n                    <Typography variant=\"body\">{t('settings.buttons.showTryAgainBtn')}</Typography>\n                </div>\n                {formData.showTryAgainBtn && (\n                    <Input\n                        label={t('settings.buttons.tryAgainBtnLabel')}\n                        value={formData.tryAgainBtnLabel}\n                        placeholder={t('settings.buttons.tryAgainBtnLabelPlaceholder')}\n                        onChange={e => handleInputChange('tryAgainBtnLabel', e.target.value)}\n                    />\n                )}\n            </div>\n        </div>\n    );\n\n    const renderActionSettings = () => (\n        <div className=\"fs-settings__section\">\n            <Typography variant=\"heading\" level={3}>{t('settings.actions.title')}</Typography>\n            <div className=\"fs-settings__field\">\n                <Typography variant=\"body\" className=\"fs-settings__field-description\">\n                    {t('settings.actions.customTargetDescription')}\n                </Typography>\n                <Input\n                    label={t('settings.actions.customTarget')}\n                    value={formData.customTarget}\n                    placeholder={t('settings.actions.customTargetPlaceholder')}\n                    onChange={e => handleInputChange('customTarget', e.target.value)}\n                />\n            </div>\n        </div>\n    );\n\n    const renderStyleSettings = () => (\n        <div className=\"fs-settings__section\">\n            <Typography variant=\"heading\" level={3}>{t('settings.style.title')}</Typography>\n            <div className=\"fs-settings__field\">\n                <Typography variant=\"body\" className=\"fs-settings__field-description\">\n                    {t('settings.style.cssDescription')}\n                </Typography>\n                <Textarea\n                    label={t('settings.style.css')}\n                    value={formData.css}\n                    placeholder={t('settings.style.cssPlaceholder')}\n                    rows={10}\n                    onChange={e => handleInputChange('css', e.target.value)}\n                />\n            </div>\n        </div>\n    );\n\n    return (\n        <LayoutContent\n            header={(\n                <Header\n                    title={headerTitle}\n                    subtitle={t('settings.subtitle')}\n                    backButton={backButton}\n                    mainActions={[saveAction]}\n                />\n            )}\n            content={\n                <div className=\"fs-settings\">\n                    <Paper className=\"fs-settings__content\">\n                        <div className=\"fs-settings__tabs\">\n                            <Button\n                                variant={activeTab === 'basic' ? 'primary' : 'ghost'}\n                                size=\"big\"\n                                label={t('settings.tabs.basic')}\n                                onClick={() => setActiveTab('basic')}\n                            />\n                            <Button\n                                variant={activeTab === 'responses' ? 'primary' : 'ghost'}\n                                size=\"big\"\n                                label={t('settings.tabs.responses')}\n                                onClick={() => setActiveTab('responses')}\n                            />\n                            <Button\n                                variant={activeTab === 'buttons' ? 'primary' : 'ghost'}\n                                size=\"big\"\n                                label={t('settings.tabs.buttons')}\n                                onClick={() => setActiveTab('buttons')}\n                            />\n                            <Button\n                                variant={activeTab === 'actions' ? 'primary' : 'ghost'}\n                                size=\"big\"\n                                label={t('settings.tabs.actions')}\n                                onClick={() => setActiveTab('actions')}\n                            />\n                            <Button\n                                variant={activeTab === 'style' ? 'primary' : 'ghost'}\n                                size=\"big\"\n                                label={t('settings.tabs.style')}\n                                onClick={() => setActiveTab('style')}\n                            />\n                        </div>\n\n                        <div className=\"fs-settings__tab-content\">\n                            {activeTab === 'basic' && renderBasicSettings()}\n                            {activeTab === 'responses' && renderResponseSettings()}\n                            {activeTab === 'buttons' && renderButtonSettings()}\n                            {activeTab === 'actions' && renderActionSettings()}\n                            {activeTab === 'style' && renderStyleSettings()}\n                        </div>\n                    </Paper>\n                </div>\n            }\n        />\n    );\n};\n\nFormSettings.propTypes = {\n    match: PropTypes.shape({\n        params: PropTypes.shape({\n            formId: PropTypes.string\n        }).isRequired,\n        path: PropTypes.string,\n        url: PropTypes.string\n    }).isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Route, Switch, Redirect, withRouter} from 'react-router';\nimport {ApolloProvider} from '@apollo/client';\nimport {getApolloClient} from '../apollo/client';\nimport {FormBuilderProvider} from '../contexts/FormBuilderContext';\nimport {FormListView} from './formList/FormListView';\nimport {FormBuilder} from './formBuilder/FormBuilder';\nimport {FormSettings} from './formBuilder/FormSettings';\n\nconst client = getApolloClient();\n\nconst FormBuilderAppRaw = ({match}) => {\n    const basePath = (match?.path || '/form-builder').replace(/\\*$/, '');\n\n    return (\n        <ApolloProvider client={client}>\n            <FormBuilderProvider>\n                <Switch>\n                    <Route exact path={basePath} component={FormListView}/>\n                    <Route path={`${basePath}/:formId/settings`} component={FormSettings}/>\n                    <Route path={`${basePath}/:formId`} component={FormBuilder}/>\n                    <Redirect to={basePath}/>\n                </Switch>\n            </FormBuilderProvider>\n        </ApolloProvider>\n    );\n};\n\nFormBuilderAppRaw.propTypes = {\n    match: PropTypes.shape({\n        path: PropTypes.string\n    })\n};\n\nFormBuilderAppRaw.defaultProps = {\n    match: {\n        path: '/form-builder'\n    }\n};\n\nexport const FormBuilderApp = withRouter(FormBuilderAppRaw);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {FormBuilderApp} from '../components/FormBuilderApp';\n\nexport const AdminPanel = ({match}) => <FormBuilderApp match={match}/>;\n\nAdminPanel.propTypes = {\n    match: PropTypes.object\n};\n\nAdminPanel.defaultProps = {\n    match: null\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport const FormBuilderIcon = ({width, height}) => (\n    <svg\n        width={width}\n        height={height}\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"3\" stroke=\"#2681ff\" strokeWidth=\"1.8\"/>\n        <rect x=\"6\" y=\"7\" width=\"12\" height=\"2\" fill=\"#2681ff\"/>\n        <rect x=\"6\" y=\"11\" width=\"8\" height=\"2\" fill=\"#2681ff\" opacity=\"0.6\"/>\n        <rect x=\"6\" y=\"15\" width=\"10\" height=\"2\" fill=\"#2681ff\" opacity=\"0.4\"/>\n        <circle cx=\"17\" cy=\"12\" r=\"2\" stroke=\"#2681ff\" strokeWidth=\"1.5\"/>\n    </svg>\n);\n\nFormBuilderIcon.propTypes = {\n    width: PropTypes.number,\n    height: PropTypes.number\n};\n\nFormBuilderIcon.defaultProps = {\n    width: 24,\n    height: 24\n};\n","import {registry} from '@jahia/ui-extender';\nimport constants from './AdminPanel.constants';\nimport {AdminPanel} from './AdminPanel';\nimport React, {Suspense} from 'react';\nimport {FormBuilderIcon} from '../components/icons/FormBuilderIcon';\nimport {FORM_NAMESPACE} from '../constants/formBuilder';\n\nexport const registerRoutes = () => {\n    if (window.jahia && window.jahia.i18n && window.jahia.i18n.loadNamespaces) {\n        window.jahia.i18n.loadNamespaces(FORM_NAMESPACE);\n    }\n\n    registry.add('accordionItem', 'formBuilderAccordion', registry.get('accordionItem', 'renderDefaultApps'), {\n        targets: ['jcontent:75'],\n        icon: <FormBuilderIcon width={24} height={24}/>,\n        label: `${FORM_NAMESPACE}:accordionTitle`,\n        defaultPath: constants.ROUTE,\n        appsTarget: 'formBuilderAccordionApps',\n        requireModuleInstalledOnSite: 'formidable'\n    });\n\n    registry.add('adminRoute', 'formidableBuilder', {\n        targets: ['formBuilderAccordionApps'],\n        icon: <FormBuilderIcon width={12} height={12}/>,\n        label: `${FORM_NAMESPACE}:label`,\n        path: `${constants.ROUTE}*`,\n        defaultPath: constants.ROUTE,\n        isSelectable: true,\n        requireModuleInstalledOnSite: 'formidable',\n        render: v => <Suspense fallback=\"loading ...\"><AdminPanel match={v.match}/></Suspense>\n    });\n\n    console.debug('%c form-builder module is activated', 'color: #3c8cba');\n};\n","import {registerRoutes} from './AdminPanel/AdminPanel.routes';\nimport i18next from 'i18next';\nimport {FORM_NAMESPACE} from './constants/formBuilder';\nimport en from '../main/resources/javascript/locales/en.json';\nimport fr from '../main/resources/javascript/locales/fr.json';\n\nconst registerResources = () => {\n    const bundles = [\n        ['en', en],\n        ['fr', fr]\n    ];\n\n    bundles.forEach(([language, resource]) => {\n        const namespaceData = resource[FORM_NAMESPACE];\n        if (namespaceData && !i18next.hasResourceBundle(language, FORM_NAMESPACE)) {\n            i18next.addResourceBundle(language, FORM_NAMESPACE, namespaceData, true, true);\n        }\n    });\n};\n\nexport default function () {\n    registerResources();\n    registerRoutes();\n}\n","import {registry} from '@jahia/ui-extender';\nimport register from './AdminPanel.register';\n\nexport default function () {\n    registry.add('callback', 'formidableBuilder', {\n        targets: ['jahiaApp-init:2'],\n        callback: register\n    });\n}\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./FormSettings.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".fb-builder__wrapper{display:flex;flex-direction:column;gap:24px;padding:24px;background:linear-gradient(135deg, #f5f7ff 0%, #ffffff 60%)}.fb-toolbar{display:flex;align-items:center;gap:16px;padding:12px 16px;border-radius:16px;background:#fff;box-shadow:0 12px 30px rgba(15,19,39,.1)}.fb-back-button{width:48px;height:48px;border-radius:24px;border:1px solid rgba(0,0,0,.1);background:#fff;color:#000;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;line-height:0}.fb-back-button:hover{background:rgba(0,0,0,.06)}.fb-back-button svg{width:24px;height:24px}.fb-builder__content{display:grid;grid-template-columns:280px 1fr 340px;gap:24px}.fb-sidebar{padding:20px;border-radius:16px;background:#fff;box-shadow:0 20px 40px rgba(10,17,35,.08);display:flex;flex-direction:column;gap:16px}.fb-sidebar__header{display:flex;justify-content:space-between;align-items:center}.fb-sidebar__tabs{display:flex;gap:4px;padding:0 0 16px 0;border-bottom:1px solid rgba(0,0,0,.1)}.fb-sidebar__tabs .moonstone-Button{flex:1;min-height:44px;padding:12px 16px;font-size:16px;font-weight:500}.fb-step-list,.fb-field-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}.fb-step,.fb-field-row{border:1px solid rgba(0,0,0,0);border-radius:12px;background:#f7f8fc;display:flex;justify-content:space-between;align-items:center;padding:12px;transition:border .15s ease,box-shadow .15s ease,background .15s ease}.fb-step--active,.fb-field-row--active{border-color:#2681ff;background:#fff;box-shadow:0 10px 30px rgba(38,129,255,.2)}.fb-step__button,.fb-field-row__button{font:inherit;border:none;background:rgba(0,0,0,0);text-align:left;flex:1;cursor:pointer}.fb-field-row__content{display:flex;flex-direction:column;gap:8px;flex:1;margin-right:16px}.fb-step-editor,.fb-field-editor,.fb-json,.fb-field{display:flex;flex-direction:column;gap:8px}.moonstone-typography.moonstone-variant_subheading{margin-top:10px;margin-bottom:10px}.fb-step-editor{padding:28px;border-radius:18px;background:#fff;box-shadow:0 25px 50px rgba(18,28,78,.1)}.fb-field-editor{padding:28px;border-radius:18px;background:#fff;box-shadow:0 25px 50px rgba(18,28,78,.1)}.fb-step-editor__form,.fb-step-editor__actions,.fb-step-editor__list{display:flex;flex-direction:column;margin-top:20px;padding-top:12px;border-top:1px solid rgba(0,0,0,.05);gap:16px}.fb-field-editor__header{display:flex;align-items:center;justify-content:space-between}.fb-field-editor__type{color:#6c7283;text-transform:uppercase}.fb-field--inline{flex-direction:row;align-items:center;justify-content:space-between}.fb-field--divider{padding:12px 0;border-top:1px solid rgba(0,0,0,.05);border-bottom:1px solid hsla(0,0%,100%,.6)}.fb-option-section{background:#fff;border:1px solid rgba(0,0,0,.05);border-radius:14px;padding:16px;box-shadow:0 10px 25px rgba(10,17,35,.06)}.fb-option-section__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.fb-option-card-list{display:flex;flex-direction:column;gap:12px}.fb-option-card{border:1px solid rgba(0,0,0,.05);border-radius:12px;padding:12px;background:#fdfdff;box-shadow:inset 0 1px 0 hsla(0,0%,100%,.6)}.fb-option-card__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.fb-option-card__grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));gap:12px}.fb-textarea{width:100%;border:1px solid #cfd5e6;border-radius:10px;padding:12px 14px;background:#fbfcff;resize:vertical;font-family:inherit}.fb-field-type-grid{display:flex;flex-wrap:wrap;gap:12px}.fb-field-type-grid .moonstone-Button{min-height:48px;padding:12px 16px;font-size:14px;font-weight:500;border-radius:8px;display:flex;align-items:center;gap:8px;flex:1;min-width:120px;justify-content:center}.fb-field-list{overflow-y:auto}.fb-builder__main{display:flex;flex-direction:column;gap:16px}.fb-builder__side{display:flex;flex-direction:column;gap:16px}.fb-json__code{font-family:monospace;background:#0b1a30;color:#9ef5ff;padding:16px;border-radius:12px;max-height:320px;overflow:auto}.fb-input{display:flex;flex-direction:column;gap:8px}.fb-input__control{border:1px solid #cfd5e6;border-radius:10px;padding:10px 12px}.fb-options{display:flex;flex-direction:column;gap:8px;margin:0;padding:0;list-style:none}.fb-option-row{display:flex;gap:8px;align-items:center}.fb-loading{display:flex;flex-direction:column;align-items:center;gap:12px;padding:64px}.fb-field-preview{display:flex;flex-direction:column;gap:4px;padding:8px;background:#fff;border:1px solid #e0e0e0;border-radius:6px;font-size:14px}.fb-field-preview__label{font-weight:500;color:#666}.fb-field-preview__input,.fb-field-preview__textarea,.fb-field-preview__select{padding:6px 8px;border:1px solid #ccc;border-radius:4px;background:#f9f9f9;color:#333;font-size:14px}.fb-field-preview__input:disabled,.fb-field-preview__textarea:disabled,.fb-field-preview__select:disabled{background:#f5f5f5;color:#999}.fb-field-preview__checkbox,.fb-field-preview__radio{margin-right:4px}.fb-field-preview__group{display:flex;flex-direction:column;gap:4px}.fb-field-preview__option{display:flex;align-items:center;gap:4px}.fb-field-preview__button{padding:8px 16px;border:1px solid #ccc;border-radius:4px;background:#f9f9f9;color:#333;cursor:not-allowed;font-size:14px}.fb-field-preview__button--primary{background:#2681ff;color:#fff;border-color:#2681ff}.fb-field-preview__unknown{color:#999;font-style:italic}.fb-field-preview__placeholder{color:#999;font-style:italic;font-size:14px}.fs-settings{padding:24px}.fs-settings__form-header{margin-bottom:32px;padding-bottom:16px;border-bottom:1px solid #e0e0e0}.fs-settings__form-subtitle{margin-top:8px;color:#666}.fs-settings__content{max-width:800px;margin:0 auto}.fs-settings__tabs{display:flex;gap:8px;margin-bottom:24px;border-bottom:1px solid #e0e0e0;padding-bottom:16px}.fs-settings__tab-content{padding:24px 0}.fs-settings__section{margin-bottom:32px}.fs-settings__section:last-child{margin-bottom:0}.fs-settings__field-description{margin-bottom:8px;color:#666;font-size:.875rem;line-height:1.4}.fs-settings__field{margin-bottom:24px}.fs-settings__field:last-child{margin-bottom:0}.fs-settings__switch-field{display:flex;align-items:center;gap:12px;margin-bottom:12px}.lexical-editor{border:1px solid #ccc;border-radius:4px;padding:8px}.lexical-editor .lexical-toolbar{display:flex;gap:4px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid #e0e0e0}.lexical-editor .lexical-toolbar .lexical-toolbar-button{padding:4px 8px;border:1px solid #ccc;border-radius:3px;background:#fff;cursor:pointer;font-size:14px;min-width:28px;display:flex;align-items:center;justify-content:center}.lexical-editor .lexical-toolbar .lexical-toolbar-button:hover{background:#f5f5f5}.lexical-editor .lexical-toolbar .lexical-toolbar-button:active{background:#e0e0e0}.lexical-editor .lexical-content-editable{outline:none;min-height:80px;padding:8px 0}.lexical-editor .lexical-placeholder{color:#999;position:absolute;top:8px;left:8px;pointer-events:none}.lexical-editor .font-bold{font-weight:bold}.lexical-editor .italic{font-style:italic}.lexical-editor .underline{text-decoration:underline}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./FormBuilder.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"names":["api","content","__esModule","default","module","id","options","exports","locals","___CSS_LOADER_API_IMPORT___","push","sharedClient","DEFAULT_HEADERS","getApolloClient","_window$contextJsPara","_contextJsParameters$","ApolloClient","link","HttpLink","uri","window","contextJsParameters","contextPath","concat","credentials","headers","cache","InMemoryCache","typePolicies","JCRNode","keyFields","connectToDevTools","process","FORM_NAMESPACE","DEFAULT_WORKSPACE","booleanProperty","name","labelKey","type","textProperty","_objectSpread","arguments","length","undefined","numberProperty","dateProperty","dateTimeProperty","selectProperty","defaultValue","stringListProperty","FIELD_TYPES","nodeType","defaultProperties","buttonType","variant","propertySchema","value","required","defaultChecked","min","max","step","autocomplete","multiple","placeholder","list","pattern","minLength","maxLength","addLabelKey","removeLabelKey","itemLabelKey","accept","allowedParents","label","selected","size","disabled","autofocus","rows","resize","getFieldDefinitionByNodeType","primaryNodeType","find","getFieldDefinition","typeId","buildNewFieldTemplate","definition","Error","Date","now","description","properties","FormBuilderContext","createContext","FormBuilderProvider","_ref","children","_window","_window$formidableBui","formidableBuilder","runtimeConfig","lang","_contextJsParameters$2","siteKey","_contextJsParameters$3","language","_contextJsParameters$4","workspace","uiLanguage","resolvedSiteKey","formsRoot","formsPath","getDefaultFormsPath","rawWorkspace","normalizedWorkspace","toUpperCase","useMemo","client","namespace","React","Provider","propTypes","PropTypes","isRequired","useFormBuilderContext","ctx","useContext","INITIAL_STATE","title","intro","CreateFormPanel","isOpen","onCancel","onSubmit","isLoading","t","useTranslation","_useState","useState","_useState2","_slicedToArray","formData","setFormData","FormTextarea","MoonstoneTextarea","_ref2","_ref2$className","className","props","_objectWithoutProperties","_excluded","_extends","trim","useEffect","handleChange","field","prev","_defineProperty","isDisabled","Paper","Typography","Input","onChange","event","target","Button","onClick","color","defaultProps","PROPERTY_FIELDS_FRAGMENT","gql","_templateObject","_taggedTemplateLiteral","FIELD_CHILD_FRAGMENT","_templateObject2","FIELD_FRAGMENT","_templateObject3","STEP_FRAGMENT","_templateObject4","FORM_FRAGMENT","_templateObject5","GET_FORMS_LIST","GET_FORM_DETAILS","GET_SITE_LANGUAGES","CREATE_FORM_MUTATION","UPDATE_FORM_METADATA_MUTATION","UPDATE_FORM_MIXIN_RESPONSES_MUTATION","UPDATE_FORM_MIXIN_BUTTONS_MUTATION","UPDATE_FORM_MIXIN_ACTIONS_MUTATION","UPDATE_FORM_MIXIN_STYLE_MUTATION","_templateObject6","DELETE_NODE_MUTATION","_templateObject7","ADD_STEP_MUTATION","_templateObject8","UPDATE_STEP_MUTATION","_templateObject9","REORDER_STEPS_MUTATION","_templateObject0","ADD_FIELD_MUTATION","_templateObject1","UPDATE_FIELD_MUTATION","_templateObject10","REORDER_FIELDS_MUTATION","_templateObject11","RENAME_NODE_MUTATION","_templateObject12","slugify","toString","toLowerCase","replace","substring","buildStepCount","node","nodes","filter","child","_child$primaryNodeTyp","getLatestModifiedDate","_node$properties","dates","formLastModified","property","collectDates","currentNode","depth","Array","isArray","_currentNode$properti","lastModified","forEach","_child$primaryNodeTyp2","fieldset","Math","apply","_toConsumableArray","map","date","getTime","FormListView","history","useHistory","match","useRouteMatch","_useFormList","_useFormBuilderContex","_useQuery","useQuery","variables","paths","fetchPolicy","data","loading","refetch","_useMutation","useMutation","_useMutation2","createFormMutation","creating","_useMutation3","_useMutation4","deleteMutation","deleting","forms","_data$jcr","jcr","nodesByCriteria","_node$properties2","uuid","path","displayName","steps","updatedAt","createForm","useCallback","_asyncToGenerator","_regeneratorRuntime","_callee","form","_context","next","parentPath","stop","_x","deleteForm","_callee2","pathOrId","_context2","_x2","useFormList","createOpen","setCreateOpen","basePath","url","handleDelete","confirm","abrupt","formatUpdatedAt","formatter","Intl","DateTimeFormat","dateStyle","timeStyle","error","console","warn","format","_unused","handleDuplicate","duplicateTitle","LayoutContent","header","Header","subtitle","mainActions","key","_ref3","_callee3","payload","_context3","_x3","Loader","Chip","count","dangerouslySetInnerHTML","__html","navigateToPreview","icon","Visibility","navigateToSubmissions","ViewStream","pathname","state","formTitle","navigateToSettings","SettingIcon","Copy","navigateToForm","EditIcon","DeleteIcon","row","action","join","IconComponent","FIELD_TYPE_ICONS","inputButton","Follow","inputCheckbox","CheckboxChecked","checkboxGroup","MultipleListSelector","inputColor","Palette","inputDate","Calendar","inputDatetimeLocal","Clock","inputEmail","Rocket","inputFile","CloudUpload","inputHidden","Hidden","inputRadio","RadioChecked","radioGroup","inputText","Text","select","ListSelection","textarea","Paragraph","StepItem","isActive","onSelect","onRemove","_useSortable","useSortable","attributes","listeners","setNodeRef","transform","transition","style","CSS","Transform","ref","weight","fields","Sidebar","activeStepId","onSelectStep","onAddStep","onRemoveStep","onReorderSteps","onAddField","activeTab","setActiveTab","sensors","useSensors","useSensor","PointerSensor","activationConstraint","distance","paddingTop","DndContext","onDragEnd","active","over","previousIndex","findIndex","nextIndex","reordered","arrayMove","SortableContext","items","strategy","verticalListSortingStrategy","includes","FieldPreview","_field$properties","readOnly","checked","checkboxOptions","option","_option$properties","radioOptions","_option$properties2","renderField","FieldRow","StepEditor","onUpdateStep","onRemoveField","onSelectField","onReorderFields","activeFieldId","fieldId","FieldEditor","stepId","onChangeField","onAddNestedField","updateField","partial","updateProperty","booleanDescriptors","beforeBoolean","afterBoolean","seenBoolean","descriptor","typeLabel","renderPropertyField","Checkbox","Boolean","placeholderKey","nextValue","Number","isNaN","_data$","selectedValue","Dropdown","item","addLabel","removeLabel","itemLabel","index","optionKey","_","idx","renderStringListField","nextLabel","updateNestedField","optionId","updateNestedProperties","propertiesPartial","nextProps","optionLabel","renderCheckboxOptions","_option$properties3","_option$properties4","_item$properties","isTarget","currentValue","handleDefaultToggle","renderRadioOptions","_field$properties2","_field$properties3","allowMultiple","updateOptions","updateOption","renderSelectOptions","getPropertyValue","values","parseOptionString","raw","candidate","endsWith","slice","JSON","parse","normalizeField","_node$primaryNodeType","getFieldTypeByNode","childNodes","coerceBoolean","entry","parsed","_typeof","initialName","normalizeStep","isFieldsetNode","_node$primaryNodeType2","buildFieldPropertiesInput","identifier","names","allowedProperties","Set","add","Object","entries","has","serializedOptions","stringify","buildStepPropertiesInput","createEmptySet","updateFieldNode","childChanged","nextChildren","updated","nextFields","useFormEditor","formId","defaultLanguage","activeLanguage","setActiveLanguage","_useState3","_useState4","formState","setFormState","_useState5","_useState6","saving","setSaving","_useState7","_useState8","dirtySteps","setDirtySteps","_useState9","_useState0","dirtyFields","setDirtyFields","_useState1","_useState10","formMetadataDirty","setFormMetadataDirty","shouldSkipFormQuery","skip","languagesData","sitePath","updateFormMutation","addStepMutation","_useMutation5","updateStepMutation","_useMutation7","reorderStepsMutation","_useMutation9","deleteNodeMutation","_useMutation1","addFieldMutation","_useMutation11","updateFieldMutation","_useMutation13","reorderFieldsMutation","_useMutation15","renameNodeMutation","log","json","nodeById","normalized","_containerNodes$","reduce","acc","propertiesToObject","directStepNodes","containerNodes","fieldsetsContainers","containerStepNodes","flatMap","container","stepNodes","fieldsetsPath","normalizeForm","siteLanguages","_languagesData$jcr","nodeByPath","languages","updateFormState","markStepDirty","markFieldDirty","addStep","updateStepState","removeStep","_formState$steps","reorderSteps","nextOrder","stepsParentPath","addField","_ref4","_callee4","_formState$steps2","template","_context4","_x4","addNestedField","_ref6","_callee5","_ref5","overrideProperties","enrichedTemplate","_context5","_x5","updateFieldState","removeField","_ref7","_callee6","_formState$steps3","_step$fields","_context6","_x6","_x7","reorderFields","_ref8","_callee7","_formState$steps4","_context7","_x8","_x9","saveChanges","_callee8","promises","_context8","_findFieldById","findFieldById","Promise","all","finish","_step","_iterator","_createForOfIteratorHelper","s","n","done","stack","current","shift","err","e","f","FormPreview","params","_useFormEditor","activeStep","setActiveStep","handleFieldChange","_form$properties","_form$properties2","_form$properties3","_form$properties4","_form$properties5","_form$properties6","_form$properties7","_form$properties8","customCss","css","cssStyle","submitBtnLabel","resetBtnLabel","showResetBtn","newFormBtnLabel","showNewFormBtn","tryAgainBtnLabel","showTryAgainBtn","files","renderEditableField","alert","renderFormPreview","FormBuilder","_activeStep$fields","_location$state","location","useLocation","isPreviewMode","URLSearchParams","search","get","setActiveStepId","setActiveFieldId","some","_form$steps","activeField","handleRemoveStep","handleRemoveField","initialTitle","currentLabel","headerPrefix","headerTitle","formLabel","formName","backButton","ChevronLeft","settingsAction","Setting","previewAction","editAction","Edit","saveAction","order","Toolbar","_useLexicalComposerCo","useLexicalComposerContext","editor","formatText","formatType","dispatchCommand","FORMAT_TEXT_COMMAND","ContentSetterPlugin","_useLexicalComposerCo3","hasSetInitialContentRef","useRef","timeoutId","setTimeout","_isSettingLexicalContent","update","$getRoot","clear","dom","DOMParser","parseFromString","$generateNodesFromDOM","append","paragraphNode","$createParagraphNode","textNode","$createTextNode","clearTimeout","ChangeHandlerPlugin","_useLexicalComposerCo5","lastHtmlRef","registerUpdateListener","editorState","read","htmlString","$generateHtmlFromNodes","LexicalEditor","_ref4$height","height","initialConfig","onError","minHeight","LexicalComposer","RichTextPlugin","contentEditable","ContentEditable","HistoryPlugin","FormSettings","submissionMessage","errorMessage","customTarget","updateFormMetadata","updateResponses","updateButtons","updateActions","updateStyle","prop","p","getBooleanPropertyValue","newFormData","handleSave","_t","handleInputChange","level","Switch","Textarea","FormBuilderAppRaw","ApolloProvider","Route","exact","component","Redirect","to","FormBuilderApp","withRouter","AdminPanel","FormBuilderIcon","width","viewBox","fill","xmlns","x","y","rx","stroke","strokeWidth","opacity","cx","cy","r","registerRoutes","jahia","i18n","loadNamespaces","registry","targets","defaultPath","constants","appsTarget","requireModuleInstalledOnSite","isSelectable","render","v","Suspense","fallback","debug","registerResources","en","fr","namespaceData","i18next","callback","register"],"ignoreList":[],"sourceRoot":""}